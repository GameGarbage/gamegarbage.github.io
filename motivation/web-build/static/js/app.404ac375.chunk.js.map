{"version":3,"sources":["app/components/utils/log.js","app/features/category-slice.js","app/features/couterSlice.js","app/models/dao-base.js","app/models/task/task-dao.js","app/models/task/task-validator.js","app/models/contants.js","app/models/task/task-model.js","app/models/task/task-list-model.js","app/features/task-slice.js","app/features/active-category-slice.js","app/store.js","app/components/utils/fab.js","app/components/utils/bottom-bar.js","app/components/utils/removed-snack-bar.js","app/components/utils/empty-page.js","app/components/task/category-action-sheet.js","app/models/tab-list-model.js","app/components/utils/button-pressable.js","app/components/task/category-tab.js","app/models/category/task-category-model.js","app/components/utils/hide-keyboard.js","app/components/utils/dialog.js","app/components/task/task-category-form.js","app/components/utils/expo-checkbox.js","app/components/task/task-list.js","app/models/category/task-category-validator.js","app/models/category/task-category-dao.js","app/services/task-category-service.js","app/services/task-service.js","app/services/remove-item-service.js","app/screens/task-screen.js","app/components/home/box-label.js","app/components/home/title-boxs.js","app/components/home/task-list.js","app/services/home-service.js","app/styles/component-style.js","app/screens/home-screen.js","app/services/quote-service.js","app/screens/quotes-screen.js","app/screens/quote-detail-screen.js","app/models/date-time/date-time-model.js","app/models/day-repeat-model.js","app/models/task/task-repeat-mediator.js","app/components/utils/chip.js","app/components/task/task-date-time-picker.js","app/components/task/time-repeat-component.js","app/components/task/task-time-dialog.js","app/screens/task-detail-screen.js","App.js"],"names":["defaultConfig","levels","debug","info","warn","error","severity","transport","consoleTransport","transportOptions","colors","async","dateFormat","printLevel","printDate","enabled","log","logger","createLogger","categorySlice","createSlice","name","initialState","value","reducers","setCategories","state","action","payload","createAsyncThunk","dispatch","categories","actions","categorySliceReducer","reducer","counterSlice","increment","decrement","incrementByAmount","counterSliceReducer","DaoBase","inputKey","AsyncStorage","getItem","inputValue","setItem","mergeItem","multiSet","clear","TaskDao","categoryId","key","this","getKeyPrefix","taskDao","TaskValidator","object","id","string","required","title","description","nullable","selectedDaysRepeat","array","of","date","time","createdDate","updatedDate","TaskListValidator","constants","layoutConstants","TaskModel","taskJson","deleted","uuid","v4","Date","TaskListModel","tasks","includeDeleted","filter","task","push","index","map","i","rawTasks","t","taskSlice","setTasks","saveTasksByCategory","validate","setTasksByCategory","JSON","stringify","saveRecent","recent","isUpdate","parse","getTasksByCategory","some","length","slice","Error","taskList","set","get","taskSliceReducer","activeCategorySlice","setActiveCategory","activeCategorySliceReducer","configureStore","counter","category","activeCategory","middleware","getDefaultMiddleware","serializableCheck","FAB","icon","label","variant","size","color","tintColor","loading","loadingIndicator","loadingIndicatorPosition","visible","style","pressableContainerStyle","contentContainerStyle","iconContainerStyle","labelContainerStyle","labelStyle","loadingOverlayContainerStyle","pressEffect","pressEffectColor","onPress","onPressIn","onPressOut","onLongPress","onBlur","onFocus","onMouseEnter","onMouseLeave","delayLongPress","disabled","hitSlop","pressRetentionOffset","android_disableSound","android_ripple","testOnly_pressed","rest","palette","usePaletteColor","hasIcon","useMemo","styles","useStyles","container","backgroundColor","main","borderRadius","pressableContainer","overflow","pressable","flexDirection","alignItems","paddingStart","paddingEnd","paddingVertical","iconContainer","justifyContent","width","height","labelContainer","marginStart","loadingOverlayContainer","StyleSheet","absoluteFillObject","animated","useRef","Animated","Value","current","useEffect","timing","toValue","duration","useNativeDriver","start","getLoadingIndicator","on","useState","pressed","setPressed","handlePressIn","useCallback","event","handlePressOut","animatedElevation","useAnimatedElevation","transform","scale","View","selectable","getLabel","timeout","BottomBar","props","onMenuClick","onAddClick","leading","left","position","end","bottom","top","alignSelf","borderColor","borderWidth","EmptyPage","flex","padding","fontSize","RemovedSnackBar","item","onUndo","setVisible","onDone","setTimeout","message","compact","clearTimeout","CategoryActionSheet","onDelete","onUpdate","isDefaultCategory","actionRef","show","onShow","hide","ref","onClose","margin","display","TabListModel","tabs","setDefaultActiveTab","tab","active","ButtonPressable","children","customStyles","others","Pressable","button","buttonPressed","create","opacity","textAlign","textOverflow","CategoryTab","onAdd","onClick","tabList","onClickHandler","tabContainer","ScrollView","horizontal","flexGrow","numberOfLines","textActive","buttonMenu","borderBottomWidth","borderBottomColor","buttonActive","textColor","TaskCategoryModel","HideKeyboard","TouchableWithoutFeedback","Keyboard","dismiss","backdrop","surface","marginHorizontal","Dialog","onDismiss","portalVisible","setPortalVisible","animatedValue","easing","Easing","out","cubic","Platform","OS","absoluteFill","pointerEvents","needsOffscreenAlphaCompositing","elevation","TaskCategoryForm","onSave","React","setTitle","formTitle","setFormTitle","onChangeText","placeholder","obj","ExpoCheckbox","onValueChange","onChange","keyword","other","handleChange","accessibilityRole","accessibilityState","checked","root","undefined","checkedAndDisabled","Image","source","uri","displayName","defaultEnabledColor","select","ios","android","TaskList","timeDisplay","setHours","getHours","setMinutes","getMinutes","listItem","console","paddingLeft","toLocaleDateString","isAvailableAsync","Promise","resolve","minHeight","CategoryValidator","boolean","CategoryListValidator","taskCategoryService","taskService","removeItemService","TaskCategoryDao","TaskCategoryService","categoryDao","defaultCategory","useDispatch","getCategories","c","validateSync","batch","categoryModel","updateCategory","addCategories","createTaskCategoryService","TaskService","updateTaskByCategory","removeTaskByCategory","addTaskByCategory","remove","undo","list","softDelete","update","add","createTaskService","RemoveItemService","categoryService","isTaskModel","isTaskCategoryModel","constructor","removeAble","reItem","removeCategories","result","undoRemovedTask","undoRemovedCategory","validateScreen","screenState","connect","navigation","route","categoryUpdate","setCategoryUpdate","categoryVisible","setCategoryVisible","categoryActionSheetVisible","setCategoryActionSheetVisible","snackVisible","setSnackVisible","snackItem","setSnackItem","params","setOptions","headerLeft","HeaderBackButton","goBack","labelVisible","initTaskScreen","onDeleteTask","onNavigateTaskScreen","navigate","getCategoriesWithDefault","getTasksByCategoryStore","softRemoveTaskByCategory","enableSnack","onCategoryOpen","onTaskTapAdd","onCategoryTapClick","setActiveCategoriesAndLoadTasks","onCloseCategoryForm","onSaveCategoryForm","saveCategories","onDeleteCategoryForm","onDeleteCategoryTab","softRemoveCategories","onUpdateCategoryTab","removedItem","onClickUndoRemovedSnackBar","undoRemoved","onDoneRemovedSnackBar","catergoryId","removePermanent","className","BoxLabel","textStyle","box","TitleBoxs","upperTitle","charAt","toUpperCase","marginVertical","flexWrap","HomeTaskList","HomeService","url","request","axios","baseURL","data","lineStyle","line","service","marginTop","HomeScreen","homeService","useSelector","focus","useIsFocused","getCategoriesSync","onPressTaskList","reverse","Object","keys","k","tag","QuotesScreen","quotes","setQuotes","init","res","contents","q","quote","QuoteService","owner","viewPager","page","QuoteDetailScreen","quoteService","getList","ImageBackground","resizeMode","DateTimeModel","DayRepeatModel","selectedDays","days","selected","day","includes","setSelected","reduce","acc","curr","isNoRepeat","isDaily","isMonthly","TaskRepeatMediator","dayRepeat","dateModel","timeModel","displayChip","getHoursMinutes","getDate","isNormalRepeat","getDateString","getSelectedValue","TaskRepeatRawDataMediator","repeat","Chip","onButtonPress","onIconPress","titleStyle","trailing","TaskDateTimePicker","onDateChange","onTimeChange","hideDate","hideTime","testID","mode","is24Hour","selectedDate","selectedTime","TimeRepeatComponent","setDayRepeat","repeatValue","setRepeatValue","getShowRepeat","setShow","onCheck","values","every","newRepeat","newDayRepeat","checkbox","newDate","newTime","TaskTimeDialog","dateTimeModel","setHideDate","setHideTime","hideDateTime","getHideDate","getHideTime","dropdown","paddingHorizontal","marginRight","placeholderStyle","selectedTextStyle","iconStyle","inputSearchStyle","displayCategories","setDescription","displayDateTime","setDisplayDateTime","isFocus","setIsFocus","taskTimeDialogVisible","setTaskTimeDialogVisible","taskTimeDialogDate","setTaskTimeDialogDate","taskTimeDialogTime","setTaskTimeDialogTime","taskTimeDialogRepeat","setTaskTimeDialogRepeat","stateRef","saveAndBack","initTaskDetail","handelSave","taskTimeDialogOnClose","mediator","process","taskObj","saveTaskByCategory","resetTime","search","maxHeight","labelField","valueField","searchPlaceholder","datePicked","timePicked","marginBottom","Stack","createNativeStackNavigator","App","store","NavigationContainer","Navigator","Screen","component","options","TaskScreen","TaskDetailScreen"],"mappings":"8NAEMA,EAAgB,CACpBC,OAAQ,CACNC,MAAO,EACPC,KAAM,EACNC,KAAM,EACNC,MAAO,GAETC,SAAU,QACVC,UAAWC,mBACXC,iBAAkB,CAChBC,OAAQ,CACNP,KAAM,aACNC,KAAM,eACNC,MAAO,cAGXM,OAAO,EACPC,WAAY,OACZC,YAAY,EACZC,WAAW,EACXC,SAAS,GAGPC,EAAMC,SAAOC,aAAalB,GCtBjBmB,EAAgBC,sBAAY,CACvCC,KAAM,WACNC,aAAc,CACZC,MAAO,IAETC,SAAU,CACRC,cAAe,SAACC,EAAOC,GACrBX,EAAId,MAAM,+BAAgCyB,GAC1CD,EAAMH,MAAQI,EAAOC,YAcZH,GATcI,2BAC3B,yBAAyB,WAAD,WACxB,UAAOD,EAAQ,GAAmB,IAAhBE,EAAQ,EAARA,SACRC,EAAeH,EAAfG,WACRD,EAASL,EAAcM,OACxB,qDAJwB,IAQMZ,EAAca,QAAhCP,eAGAQ,EADcd,EAAce,QCzB9BC,EAAef,sBAAY,CACtCC,KAAM,UACNC,aAAc,CACZC,MAAO,GAETC,SAAU,CACRY,UAAW,SAACV,GAKVA,EAAMH,OAAS,GAEjBc,UAAW,SAACX,GACVA,EAAMH,OAAS,GAEjBe,kBAAmB,SAACZ,EAAOC,GACzBD,EAAMH,OAASI,EAAOC,YAMrB,EAAoDO,EAAaH,QAGzDO,GAHS,EAATH,UAAoB,EAATC,UAA4B,EAAjBC,kBAETH,EAAaD,S,2FCzBpBM,EAAO,oCAmBzB,OAnByB,kDAC1B,UAAcC,GACZ,aAAaC,UAAaC,QAAQF,MACnC,mDAHyB,IAGzB,2CAED,UAAcA,EAAUG,SAChBF,UAAaG,QAAQJ,EAAUG,MACtC,qDAJA,IAIA,6CAED,UAAgBH,EAAUG,SAClBF,UAAaI,UAAUL,EAAUG,MACxC,qDAJA,IAIA,4CAED,UAAerB,SACPmB,UAAaK,SAASxB,MAC7B,mDAJA,IAIA,yCAED,kBACQmB,UAAaM,WACpB,kDAJA,MAIA,EAnByB,G,+aCFM,IAEbC,EAAO,wFAkBzB,OAlByB,6DAC1B,UAAyBC,GACvB,IAAMC,EAAMC,KAAKC,eAAiBH,EAClC,aAAaE,KAAKT,QAAQQ,MAC3B,mDAJyB,IAIzB,sDAED,UAAyBD,EAAY3B,GACnC,IAAM4B,EAAMC,KAAKC,eAAiBH,QAC5BE,KAAKP,QAAQM,EAAK5B,MACzB,qDALA,IAKA,uDAED,UAA0B2B,EAAY3B,GACpC,IAAM4B,EAAMC,KAAKC,eAAiBH,QAC5BE,KAAKN,UAAUK,EAAK5B,MAC3B,qDALA,IAKA,0BAED,WACE,MAAO,sBACR,EAlByB,CAASiB,GAqBxBc,EAAU,IAAIL,E,QCrBrBM,EAAgBC,iBAAO,CAC3BC,GAAIC,mBAASC,WACbC,MAAOF,mBAASC,WAChBT,WAAYQ,mBAASC,WACrBE,YAAaH,mBAASI,WACtBC,mBAAoBC,kBAAQC,GAAGP,oBAAUI,WACzCI,KAAMA,iBAAOJ,WACbK,KAAMD,iBAAOJ,WACbM,YAAaF,iBAAOJ,WACpBO,YAAaH,iBAAOJ,aAEhBQ,EAAoBN,kBAAQC,GAAGV,GCbxBgB,EACO,iBADPA,EAEG,aAFHA,EAGI,EAHJA,EAIC,gCAGDC,EACK,U,kBCNGC,EAAS,KAY5B,WAAYC,GAAW,YACrB,IAAOjB,EAAyGiB,EAAzGjB,GAAIG,EAAqGc,EAArGd,MAAOC,EAA8Fa,EAA9Fb,YAAaE,EAAiFW,EAAjFX,mBAAoBG,EAA6DQ,EAA7DR,KAAMC,EAAuDO,EAAvDP,KAAMQ,EAAiDD,EAAjDC,QAASzB,EAAwCwB,EAAxCxB,WAAYkB,EAA4BM,EAA5BN,YAAaC,EAAeK,EAAfL,YACjGjB,KAAKK,GAAKA,GAAUmB,IAAKC,KACzBzB,KAAKQ,MAAQA,EACbR,KAAKF,WAAaA,EAClBE,KAAKS,YAAcA,EACnBT,KAAKW,mBAAqBA,EAC1BX,KAAKc,KAAOA,EACZd,KAAKe,KAAOA,EACZf,KAAKuB,QAAUA,EACfvB,KAAKgB,YAAcA,GAAe,IAAIU,KACtC1B,KAAKiB,YAAcA,GAAe,IAAIS,QCtB7BC,EAAa,yCACxBC,MAAQ,GAgEP,OAhES,wBAEV,WAA6B,IAAzBC,EAAc,wDAChB,OAAKA,EAKE7B,KAAK4B,MAJH5B,KAAK4B,MAAME,QAAO,SAACC,GACxB,OAAQA,EAAKR,aAIlB,iBAED,SAAIQ,GAEF,OADA/B,KAAK4B,MAAMI,KAAKD,GACT/B,KAAK4B,QACb,wBAED,SAAWzD,GACT,IAAI8D,GAAS,EAQb,OAPAjC,KAAK4B,MAAQ5B,KAAK4B,MAAMM,KAAI,SAACH,EAAMI,GAKjC,OAJIJ,EAAK1B,IAAMlC,EAAMkC,KACnB0B,EAAKR,SAAU,EACfU,EAAQE,GAEHJ,KAEFE,IACR,iBAED,SAAIG,GACCA,IACDpC,KAAK4B,MAAQQ,EAASF,KAAI,SAACZ,GACzB,IAAMS,EAAO,IAAIV,EAAUC,GAI3B,OAHKS,EAAKjC,aACRiC,EAAKjC,WAAaqB,GAEbY,QAGZ,oBAED,SAAO5D,GACL6B,KAAK4B,MAAQ5B,KAAK4B,MAAME,QAAO,SAACC,GAC9B,OAAOA,EAAK1B,KAAOlC,EAAMkC,KAAuB,IAAjB0B,EAAKR,aAEvC,kBAED,SAAKpD,GACH6B,KAAK4B,MAAQ5B,KAAK4B,MAAMM,KAAI,SAAAH,GAI1B,OAHGA,EAAK1B,KAAOlC,EAAMkC,KACnB0B,EAAKR,SAAU,GAEVQ,OAEV,oBAED,SAAOA,GAQL,OAPA/B,KAAK4B,MAAQ5B,KAAK4B,MAAMM,KAAI,SAACG,GAC3B,OAAIA,EAAEhC,KAAO0B,EAAK1B,GACT0B,EAEAM,KAGJrC,KAAK4B,UACb,EAjEuB,GCKbU,EAAYtE,sBAAY,CACnCC,KAAM,OACNC,aAAc,CACZC,MAAO,IAETC,SAAU,CACRmE,SAAU,SAACjE,EAAOC,GAChBX,EAAId,MAAM,qBAAsByB,GAChCD,EAAMH,MAAQI,EAAOC,YAKdgE,EAAsB/D,2BACjC,2BAA2B,WAAD,WAC1B,UAAOD,EAAQ,GAAmB,IAAhBE,EAAQ,EAARA,SACRoB,EAAsBtB,EAAtBsB,WAAY8B,EAAUpD,EAAVoD,YACdV,EAAkBuB,SAASb,SAC3B1B,EAAQwC,mBAAmB5C,EAAY6C,KAAKC,UAAUhB,IAC5DlD,EAAS6D,EAASX,OACnB,qDAN0B,IAShBiB,EAAapE,2BACxB,kBAAkB,WAAD,WACjB,UAAOD,GACL,IAAQsE,EAAqBtE,EAArBsE,OAAQC,EAAavE,EAAbuE,eACV5C,EAAcsC,SAASK,GAC7B,IAAIV,EAAWO,KAAKK,YACZ9C,EAAQ+C,mBAAmB9B,KAC9B,IACF4B,GAAYX,EAASc,MAAK,SAAAnB,GAAI,OAAIA,EAAK1B,KAAOyC,EAAOzC,SACtD+B,EAAWA,EAASN,QAAO,SAAAC,GAAI,OAAIA,EAAK1B,KAAOyC,EAAOzC,OAErD+B,EAASe,QAAUhC,IACpBiB,EAAWA,EAASgB,MAAM,EAAGjC,IAE/BiB,EAASJ,KAAKc,SACR5C,EAAQwC,mBAAmBvB,EAA0BwB,KAAKC,UAAUR,OAC3E,mDAfiB,IAkBPa,EAAqBxE,2BAChC,0BAA0B,WAAD,WACzB,UAAOD,EAAQ,GAAmB,IAAhBE,EAAQ,EAARA,SACRoB,EAA+BtB,EAA/BsB,WAAY+B,EAAmBrD,EAAnBqD,eACpB,IACE,IAAIO,EAAWO,KAAKK,YACZ9C,EAAQ+C,mBAAmBnD,IAEnC,IAAIsC,EACF,MAAMiB,MAAM,2BAEd,IAAMC,EAAW,IAAI3B,EACrB2B,EAASC,IAAInB,GAEb1D,EAAS6D,EAASe,EAASE,IAAI3B,KAC/B,MAAO5E,GACPW,EAAIZ,KAAKC,GACTyB,EAAS6D,EAAS,SAErB,qDAlByB,IAsBbA,EAAaD,EAAU1D,QAAvB2D,SAGAkB,EADUnB,EAAUxD,QCxEtB4E,GAAsB1F,sBAAY,CAC7CC,KAAM,iBACNC,aAAc,CACZC,MAAO,MAETC,SAAU,CACRuF,kBAAmB,SAACrF,EAAOC,GACzBX,EAAId,MAAM,oBAAqByB,GAC/BD,EAAMH,MAAQI,EAAOC,YAMZmF,GAAsBD,GAAoB9E,QAA1C+E,kBAGAC,GADoBF,GAAoB5E,QCZxC+E,4BAAe,CAC5B/E,QAAS,CACPgF,QAAS3E,EACT4C,KAAM0B,EACNM,SAAUlF,EACVmF,eAAgBJ,IAElBK,WAAY,SAACC,GAAoB,OAC/BA,EAAqB,CACnBC,mBAAmB,O,irCCZzB,IAiMeC,GAjMH,SAAH,GAqCF,IApCLC,EAAI,EAAJA,KACAC,EAAK,EAALA,MAAM,EAAD,EACLC,eAAO,MAAG,WAAU,MACpBC,YAAI,MAAG,UAAS,MAChBC,aAAK,MAAG,YAAW,EACnBC,EAAS,EAATA,UAAU,EAAD,EACTC,eAAO,OAAQ,EACfC,EAAgB,EAAhBA,iBAAiB,EAAD,EAChBC,gCAAwB,MAAG,OAAM,MACjCC,eAAO,OAAO,EACdC,EAAK,EAALA,MACAC,EAAuB,EAAvBA,wBACAC,EAAqB,EAArBA,sBACAC,EAAkB,EAAlBA,mBACAC,EAAmB,EAAnBA,oBACAC,EAAU,EAAVA,WACAC,EAA4B,EAA5BA,6BAEAC,EAAW,EAAXA,YACAC,EAAgB,EAAhBA,iBACAC,EAAO,EAAPA,QACAC,EAAS,EAATA,UACAC,EAAU,EAAVA,WACAC,EAAW,EAAXA,YACAC,EAAM,EAANA,OACAC,EAAO,EAAPA,QACAC,EAAY,EAAZA,aACAC,EAAY,EAAZA,aACAC,EAAc,EAAdA,eACAC,EAAQ,EAARA,SACAC,EAAO,EAAPA,QACAC,EAAoB,EAApBA,qBACAC,EAAoB,EAApBA,qBACAC,EAAc,EAAdA,eACAC,EAAgB,EAAhBA,iBACGC,EAAI,WAEDC,EAAUC,0BAAgBhC,EAAOC,GAEjCgC,EAAUC,mBACd,kBAAMtC,GAASM,GAAwC,SAA7BE,IAC1B,CAACR,EAAMM,EAASE,IAGZ+B,EAASC,qBACb,iBAAO,CACLC,UAAW,CACTC,gBAAiBP,EAAQQ,KACzBC,aAAuB,YAATzC,EAAqB,GAAK,IAE1C0C,mBAAoB,CAClBD,aAAuB,YAATzC,EAAqB,GAAK,GACxC2C,SAAU,UAEZC,UAAW,CACTC,cAAe,MACfC,WAAY,SACZC,aACc,aAAZhD,EACImC,EACW,YAATlC,EACE,GACA,EACO,YAATA,EACA,GACA,GACO,YAATA,EACA,GACA,EACNgD,WAAwB,aAAZjD,EAAmC,YAATC,EAAqB,GAAK,GAAe,YAATA,EAAqB,GAAK,EAChGiD,gBAA0B,YAATjD,EAAqB,GAAK,GAE7CkD,cAAe,CACbC,eAAgB,SAChBL,WAAY,SACZM,MAAO,GACPC,OAAQ,IAEVC,eAAgB,CACdC,YAAarB,EAAoB,YAATlC,EAAqB,GAAK,EAAK,GAEzDwD,wBAAwB,GAAD,MAClBC,WAAWC,oBAAkB,IAChCP,eAAgB,SAChBL,WAAY,SACZP,gBAAiBP,EAAQQ,UAG7B,CAACzC,EAASC,EAAMgC,EAASE,IAGrByB,EAAWC,iBAAO,IAAIC,WAASC,MAAMxD,EAAU,EAAI,IAAIyD,QAE7DC,qBAAU,WACRH,WAASI,OAAON,EAAU,CACxBO,QAAS5D,EAAU,EAAI,EACvB6D,SAAU,IACVC,iBAAiB,IAChBC,UACF,CAAC/D,IAEJ,IAAMgE,EAAsB,WAC1B,IAAKlE,EAAkB,OAAO,eAAC,oBAAiB,CAACH,MAAO+B,EAAQuC,KAChE,cAAenE,GACb,IAAK,SACH,OACE,eAAC,OAAI,CAACL,QAAQ,SAASQ,MAAO,CAAEN,MAAO+B,EAAQuC,IAAK,SACjDnE,IAGP,IAAK,WACH,OAAOA,EAAiB,CAAEH,MAAO+B,EAAQuC,KAC3C,QACE,OAAOnE,IAwBb,EAA8BoE,oBAAS,GAAM,YAAtCC,EAAO,KAAEC,EAAU,KAEpBC,EAAgBC,uBACpB,SAACC,GACU,MAAT5D,KAAY4D,GACZH,GAAW,KAEb,CAACzD,IAGG6D,GAAiBF,uBACrB,SAACC,GACW,MAAV3D,KAAa2D,GACbH,GAAW,KAEb,CAACxD,IAGG6D,GAAoBC,+BAAqBP,EAAU,GAAK,GAE9D,OACE,eAAC,UAAO,OAAClE,MAAO,CAACwE,GAAmB3C,EAAOE,UAAW,CAAE2C,UAAW,CAAC,CAAEC,MAAOvB,KAAepD,IAAYwB,GAAI,aAC1G,eAACoD,GAAA,QAAI,CAAC5E,MAAO,CAAC6B,EAAOM,mBAAoBlC,GAAyB,SAChE,gBAAC,YAAS,CACRD,MAAO,CAAC6B,EAAOQ,UAAWnC,GAC1BK,YAAaA,EACbC,iBAAkC,MAAhBA,IAAoBiB,EAAQuC,GAC9CvD,QAASA,EACTC,UAAW0D,EACXzD,WAAY4D,GACZ3D,YAAaA,EACbC,OAAQA,EACRC,QAASA,EACTC,aAAcA,EACdC,aAAcA,EACdC,eAAgBA,EAChBC,SAAUA,EACVC,QAASA,EACTC,qBAAsBA,EACtBC,qBAAsBA,EACtBC,eAAgBA,EAChBC,iBAAkBA,EAAiB,UAElCI,GAAW,eAACiD,GAAA,QAAI,CAAC5E,MAAO,CAAC6B,EAAOc,cAAexC,GAAoB,SA9DtEP,GAAwC,SAA7BE,EAA4CiE,IACpC,oBAATzE,EAAsBA,EAAK,CAAEI,MAAO+B,EAAQuC,GAAIvE,KAAM,KAAQH,IA8DzD,aAAZE,GAA0B,eAACoF,GAAA,QAAI,CAAC5E,MAAO,CAAC6B,EAAOkB,eAAgB3C,GAAqB,SA3D5E,WACf,cAAeb,GACb,IAAK,SACH,OACE,eAAC,OAAI,CAACC,QAAQ,SAASqF,YAAY,EAAO7E,MAAO,CAAC,CAAEN,MAAO+B,EAAQuC,IAAM3D,GAAY,SAClFd,IAGP,IAAK,WACH,OAAOA,EAAM,CAAEG,MAAO+B,EAAQuC,KAChC,QACE,OAAOzE,GAgDkFuF,KAEtFlF,GAAwC,YAA7BE,GACV,eAAC8E,GAAA,QAAI,CAAC5E,MAAO,CAAC6B,EAAOoB,wBAAyB3C,GAA8B,SAAEyD,e,skBCvL1F,ICDIgB,GDmCWC,GAlCG,SAACC,GACjB,IAAQC,EAA4BD,EAA5BC,YAAaC,EAAeF,EAAfE,WACrB,OACE,eAAC,SAAM,CACL3F,QAAQ,SACRE,MAAOrD,EACP+I,QAAS,SAACH,GAAK,OACb,eAAC,aAAU,IACT/E,sBAAuB,CAAEmF,KAAM,IAC/B5E,QAASyE,EACTxF,MAAO,QACPJ,KAAM,SAAC2F,GAAK,OAAK,eAAC,WAAI,OAAE/L,KAAK,QAAW+L,GAAK,IAAEvF,MAAO,aAClDuF,KASRjF,MAAO,CAAEsF,SAAU,WAAYxB,MAAO,EAAGyB,IAAK,EAAGC,OAAQ,GAAI,SAE7D,eAAC,GAAG,CACF9F,MAAOrD,EACPsD,UAAW,QACXc,QAAS0E,EACT7F,KAAM,SAAC2F,GAAK,OAAK,eAAC,WAAI,IAAC/L,KAAK,QAAW+L,KACvCjF,MAAO,CAAEsF,SAAU,WAAYG,KAAM,GAAIC,UAAW,SAAUC,YAAa,QAASC,YAAa,QE9B1F,SAASC,GAAUZ,GAChC,IAAQxE,EAAYwE,EAAZxE,QACR,OACE,gBAACmE,GAAA,QAAI,CAAC5E,MAAO,CAAEgC,gBAAiB,QAAS8D,KAAM,EAAGvD,WAAY,SAAUK,eAAgB,UAAW,UACjG,eAAC,aAAU,CAACtD,KAAM,SAAA2F,GAAK,OAAI,eAAC,WAAI,CAAExF,KAAM,GAAIvG,KAAK,UAAYuH,QAASA,IACtE,eAAC,OAAI,CAACT,MAAO,CAAC+F,QAAS,GAAIrG,MAAO,OAAQsG,SAAS,IAAI,uDDH7D,IA+BeC,GA/BS,SAAChB,GACvB,IAAQiB,EAA8CjB,EAA9CiB,KAAMC,EAAwClB,EAAxCkB,OAAQpG,EAAgCkF,EAAhClF,QAASqG,EAAuBnB,EAAvBmB,WAAYC,EAAWpB,EAAXoB,OAmB3C,OAXA5C,qBAAU,WACL1D,IACDlH,EAAId,MAAM,kBAAmBmO,GAC7BnB,GAAUuB,YAAW,WACnBD,EAAOH,GACPE,GAAW,KAEV,QAEJ,CAACrG,IAGFA,GAAW,eAAC6E,GAAA,QAAI,CAAC5E,MAAO,CAAE8F,KAAM,GAAI,SAClC,eAAC,WAAQ,CACPS,QAAQ,eACR/M,OAAQ,eAAC,SAAM,CAACgG,QAAQ,OAAO/D,MAAM,OAAOiE,MAAM,UAAU8G,SAAO,EAAC/F,QArBpD,WACpBgG,aAAa1B,IACboB,EAAOD,GACPE,GAAW,MAmBPpG,MAAO,CAAEsF,SAAU,WAAYxB,MAAO,GAAIyB,IAAK,GAAIC,OAAQ,S,UExB/DxH,IAAW,EACA,SAAS0I,GAAoBzB,GAC1C,IAAQhG,EAA4DgG,EAA5DhG,eAAgB0H,EAA4C1B,EAA5C0B,SAAUC,EAAkC3B,EAAlC2B,SAAU7G,EAAwBkF,EAAxBlF,QAASqG,EAAenB,EAAfmB,WAC/CS,EAA2C,aAAT,MAAd5H,OAAc,EAAdA,EAAgB3D,IACpCwL,EAAYzD,iBAAO,MAKzBI,qBAAU,WAGA,IAAD,EAFH1D,EALS,WAAO,IAAD,EACnB/B,IAAW,EACM,OAAjB,EAAA8I,EAAUtD,UAAV,EAAmBuD,OAIjBC,GAEiB,OAAjB,EAAAF,EAAUtD,UAAV,EAAmByD,SAEpB,CAAClH,IAoBJ,OACE,eAAC,WAAW,CAACmH,IAAKJ,EAAWK,QART,WAChBnJ,IACF4I,EAAS3H,GAEXmH,GAAW,IAIyC,SAClD,gBAACxB,GAAA,QAAI,CAAC5E,MAAO,CAAEoH,OAAQ,GAAIC,QAAS,QAAS,UAC3C,eAAC,SAAM,CACL7H,QAAQ,OAERiB,QAxBgB,WAAO,IAAD,EAC5BzC,IAAW,EACM,OAAjB,EAAA8I,EAAUtD,UAAV,EAAmByD,OACnBN,EAAS1H,IAsBHiC,SAAU2F,EACVpL,MAAM,mBAHF,mBAKN,eAAC,UAAO,CAACuE,MAAO,CAAEoH,OAAQ,KAC1B,eAAC,SAAM,CACL5H,QAAQ,OAERiB,QA1BgB,WAAO,IAAD,EAC5BzC,IAAW,EACM,OAAjB,EAAA8I,EAAUtD,UAAV,EAAmByD,QAyBb/F,SAAU2F,EACVpL,MAAM,mBAHF,wB,aCvDO6L,GAAY,WAE7B,WAAYC,GAAO,iBADnBA,KAAO,GAEAA,IACCtM,KAAKsM,KAAOA,GAEhBtM,KAAKuM,sBAOR,OANA,wCAED,WACOvM,KAAKsM,KAAKnJ,OAAS,IAAMnD,KAAKsM,KAAKpJ,MAAK,SAAAsJ,GAAG,OAAIA,EAAIC,YAClDzM,KAAKsM,KAAK,GAAGG,QAAS,OAE7B,EAb4B,G,ioBCElB,SAASC,GAAgB1C,GACtC,IAAQxE,EAAuDwE,EAAvDxE,QAASmH,EAA8C3C,EAA9C2C,SAAkBC,GAA4B5C,EAApCyC,OAAoCzC,EAA5B4C,cAAiBC,EAAM,KAAK7C,EAAK,IACpE,OACE,eAAC8C,GAAA,QAAS,OACRtH,QAASA,EACTT,MAAO,gBAAGkE,EAAO,EAAPA,QAAO,MAAO,CACtBrC,GAAOmG,OACP9D,EAASrC,GAAOoG,cAAgB,GAChCJ,KAEEC,GAAM,aAETF,KAKP,IAAM/F,GAASqB,WAAWgF,OAAO,CAC/BD,cAAe,CACbE,QAAS,IAEXH,OAAQ,CACNjC,QAAS,GACTqC,UAAW,SACXhG,SAAU,SACViG,aAAc,c,ypBChBH,SAASC,GAAYrD,GAClC,IACEsC,EAQEtC,EARFsC,KACAtI,EAOEgG,EAPFhG,eACAsJ,EAMEtD,EANFsD,MACAC,EAKEvD,EALFuD,QAGA5H,GAEEqE,EAJF0B,SAIE1B,EAHF2B,SAGE3B,EAFFrE,aAGI6H,GAFK,KACPxD,EAAK,IACO,IAAIqC,GAAaC,IAC3BmB,EAAiB,SAACjB,GACtBe,EAAQf,IAEV,OACE,gBAAC7C,GAAA,QAAI,CAAC5E,MAAO6B,GAAO8G,aAAa,UAK9BF,EAAQlB,MAAQtI,GACf,eAAC2J,GAAA,QAAU,CAACC,YAAU,EAAC7I,MAAO,CAAE8I,SAAU,GAAI,SAC5C,eAAClE,GAAA,QAAI,CAAC5E,MAAO,CAAEqH,QAAS,OAAQ/E,cAAe,OAAQ,SACpDmG,EAAQlB,KAAKpK,KAAI,SAACsK,EAAKvK,GACtB,IAAMwK,EAASD,EAAInM,KAAO2D,EAAe3D,GACzC,OACE,eAACqM,GAAe,CAEdlH,QAAS,WACPiI,EAAejB,IAEjB7G,YAAa,WACX8H,EAAejB,GACf7G,KAEFiH,aACEH,EAAM,SACG7F,GAAOmG,QAAWnG,GAAO6F,QAAM,MAC/B7F,GAAOmG,QAElBN,OAAQA,EAAO,SAEf,eAAC,OAAI,CACHqB,cAAe,EACf/I,MAAO0H,EAAS7F,GAAOmH,WAAa,GAAG,SAEtCvB,EAAIhM,SAnBFyB,UA2BjB,eAAC,aAAU,CAETuD,QAAS8H,EACTjJ,KAAM,SAAC2F,GAAK,OAAK,eAAC,WAAI,IAAC/L,KAAK,QAAW+L,MAFnC,mBAOZ,IAAMpD,GAASqB,WAAWgF,OAAO,CAC/BF,OAAQ,CACNnF,MAAO,IAEToG,WAAY,CACVpG,MAAO,IAET8F,aAAc,CACZtB,QAAS,OACT/E,cAAe,MACfN,gBAAiB,QACjBkH,kBAAmB,EACnBC,kBAAmB,sBAErBC,aAAc,CACZvG,MAAO,IACP8C,YAAatJ,EACb6M,kBAAmB,GAErBF,WAAY,CACVtJ,MAAOrD,GAETqL,OAAQ,CACN2B,UAAWhN,EACXsJ,YAAatJ,EACb6M,kBAAmB,EACnBhH,aAAc,KClGGoH,GAAiB,KAOlC,cAA6D,IAAhDhO,EAAE,EAAFA,GAAIG,EAAK,EAALA,MAAOe,EAAO,EAAPA,QAASP,EAAW,EAAXA,YAAaC,EAAW,EAAXA,YAAW,YACrDjB,KAAKK,GAAKA,GAAUmB,IAAKC,KACzBzB,KAAKQ,MAAQA,EACbR,KAAKuB,QAAUA,EACfvB,KAAKgB,YAAcA,GAAe,IAAIU,KACtC1B,KAAKiB,YAAcA,GAAe,IAAIS,Q,kBCN/B4M,GANM,SAAH,OAAM3B,EAAQ,EAARA,SAAQ,OAC5B,eAAC4B,GAAA,QAAwB,CAAC/I,QAAS,kBAAMgJ,WAASC,WAAU,SACzD9B,K,iBCwCD/F,GAASqB,WAAWgF,OAAO,CAC/ByB,SAAU,CACR3H,gBAAiB,kBAEnBD,UAAW,CACTa,eAAgB,SAChBL,WAAY,SACZO,OAAQ,OAEV8G,QAAS,CACP/G,MAAO,OACPgH,iBAAkB,MAIPC,GArDA,SAAH,GAAkD,IAAD,IAA3C/J,eAAO,OAAQ,EAAEgK,EAAS,EAATA,UAAWnC,EAAQ,EAARA,SAC5C,EAA0C3D,mBAASlE,GAAQ,YAApDiK,EAAa,KAAEC,EAAgB,KAEhCC,EAAgBtI,mBAAQ,kBAAM,IAAI0B,WAASC,MAAMxD,EAAU,EAAI,KAAI,IAezE,OAbA0D,qBAAU,WACJ1D,GAASkK,GAAiB,GAE9B3G,WAASI,OAAOwG,EAAe,CAC7BvG,QAAS5D,EAAU,EAAI,EACvB6D,SAAU,IACVuG,OAAQC,WAAOC,IAAID,WAAOE,OAC1BzG,gBAAiC,YAAhB0G,WAASC,KACzB1G,OAAM,WACF/D,GAASkK,GAAiB,QAEhC,CAAClK,IAECiK,EAGH,gBAAC,SAAM,WACL,eAACR,GAAA,QAAwB,CAAC/I,QAASsJ,EAAU,SAC3C,eAACzG,GAAA,QAASsB,KAAI,CAAC5E,MAAO,CAACkD,WAAWuH,aAAc5I,GAAO8H,SAAU,CAAExB,QAAS+B,QAE9E,eAAC5G,GAAA,QAASsB,KAAI,CACZ5E,MAAO,CAACkD,WAAWuH,aAAc5I,GAAOE,UAAW,CAAEoG,QAAS+B,IAC9DQ,cAAc,WACdC,+BAAgD,YAAhBJ,WAASC,GAAiB,SAE1D,eAAC,UAAO,CAACxL,SAAS,SAAS4L,UAAW,GAAI5K,MAAO,CAAC6B,GAAO+H,SAAS,SAC/DhC,SAbkB,M,skBCNd,SAASiD,GAAiB5F,GAIvC,IAAQjG,EAAiDiG,EAAjDjG,SAAUe,EAAuCkF,EAAvClF,QAASoH,EAA8BlC,EAA9BkC,QAAS2D,EAAqB7F,EAArB6F,OAAQnE,EAAa1B,EAAb0B,SAC5C,EAA0BoE,YAAuB,MAAR/L,OAAQ,EAARA,EAAUvD,QAAS,IAAG,YAAxDA,EAAK,KAAEuP,EAAQ,KAChBhN,IAAagB,EACnB,EAAkC+L,WAAe,mBAAkB,YAA5DE,EAAS,KAAEC,EAAY,KAE9BH,aAAgB,WAGZG,EAFElM,EAEW,kBAGA,qBAEd,CAACiG,EAAMjI,OAgBV,OACE,eAAC,GAAM,CAAC+C,QAASA,EAASgK,UAAW5C,EAAQ,SAC3C,eAAC,GAAY,UACX,gBAACvC,GAAA,QAAI,WACH,gBAACA,GAAA,QAAI,CACH5E,MAAO,CAAEqH,QAAS,OAAQ/E,cAAe,OACzChH,GAAG,YAAW,UAEd,eAACsJ,GAAA,QAAI,CAAC5E,MAAO,CAAE8F,KAAM,GAAI,SACvB,eAAC,eAAY,CAACrK,MAAOwP,MAEtBjN,GACC,eAAC,aAAU,CACTyC,QAjBU,WACtBkG,EAAS3H,IAiBGM,KAAM,SAAC2F,GAAK,OAAK,eAAC,WAAI,IAAC/L,KAAK,UAAa+L,OAG7C,eAAC,aAAU,CACTxE,QAAS0G,EACT7H,KAAM,SAAC2F,GAAK,OAAK,eAAC,WAAI,IAAC/L,KAAK,SAAY+L,UAI5C,eAAC,gBAAa,UACZ,eAACL,GAAA,QAAI,UACH,eAAC,YAAS,CACRxL,MAAOqC,EACP0P,aAAcH,EACdI,YAAY,uBAKlB,gBAAC,gBAAa,WACZ,eAAC,SAAM,CAAC5L,QAAQ,WAAW/D,MAAM,SAASgF,QAAS0G,IACnD,eAAC,SAAM,CACLjG,UAAWzF,EACXA,MAAOuC,EAAW,SAAW,SAC7ByC,QApDO,WACjB,IAAMnF,EAAK0D,EAAWA,EAAS1D,GAAK,KAEhC+P,EAAM,IAAI/B,GAAkB,CAC9BhO,KACAG,UAEFqP,EAAOO,EAAKrN,gB,gqBCzChB,IAGMsN,GAAe,SAACrG,GACpB,IACEvF,EAQEuF,EARFvF,MACAwB,EAOE+D,EAPF/D,SAEAqK,GAKEtG,EANFuG,SAMEvG,EALFsG,eACAvL,EAIEiF,EAJFjF,MACA5G,EAGE6L,EAHF7L,MACAqS,EAEExG,EAFFwG,QACGC,EAAK,KACNzG,EAAK,IAEH0G,EAAetH,uBAAY,WAC/BkH,GAAiBA,GAAenS,EAAOqS,KACtC,CAACF,EAAenS,IAEnB,OACE,eAAC2O,GAAA,QAAS,SACJ2D,GAAK,IACTxK,SAAUA,EAEV0K,kBAAkB,WAClBC,mBAAoB,CAAE3K,WAAU4K,QAAS1S,GACzC4G,MAAO,CACL6B,GAAOkK,KACP/L,EACA5G,GAASyI,GAAOiK,UACdpM,GAAS,CACTsC,gBAAiB5I,EAAQsG,OAAQsM,EACjCrG,YAAajG,GAEfwB,GAAYW,GAAOX,SACnB9H,GAAS8H,GAAYW,GAAOoK,oBAE9BxL,QAASkL,EAAa,SAErBvS,GACC,eAAC8S,GAAA,QAAK,CACJC,OAAQ,CACNC,IAzCV,ssJA2CQpM,MAAOkD,WAAWuH,mBAO5Ba,GAAae,YAAc,WAEZf,UAETgB,GAAsB/B,WAASgC,OAAO,CAC1CC,IAAK,UACLC,QAAS,YAML5K,GAASqB,WAAWgF,OAAO,CAC/B6D,KAAM,CACJjJ,OAAQ,GACRD,MAAO,GACPX,aAAc,EACd0D,YAAa,EACbD,YAVqB,WAYvBmG,QAAS,CACP9J,gBAAiBsK,GACjB3G,YAAa2G,IAEfpL,SAAU,CACRyE,YAhBsB,UAiBtB3D,gBAAiB,eAEnBiK,mBAAoB,CAClBjK,gBAnB6B,UAoB7B2D,YApB6B,aC3DlB,SAAS+G,GAASzH,GAC/B,IAAQpI,EAAmBoI,EAAnBpI,MAAO4D,EAAYwE,EAAZxE,QACf,OACE,eAACmE,GAAA,QAAI,CAAC5E,MAAO,CAAE8F,KAAM,GAAI,SACtBjJ,GACCA,EAAMM,KAAI,SAACH,EAAME,GACf,IAEIyP,EAFE5Q,EAAOiB,EAAKjB,KAAO,IAAIY,KAAKK,EAAKjB,MAAQ,GACzCC,EAAOgB,EAAKhB,KAAO,IAAIW,KAAKK,EAAKhB,MAAQ,GAe/C,OAbGD,GAAQC,KACLD,IACF4Q,EAAc3Q,GAEZA,IACF2Q,EAAc5Q,GAEbA,GAAQC,KACT2Q,EAAc5Q,GACF6Q,SAAS5Q,EAAK6Q,YAC1BF,EAAYG,WAAW9Q,EAAK+Q,gBAI9B,eAAChF,GAAA,QAAS,CACRtH,QAAS,WACPA,EAAQzD,IACR,SAGF,gBAAC4H,GAAA,QAAI,CAAC5E,MAAO,CAAC6B,GAAOmL,UAAU,UAC7B,eAAC,GAAY,CACXhN,MAAO,CAAEkC,aAAc,MAAO6D,QAAS,IACvC3M,OAAO,EACPqS,QAASzO,EAAKvB,MACd8P,cAAe,WACb0B,QAAQpU,IAAI,gBAGhB,gBAAC+L,GAAA,QAAI,CAAC5E,MAAO,CAAE6C,MAAO,OAAQqK,YAAa,GAAI9F,OAAQ,GAAI,UACvD,eAAC,OAAI,UAAEpK,EAAKvB,QACZ,eAAC,OAAI,CAACuE,MAAO6B,GAAOnG,YAAY,SAAEsB,EAAKtB,cACvC,eAAC,OAAI,CAACsE,MAAO6B,GAAO7F,KAAK,SAAE2Q,GAAeA,EAAYQ,mBAAmB,kBAd1EnQ,EAAK1B,GAAK4B,QDwD7BoO,GAAa8B,iBAAmB,WAI9B,OAHAH,QAAQhV,KACN,oFAEKoV,QAAQC,SAAQ,ICpCzB,IAAMzL,GAASqB,WAAWgF,OAAO,CAC/B8E,SAAU,CACR3F,QAAS,OACT/E,cAAe,MACf6G,kBAAmB,qBACnBD,kBAAmB,EACnBgE,YAAa,GACb3K,WAAY,SACZgL,UAAW,IAEb7R,YAAa,CACXgE,MAAO,OACPsG,SAAU,IAEZhK,KAAM,CACJ0D,MAAO,QACPsG,SAAU,MCtERwH,GAAoBnS,iBAAO,CAC/BC,GAAIC,mBAASC,WACbC,MAAOF,mBAASC,WAChBgB,QAASiR,oBAAU9R,WACnBM,YAAaF,iBAAOJ,WACpBO,YAAaH,iBAAOJ,aAEhB+R,GAAwB7R,kBAAQC,GAAG0R,I,ocCTP,ICmL9BG,GCnBAC,GCxEAC,GHtFiBC,GAAe,yFAajC,OAbiC,wDAClC,YACE,IAAM9S,EAAMC,KAAKC,eACjB,aAAaD,KAAKT,QAAQQ,MAC3B,kDAJiC,IAIjC,iDAED,UAAoB5B,GAClB,IAAM4B,EAAMC,KAAKC,qBACXD,KAAKP,QAAQM,EAAK5B,MACzB,mDALA,IAKA,0BAED,WACE,MAAO,iBACR,EAbiC,CAASiB,GCWxB0T,IDKU,IAAID,GCLK,WAItC,aAAe,YACb7S,KAAK+S,YAAc,IAAIF,GACvB7S,KAAKgT,gBAAkB,IAAI3E,GAAkB,CAC3ChO,GAAIc,EACJX,MAAO,eAETR,KAAKtB,SAAWuU,wBAyJjB,OAxJA,wDACD,YAA6C,IAAzBpR,EAAc,wDAChCjE,EAAId,MAAM,gBAAiB+E,GAC3B,IACE,IAAIlD,EAAagE,KAAKK,YAAYhD,KAAK+S,YAAYG,iBAInD,OAHKrR,IACHlD,EAAaA,EAAWmD,QAAO,SAACqR,GAAC,OAAMA,EAAE5R,YAEpC5C,EAAWuD,KAAI,SAACiR,GAAC,OAAK,IAAI9E,GAAkB8E,MACnD,MAAOlW,GAEP,OADAW,EAAIX,MAAM,sBAAuBA,GAC1B,OAEV,kDAbA,IAaA,4DAGD,YAAwD,IAElD0B,EAFyBkD,EAAc,wDAC3CjE,EAAId,MAAM,2BAA4B+E,GAEtC,IACElD,QAAmBqB,KAAKkT,cAAcrR,GACtClD,EAAU,CAAIqB,KAAKgT,iBAAe,YAAKrU,IACvC,MAAO1B,GACPW,EAAIZ,KAAK,iCAAkCC,GAC3C0B,EAAa,CAACqB,KAAKgT,iBAErB,OAAOrU,KACR,kDAdA,IAcA,+BAED,SAAkBoF,GAGhB,OADAwO,GAAkBa,aAAarP,GACxB/D,KAAKtB,SAASiF,GAAkBI,MACxC,2BAED,SAAcpF,GACZ,OAAOqB,KAAKtB,SAASL,EAAcM,MACpC,6CAED,SAAgCoF,GAAW,IAAD,OACxCsP,iBAAM,WACJ,EAAK3U,SACHuE,EAAmB,CACjBnD,WAAYiE,EAAS1D,GACrBwB,gBAAgB,EAChBkC,cAGJ,EAAKrF,SAASiF,GAAkBI,SAEnC,kDAED,UAAqBuP,EAAevQ,GAClC,IAAIpE,EAEFA,EADEoE,QACiB/C,KAAKuT,eAAeD,SAEpBtT,KAAKwT,cAAcF,GAGxCb,GAAsBhQ,SAAS9D,SACzBqB,KAAK+S,YAAY1U,cAAcsE,KAAKC,UAAUjE,IACpDqB,KAAK3B,cAAc,CAAC2B,KAAKgT,iBAAe,YAAKrU,IAAa2U,MAC3D,qDAbA,IAaA,iDAED,UAAoBA,GAClB,IAEE,IAAM3U,QAAmBqB,KAAKkT,gBAE9B,OADAvU,EAAWqD,KAAKsR,GACT3U,EACP,MAAO1B,GACP+U,QAAQpU,IAAIX,OAEf,mDAXA,IAWA,oDAED,UAAuB8G,GACrBnG,EAAId,MAAM,mBAAoBiH,GAC9B,IAEEwO,GAAkB9P,SAASsB,GAC3B,IAAIpF,QAAmBqB,KAAKkT,eAAc,GAC1CvU,EAAaA,EAAWmD,QACtB,SAACqR,GAAC,OAAKA,EAAE9S,KAAO0D,EAAS1D,KAAoB,IAAd8S,EAAE5R,WAGnCkR,GAAsBhQ,SAAS9D,SACzBqB,KAAK+S,YAAY1U,cAAcsE,KAAKC,UAAUjE,IACpD,MAAO1B,GACPW,EAAIX,MAAM,mBAAoBA,OAEjC,mDAjBA,IAiBA,wDAED,UAA2B8G,GACzBnG,EAAId,MAAM,uBAAwBiH,GAClC,IAEEwO,GAAkB9P,SAASsB,GAC3B,IAAIpF,QAAmBqB,KAAKkT,gBAC5BvU,EAAaA,EAAWuD,KAAI,SAACiR,GAI3B,OAHIA,EAAE9S,KAAO0D,EAAS1D,KACpB8S,EAAE5R,SAAU,GAEP4R,KAGTV,GAAsBhQ,SAAS9D,SACzBqB,KAAK+S,YAAY1U,cAAcsE,KAAKC,UAAUjE,IACpDqB,KAAK3B,cAAc,CAAC2B,KAAKgT,iBAAe,YAAKrU,KAC7Cf,EAAIb,KAAK,gCACT,MAAOE,GACPW,EAAIX,MAAM,uBAAwBA,OAErC,mDAtBA,IAsBA,uDAED,aAA+C,IAAnBgO,EAAI,EAAJA,KAAMvM,EAAQ,EAARA,SAChCd,EAAId,MAAM,sBAAuBmO,GACjC,IAEEsH,GAAkB9P,SAASwI,GAC3B,IAAItM,QAAmBqB,KAAKkT,eAAc,GAY1C,OAXAvU,EAAaA,EAAWuD,KAAI,SAACiR,GAI3B,OAHIA,EAAE9S,IAAM4K,EAAK5K,KACf8S,EAAE5R,SAAU,GAEP4R,KAGTV,GAAsBhQ,SAAS9D,SACzBqB,KAAK+S,YAAY1U,cAAcsE,KAAKC,UAAUjE,IACpDD,GACEA,EAASL,EAAc,CAAC2B,KAAKgT,iBAAe,YAAKrU,MAC5C,CAAEsM,QACT,MAAOhO,GACPW,EAAIX,MAAM,sBAAuBA,OAEpC,mDAvBA,IAuBA,kDAED,UAAqBqW,GACnB,IAEE,IAAI3U,QAAmBqB,KAAKkT,gBAO5B,OANAvU,EAAaA,EAAWuD,KAAI,SAACiR,GAI3B,OAHIA,EAAE9S,IAAMiT,EAAcjT,KACxB8S,EAAIG,GAECH,KAGT,MAAOlW,GACPW,EAAIX,MAAM,iBAAkBA,OAE/B,mDAhBA,MAgBA,EAnKqC,IAuKlCwW,GAA4B,WAChC,OAAIf,KAGJA,GAAsB,IAAII,KC5KPY,GAAW,WAG9B,aAAe,YACb1T,KAAKE,QAAU,IAAIL,EACnBG,KAAKtB,SAAWuU,wBA4IjB,OA3IA,6DAED,UAAyBnT,GAAqC,IAAzB+B,EAAc,wDACjDjE,EAAId,MAAM,qBAAsBgD,EAAY+B,GAC5C,IACE,IAAIO,EAAWO,KAAKK,YACZhD,KAAKE,QAAQ+C,mBAAmBnD,IAElCwD,EAAW,IAAI3B,EAErB,OADA2B,EAASC,IAAInB,GACNkB,EACP,MAAOrG,GAEP,OADAW,EAAIZ,KAAKC,GACF,OAEV,mDAfA,IAeA,2DAED,UAA8B6C,GAAqC,IAAzB+B,EAAc,wDACtDjE,EAAId,MAAM,0BAA2BgD,EAAY+B,GACjD,IACE7B,KAAKtB,SAASuE,EAAmB,CAAEnD,aAAY+B,oBAC/C,MAAO5E,GAEP,OADAW,EAAIZ,KAAKC,GACF,OAEV,mDAVA,IAUA,iDAED,UAAoB2E,SAEZV,EAAkBuB,SAASb,GACjC5B,KAAKtB,SAAS6D,EAASX,OACxB,mDANA,IAMA,sDAED,UAAyB9B,EAAY3B,GACnCP,EAAId,MAAM,qBAAsBgD,EAAY3B,GAC5C,UACQ+C,EAAkBuB,SAAStE,SAC3B6B,KAAKE,QAAQwC,mBAAmB5C,EAAY6C,KAAKC,UAAUzE,IACjEP,EAAIb,KAAK,8BACT,MAAOE,GACPW,EAAIX,MAAMA,OAEb,qDAXA,IAWA,sDAID,aAAkE,IAAxC6C,EAAU,EAAVA,WAAYmL,EAAI,EAAJA,KAAMlI,EAAQ,EAARA,SAAUrE,EAAQ,EAARA,SACpDd,EAAId,MAAM,qBAAsBgD,EAAYmL,EAAMlI,GAE9CA,EAEEjD,IAAemL,EAAKnL,iBACRE,KAAK2T,qBAAqB,CAAC7T,aAAYmL,OAAMvM,oBAGrDsB,KAAK4T,qBAAqB,CAAC9T,WAAYmL,EAAKnL,WAAYmL,OAAMvM,aAEpEuM,EAAKnL,WAAaA,QACJE,KAAK6T,kBAAkB,CAAC/T,aAAYmL,OAAMvM,oBAG5CsB,KAAK6T,kBAAkB,CAAC/T,aAAYmL,OAAMvM,aAG1DA,GAAYA,EAASmE,EAAW,CAAEC,OAAQmI,EAAMlI,iBACjD,mDAvBA,IAuBA,wDAED,aAA0D,IAA9BjD,EAAU,EAAVA,WAAYmL,EAAI,EAAJA,KAAMvM,EAAQ,EAARA,SAC5Cd,EAAId,MAAM,uBAAwBgD,EAAYmL,GAC9C,UACQ9K,EAAcsC,SAASwI,GAC7B,IAAI3H,QAAiBtD,KAAKiD,mBAAmBnD,GAG7C,OAFAwD,EAASwQ,OAAO7I,GAChBvM,GAAYA,EAAS8D,EAAoB,CAAE1C,aAAY8B,MAAO0B,EAASE,SAChEyH,EACP,MAAOhO,GACPW,EAAIX,MAAMA,OAEb,mDAbA,IAaA,mDAED,aAAyC,IAAlBgO,EAAI,EAAJA,KAAMvM,EAAQ,EAARA,SAC3Bd,EAAId,MAAM,kBAAmBmO,GAC7B,UACQ9K,EAAcsC,SAASwI,GAC7B,IAAMnL,EAAamL,EAAKnL,WACpBwD,QAAiBtD,KAAKiD,mBAAmBnD,GAC7CwD,EAASyQ,KAAK9I,GACd,IAAMrJ,EAAQ0B,EAASE,MAEvB,OADA9E,GAAYA,EAAS8D,EAAoB,CAAE1C,aAAY8B,WAChD,CAACqJ,OAAM+I,KAAMpS,GACpB,MAAO3E,GACPW,EAAIX,MAAMA,OAEb,mDAfA,IAeA,4DAED,UAA+B6C,EAAY3B,GACzCP,EAAId,MAAM,2BAA4BgD,EAAY3B,GAClD,UACQgC,EAAcsC,SAAStE,GAC7B,IAAImF,QAAiBtD,KAAKiD,mBAAmBnD,GAE7C,IAAc,GADFwD,EAAS2Q,WAAW9V,GAE9B,MAAMkF,MAAM,aAAeV,KAAKK,MAAM7E,IAExC6B,KAAKtB,SACH8D,EAAoB,CAAE1C,aAAY8B,MAAO0B,EAASE,KAAI,MAExD5F,EAAIb,KAAK,oCACT,MAAOE,GACPW,EAAIX,MAAMA,OAEb,qDAlBA,IAkBA,wDAED,aAA0D,IAA9B6C,EAAU,EAAVA,WAAYmL,EAAI,EAAJA,KAAMvM,EAAQ,EAARA,SAC5Cd,EAAId,MAAM,uBAAwBgD,EAAYmL,GAC9C,UACQ9K,EAAcsC,SAASwI,GAC7B,IACMrJ,SADe5B,KAAKiD,mBAAmBnD,IACtBoU,OAAOjJ,GAE9B,OADAvM,GAAYA,EAAS8D,EAAoB,CAAE1C,aAAY8B,WAChDA,EACP,MAAO3E,GAEPW,EAAIX,MAAMA,OAEb,mDAdA,IAcA,qDAED,aAAuD,IAA9B6C,EAAU,EAAVA,WAAYmL,EAAI,EAAJA,KAAMvM,EAAQ,EAARA,SACzCd,EAAId,MAAM,oBAAqBgD,EAAYmL,GAC3C,UACQ9K,EAAcsC,SAASwI,GAC7B,IACMrJ,SADiB5B,KAAKiD,mBAAmBnD,IACxBqU,IAAIlJ,GAE3B,OADAvM,GAAYA,EAAS8D,EAAoB,CAAE1C,aAAY8B,WAChDA,EACP,MAAO3E,GAEPW,EAAIX,MAAMA,OAEb,mDAdA,MAcA,EAjJ6B,GAqJ1BmX,GAAoB,WACxB,OAAIzB,KAGJA,GAAc,IAAIe,KCjKCW,GAAiB,WAGpC,aAAe,YACbrU,KAAK2S,YAAc,IAAIe,GACvB1T,KAAKsU,gBAAkB,IAAIxB,GA4E5B,OA3EA,+BAED,SAAW7H,GACT,SAAIjL,KAAKuU,YAAYtJ,KAASjL,KAAKwU,oBAAoBvJ,MAIxD,yBAED,SAAYA,GACV,MAA8B,cAA1BA,EAAKwJ,YAAYxW,OAItB,iCAED,SAAoBgN,GAClB,MAA8B,sBAA1BA,EAAKwJ,YAAYxW,OAItB,kBAED,SAAKgN,GACHrN,EAAId,MAAM,OAAQmO,GACdjL,KAAK0U,WAAWzJ,KAGrB,mDAED,UAAsBA,GAGpB,GAFArN,EAAId,MAAM,kBAAmBmO,GAExBjL,KAAK0U,WAAWzJ,GAArB,CAGA,GAAIjL,KAAKuU,YAAYtJ,GAAO,CAC1B,IAAM0J,QAAe3U,KAAK2S,YAAYiB,qBACpC3I,EAAKnL,WACLmL,GAGF,OADArN,EAAIb,KAAK,2BACF4X,EAET,GAAI3U,KAAKwU,oBAAoBvJ,GAAO,CAClC,IAAM0J,QAAe3U,KAAKsU,gBAAgBM,iBAAiB3J,GAE3D,OADArN,EAAIb,KAAK,2BACF4X,EAET/W,EAAIb,KAAK,8BACV,mDAtBA,IAsBA,+CAED,aAAqC,IAAlBkO,EAAI,EAAJA,KAAMvM,EAAQ,EAARA,SAGvB,GAFAd,EAAId,MAAM,cAAemO,GAEpBjL,KAAK0U,WAAWzJ,GAArB,CAGA,GAAIjL,KAAKuU,YAAYtJ,GAAO,CAC1B,IAAM4J,QAAe7U,KAAK2S,YAAYmC,gBAAgB,CACpD7J,OACAvM,aAGF,OADAd,EAAIb,KAAK,uBACF8X,EAAO5J,KAEhB,GAAIjL,KAAKwU,oBAAoBvJ,GAAO,CAClC,IAAM4J,QAAe7U,KAAKsU,gBAAgBS,oBAAoB,CAC5D9J,OACAvM,aAGF,OADAd,EAAIb,KAAK,uBACF8X,EAAO5J,KAEhBrN,EAAIb,KAAK,0BACV,mDAzBA,MAyBA,EAjFmC,G,glBCmBtC,IA6MMiY,GAAiB,SAACC,GACtB,IACE,IAAQtW,EAAsCsW,EAAtCtW,WAAYiD,EAA0BqT,EAA1BrT,MAAOoC,EAAmBiR,EAAnBjR,eAC3ByO,GAAsBW,aAAazU,GACnCuC,EAAkBkS,aAAaxR,GAC/BoC,GAAkBuO,GAAkBa,aAAapP,GAajDpG,EAAIb,KAAK,0BACT,MAAOE,GAEP,MADAW,EAAIX,MAAM,iBAAkBA,GACtBA,IAeKiY,sBAXE,SAAC5W,GAKhB,MAAO,CACLK,WALiBL,EAAMyF,SAAS5F,MAMhC6F,eALqB1F,EAAM0F,eAAe7F,MAM1CyD,MALYtD,EAAMyD,KAAK5D,MAAM2D,QAAO,SAACqR,GAAC,OAAMA,EAAE5R,cAQnC2T,EAjPI,SAAH,GAMT,IALLC,EAAU,EAAVA,WACAC,EAAK,EAALA,MACAzW,EAAU,EAAVA,WACAiD,EAAK,EAALA,MACAoC,EAAc,EAAdA,eAEA,EAA4C8L,IAAM9G,SAAS,MAAK,YAAzDqM,EAAc,KAAEC,EAAiB,KACxC,EAA8CxF,IAAM9G,UAAS,GAAM,YAA5DuM,EAAe,KAAEC,EAAkB,KAE1C,EACE1F,IAAM9G,UAAS,GAAM,YADhByM,EAA0B,KAAEC,EAA6B,KAGhE,EAAwC5F,IAAM9G,UAAS,GAAM,YAAtD2M,EAAY,KAAEC,EAAe,KACpC,EAAkC9F,IAAM9G,SAAS,MAAK,YAA/C6M,EAAS,KAAEC,EAAY,KACtBC,EAAWX,EAAXW,OAERvN,qBAAU,WACR2M,EAAWa,WAAW,CACpBC,WAAY,SAACjM,GAAK,OAChB,eAACkM,GAAA,QAAgB,SACXlM,GAAK,IACTxE,QAAS,WACP2P,EAAWgB,UAEbC,cAAc,EACd1R,UAAWtD,QAIjBiV,IAEArB,GAAe,CAAEhR,iBAAgBrF,aAAYiD,YAC5C,IACH4G,qBAAU,WACe,YAAb,MAANuN,OAAM,EAANA,EAAQxX,SACV+X,EAAaP,EAAO9K,MAEC,YAAb,MAAN8K,OAAM,EAANA,EAAQxX,UACJ,MAANwX,OAAM,EAANA,EAAQhS,WACN2O,EAAoB/O,kBAAkBoS,EAAOhS,YAEhD,CAACgS,IAEJ,IAAMpD,EAAcyB,KACd1B,EAAsBe,KACtBb,EDqBFA,KAGJA,GAAoB,IAAIyB,ICvBlB3V,EAAWuU,wBAEXsD,EAAuB,SAACxU,GAC5BoT,EAAWqB,SAAS,eAAgB,CAClCzU,KAAMA,EAAOY,KAAKC,UAAUb,GAAQ,KACpCjC,WAAgB,MAAJiC,OAAI,EAAJA,EAAMjC,cAIhBuW,EAAc,sBAAG,YACrBzY,EAAId,MAAM,iBAAkBkH,GAC5B,IAAMrF,QAAmB+T,EAAoB+D,2BAC7C/D,EAAoBrU,cAAcM,GAClC,IAAMoF,EAAWC,GAAkBrF,EAAW,GAC9C+T,EAAoB/O,kBAAkBI,GACtC4O,EAAY+D,wBAAwB3S,EAAS1D,OAC9C,kBAPmB,mCASdiW,EAAY,sBAAG,UAAOvU,GAC1BnE,EAAId,MAAM,eAAgBiF,SACpB4Q,EAAYgE,yBAAyB5U,EAAKjC,WAAYiC,GAC5D6U,EAAY7U,MACb,gBAJiB,sCAOZ8U,EAAiB,WACrBrB,GAAmB,IAEfsB,EAAY,sBAAG,YACnBxB,EAAkB,MAClBuB,OACD,kBAHiB,mCAYZE,EAAkB,sBAAG,UAAOvK,GAChCkG,EAAoBsE,gCAAgCxK,MACrD,gBAFuB,sCAIlByK,EAAmB,sBAAG,YAC1BzB,GAAmB,MACpB,kBAFwB,mCAInB0B,EAAkB,sBAAG,UAAOnT,EAAUhB,GAC1CnF,EAAId,MAAM,qBAAsBiH,EAAUhB,SACpC2P,EAAoByE,eAAepT,EAAUhB,GACnDkU,IACArZ,EAAIb,KAAK,iCACV,gBALuB,wCAOlBqa,EAAoB,sBAAG,UAAOrT,SAC5BsT,EAAoBtT,GAC1BkT,OACD,gBAHyB,sCAKpBI,EAAmB,sBAAG,UAAOtT,GACjCnG,EAAId,MAAM,sBAAuBiH,SAC3B2O,EAAoB4E,qBAAqBvT,GAC/C6S,EAAY7S,MACb,gBAJwB,sCAMnBwT,EAAmB,sBAAG,UAAOxT,GACjCnG,EAAId,MAAM,sBAAuBiH,GACjCuR,EAAkBvR,GAClB8S,OACD,gBAJwB,sCAOnBD,EAAc,SAACY,GACnB5Z,EAAId,MAAM,cAAe0a,GAGU,cAAjCA,EAAY/C,YAAYxW,MACS,sBAAjCuZ,EAAY/C,YAAYxW,OAI1B6X,EAAa0B,GACb5B,GAAgB,GAChBhY,EAAIb,KAAK,yBAGL0a,EAA0B,sBAAG,UAAOxM,GACxCrN,EAAId,MAAM,6BAA8BmO,SAClC2H,EAAkB8E,YAAY,CAAEzM,OAAMvM,gBAC7C,gBAH+B,sCAK1BiZ,EAAqB,sBAAG,UAAO1M,EAAM2M,GACzCha,EAAId,MAAM,wBAAyBmO,SAC7B2H,EAAkBiF,gBAAgB5M,MACzC,gBAH0B,wCAO3B,OACE,gBAACtB,GAAA,QAAI,CAAC5E,MAAO,CAAE8F,KAAM,EAAG9D,gBAAiB,SAAW+Q,UAAU,UAAS,UACpEnZ,GACC,eAAC0O,GAAW,CACVf,KAAM3N,EACNqF,eAAgBA,EAChBsJ,MAAOwJ,EACPvJ,QAASwJ,EACTpR,YAAa,WACX+P,GAA8B,MAInC9T,EAAMuB,OAAS,EACd,eAACsO,GAAQ,CACP7P,MAAOA,EACP4D,QAAS,SAACzD,GAAI,OAAKwU,EAAqBxU,MAG1C,eAAC6I,GAAS,CACRpF,QAAS,WACP+Q,OAILhB,GACC,eAAC3F,GAAgB,CACf7L,SAAUsR,EACVnJ,QAAS+K,EACTnS,QAASyQ,EACT1F,OAAQqH,EACRxL,SAAU0L,IAGd,eAAC3L,GAAmB,CAClBzH,eAAgBA,EAChBc,QAAS2Q,EACTtK,WAAYuK,EACZhK,SAAU2L,EACV1L,SAAU4L,IAEZ,eAAC,GAAe,CACdzS,QAAS6Q,EACTxK,WAAYyK,EACZ3K,KAAM4K,EACN3K,OAAQuM,EACRrM,OAAQuM,IAEV,eAAC,GAAS,CACR1N,YAAa,WACXyL,GAA8B,IAEhCxL,WAtHkB,WACtBiL,EAAWqB,SACT,eACA7T,KAAKC,UAAU,CAAE9C,WAAYkE,EAAe3D,OAoH1C0E,MAAO,CAAE8C,OAAQ,a,SC1NV,SAASkQ,GAAS,GAAuC,IAArChT,EAAK,EAALA,MAAOT,EAAK,EAALA,MAAO0T,EAAS,EAATA,UAAWxS,EAAO,EAAPA,QAC1D,OACE,eAACsH,GAAA,QAAS,CAAC/H,MAAOA,GAAgB6B,GAAOqR,IAAKzS,QAASA,EAAQ,SAC7D,eAACmE,GAAA,QAAI,CAAC5E,MAAO,CAAEuC,WAAY,SAAWK,eAAgB,SAAUkD,KAAM,GAAI,SACxE,eAAC,OAAI,CAAC9F,MAAOiT,GAAwB,GAAG,SAAE1T,GAAS,cAK3D,IAAMsC,GAASqB,WAAWgF,OAAO,CAC/BgL,IAAK,CACHrQ,MAAO,IACPC,OAAQ,MACRZ,aAAc,GACdkF,OAAQ,EACRrB,QAAS,EACT/D,gBAAiB,aChBN,SAASmR,GAAU,GAG9B,IAFF1X,EAAK,EAALA,MACAmM,EAAQ,EAARA,SAEMwL,EAAa3X,EAAM4X,OAAO,GAAGC,cAAgB7X,EAAM4C,MAAM,GAC/D,OACE,gBAACuG,GAAA,QAAI,CAAC5E,MAAO,CAAEoH,OAAQ,IAAK,UAC1B,eAAC,OAAI,CAAC5H,QAAQ,KAAI,SAAE4T,GAAc,UAClC,eAACxK,GAAA,QAAU,CAACC,YAAU,EAAC7I,MAAO,CAAE8I,SAAU,EAAGyK,eAAgB,GAAI,SAC/D,eAAC3O,GAAA,QAAI,CACH5E,MAAO,CACLqH,QAAS,OACTmM,SAAU,OACVlR,cAAe,SACfQ,OAAQ,KACR,SAED8E,SCjBI,SAAS6L,GAAaxO,GACnC,IAAQpI,EAAmBoI,EAAnBpI,MAAO4D,EAAYwE,EAAZxE,QACf,OACE,eAACmE,GAAA,QAAI,CAAC5E,MAAO,CAAE8F,KAAM,GAAI,SACtBjJ,GACCA,EAAMM,KAAI,SAACH,EAAME,GACf,IAEIyP,EAFE5Q,EAAOiB,EAAKjB,KAAO,IAAIY,KAAKK,EAAKjB,MAAQ,GACzCC,EAAOgB,EAAKhB,KAAO,IAAIW,KAAKK,EAAKhB,MAAQ,GAe/C,OAbGD,GAAQC,KACLD,IACF4Q,EAAc3Q,GAEZA,IACF2Q,EAAc5Q,GAEbA,GAAQC,KACT2Q,EAAc5Q,GACF6Q,SAAS5Q,EAAK6Q,YAC1BF,EAAYG,WAAW9Q,EAAK+Q,gBAI9B,eAAChF,GAAA,QAAS,CACRtH,QAAS,WACPA,EAAQzD,IACR,SAGF,eAAC4H,GAAA,QAAI,CAAC5E,MAAO,CAAC6B,GAAOmL,UAAU,SAC7B,gBAACpI,GAAA,QAAI,CAAC5E,MAAO,CAAE6C,MAAO,OAAQuE,OAAQ,GAAI,UACtC,eAAC,OAAI,UAAEpK,EAAKvB,QACZ,eAAC,OAAI,CAACuE,MAAO6B,GAAOnG,YAAY,SAAEsB,EAAKtB,cACvC,eAAC,OAAI,CAACsE,MAAO6B,GAAO7F,KAAK,SAAE2Q,GAAeA,EAAYQ,mBAAmB,iBAN1EnQ,EAAK1B,GAAK4B,QAgB7B,IAAM2E,GAASqB,WAAWgF,OAAO,CAC/B8E,SAAU,CACR3F,QAAS,OACT/E,cAAe,MACf6G,kBAAmB,qBACnBD,kBAAmB,EACnBgE,YAAa,GACb3K,WAAY,SACZgL,UAAW,IAEb7R,YAAa,CACXgE,MAAO,OACPsG,SAAU,IAEZhK,KAAM,CACJ0D,MAAO,QACPsG,SAAU,M,UC1DO0N,GAAW,WAE9B,aAAe,YACbzY,KAAKtB,SAAWuU,wBAQjB,OAPA,wDAED,YACE,IAAMyF,EAAMvX,EAAqB,uCAC3BwX,EAAUC,WAAM3L,OAAO,CAAC4L,QAASH,EAAK5O,QAAS,MAErD,aADkB6O,EAAQnV,IAAIkV,IACnBI,QACZ,kDAPA,MAOA,EAX6B,GCH1BC,GAAY9Q,WAAWgF,OAAO,CAClC+L,KAAM,CACJ9K,kBAAmB,qBACnBD,kBAAmB,K,skBCevB,ICRIgL,GDyGErS,GAASqB,WAAWgF,OAAO,CAC/BnG,UAAW,CACTC,gBAAiB,UACjB8D,KAAM,GAERoN,IAAK,CACHpQ,OAAQ,IACRZ,aAAc,GACd2H,iBAAkB,GAClBsK,UAAW,GACXpO,QAAS,EACTrG,MAAO,UACPkG,YAAa,EACbD,YAAa,UACb3D,gBAAiB,aAGNoS,GAlHI,SAAH,GAAwB,IAAlBhE,EAAU,EAAVA,WACdiE,EAAc,IAAIX,GAClB9F,EAAc,IAAIe,GACxB,EAAoC5D,IAAM9G,SAAS,MAAK,YAAjDrK,EAAU,KAAEN,EAAa,KAC1BuD,EAAQyX,uBAAY,SAAC/a,GAAK,OAC9BA,EAAMyD,KAAK5D,MAAM2D,QAAO,SAACqR,GAAC,OAAMA,EAAE5R,cAE9B+X,EAAQC,0BACd/Q,qBAAU,YACe,sBAAG,YACxB,IAAM7J,QAAmBya,EAAYlG,gBACrC7U,EAAcM,MACf,kBAHsB,mCAIvB6a,KACC,IAEHhR,qBAAU,WACR8Q,GAAS3G,EAAY+D,wBAAwBvV,KAC5C,CAACmY,IAEJ,IAAMG,EAAkB,WACtBtE,EAAWqB,SAAS,YAQtB,OACE,eAAC7M,GAAA,QAAI,CAAC5E,MAAO6B,GAAOE,UAAU,SAC5B,gBAAC6G,GAAA,QAAU,WACT,eAACoK,GAAQ,CACPhT,MAAO6B,GAAOqR,IACd3T,MACE,qMAEFkB,QAAS,aACTwS,UAAW,CAAEvT,MAAOrD,KAEtB,eAACuI,GAAA,QAAI,CAAC5E,MAAO,CAAEoH,OAAQ,IAAK,SACzBvK,EACC,gBAAC+H,GAAA,QAAI,WACH,eAAC,OAAI,CAACpF,QAAQ,KAAI,4BAClB,eAACiU,GAAY,CACX5W,MAAOA,EAAM8X,UACblU,QAASiU,IAEX,eAAC,SAAM,CACLjZ,MAAM,4BACN+D,QAAQ,OACRiB,QAASiU,EACThV,MAAOrD,OAIX,eAAC,SAAM,CACLmD,QAAQ,OACRiB,QAASiU,EACThV,MAAOrD,EAA6B,4CAOzCzC,GACCgb,OAAOC,KAAKjb,GAAYuD,KAAI,SAAC2X,EAAG5X,GAAK,OACnC,gBAAC0H,GAAA,QAAI,WACH,eAACA,GAAA,QAAI,CACH5E,MAAK,SACAgU,GAAUC,MAAI,IACjB9K,kBAAmB,UACnBU,iBAAkB,OAGtB,eAACsJ,GAAS,CAAS/C,WAAYA,EAAY3U,MAAOqZ,EAAE,SACjDlb,EAAWkb,IACVlb,EAAWkb,GAAG3X,KAAI,SAACiR,EAAGlR,GAEpB,OADAkR,EAAE2G,IAAM3G,EAAE2G,IAAI1B,OAAO,GAAGC,cAAgBlF,EAAE2G,IAAI1W,MAAM,GAElD,eAAC2U,GAAQ,CAEP5C,WAAYA,EACZ7Q,MAAO6O,EAAE2G,IACTtU,QAAS,kBA7DTsU,EA6D4B3G,EA5DhDvV,EAAId,MAAMgd,QACV3E,EAAWqB,SAAS,cAAe,CAAEkC,IAAKoB,EAAIpB,MAF3B,IAACoB,IA0DK7X,OANC4X,KARP5X,YEtCR8X,IARA9R,WAAWgF,OAAO,CAC/BnG,UAAW,CACTc,MAAO,IACPC,OAAQ,MACRsE,OAAQ,GACRpF,gBAAiB,UAxCA,SAAH,GAAwB,IAAlBoO,EAAU,EAAVA,WACtB,EAA4BnM,mBAAS,IAAG,YAAjCgR,EAAM,KAAEC,EAAS,KAExBzR,qBAAU,WACR0R,MACC,IAEH,IAAMA,EAAI,sBAAG,YACX,IAAMxB,EACJvX,EAAqB,4DACjBwX,EAAUC,WAAM3L,OAAO,CAAE4L,QAASH,EAAK5O,QAAS,MAChDqQ,QAAYxB,EAAQnV,IAAIkV,GAC9BuB,EAAUE,EAAIrB,KAAKsB,SAASlY,KAAI,SAACiR,GAAC,MAAM,CAAE3S,MAAO2S,UAClD,kBANS,mCAYV,OACE,eAACxF,GAAA,QAAU,UACT,eAAChE,GAAA,QAAI,CAAC5E,MAAO,CAAEgC,gBAAiB,QAAS8D,KAAM,GAAI,SAChDmP,GACCA,EAAO9X,KAAI,SAACmY,EAAGpY,GAAK,OAClB,eAAC,WAAQ,CAEPzB,MAAO6Z,EAAE7Z,MACTgF,QAAS,kBAZG8U,EAYkBD,OAXxClF,EAAWqB,SAAS,cAAe,CAAE8D,UADhB,IAACA,IAUPrY,Y,oBD7BEsY,GAAY,oCAM9B,OAN8B,kDAC/B,UAAc7B,GACZ9a,EAAId,MAAM,UAAW4b,GACrB,IAAMC,EAAUC,WAAM3L,OAAO,CAAC4L,QAASH,EAAK5O,QAAS,MAErD,aADkB6O,EAAQnV,IAAIkV,IACnBI,QACZ,mDAN8B,MAM9B,EAN8B,G,skBEOjC,IAgEMlS,GAASqB,WAAWgF,OAAO,CAC/B+K,UAAW,CACTjN,SAAU,GACVD,QAAS,GACTrG,MAAO,SAETwG,KAAM,CACJrD,MAAO,OACPD,eAAgB,SAChBkD,KAAM,GAER2P,MAAO,CACL5S,MAAO,OACPN,WAAY,WACZuD,KAAM,GAER4P,UAAW,CACT5P,KAAM,GAER6P,KAAM,CACJ/S,eAAgB,SAChBL,WAAY,YAGDqT,GAxFW,SAAH,GAA+B,IAAzBxF,EAAU,EAAVA,WAAYC,EAAK,EAALA,MAC/BsD,GAAa,MAALtD,OAAK,EAALA,EAAOW,QAAf2C,IACR,EAA4B1P,mBAAS,MAAK,YAAnCgR,EAAM,KAAEC,EAAS,KAElBW,EFAF3B,KAGJA,GAAU,IAAIsB,IEFd/R,qBAAU,WACR0R,EAAKxB,KACJ,CAACA,IAEJlQ,qBAAU,WACR2M,EAAWa,WAAW,CACpBC,WAAY,SAACjM,GAAK,OAChB,eAACkM,GAAA,QAAgB,SACXlM,GAAK,IACTxE,QAAS,WACP2P,EAAWgB,UAEbC,cAAc,EACd1R,UAAWtD,UAIhB,IAEH,IAAM8Y,EAAI,sBAAG,UAAOxB,GAClB,IAAMI,QAAa8B,EAAaC,QAC9B1Z,EAAqB,oBAAsBuX,GAE7CuB,EAAUnB,EAAKsB,UACfxc,EAAId,MAAM,oBAAqBgc,MAChC,gBANS,sCAQV,OACE,eAACnP,GAAA,QAAI,CAAC5E,MAAO,CAAEqH,QAAS,OAAQvE,OAAQ,QAAS,SAC/C,eAACiT,GAAA,QAAe,CACd5J,OAAQ,CAAEC,IAAKhQ,EAAqB,kCACpC4Z,WAAW,QACXhW,MAAO,CAAE8F,KAAM,GAAI,SAElBmP,GACC,eAAC,WAAM,CAACpM,YAAY,EAAM,SACvBoM,EAAO9X,KAAI,SAACmY,EAAGpY,GACd,OACE,gBAAC0H,GAAA,QAAI,CAAa5E,MAAO,CAAE8F,KAAM,GAAI,UACnC,eAACkN,GAAQ,CACPhT,MAAO6B,GAAOqE,KACd3G,MAAO+V,EAAEpP,KACT+M,UAAWpR,GAAOoR,YAEpB,eAACD,GAAQ,CACPzT,MAAO+V,EAAEG,MACTzV,MAAO6B,GAAO4T,MACdxC,UAAWpR,GAAOoR,cATX/V,aCrDN+Y,GAAa,WAEhC,WAAYla,GAAO,YACbA,EAIFd,KAAKc,KAAOA,GAHZd,KAAKc,KAAO,IAAIY,KAChB1B,KAAKc,KAAK6Q,SAAS,EAAG,EAAG,EAAG,IAwB/B,OApBA,4BAED,WACE,OAAO3R,KAAKc,OACb,6BAED,WACE,OAAOd,KAAKc,OACb,6BAED,WACE,OAAOd,KAAKc,OACb,6BAED,WACE,OAAQ,IAAMd,KAAKc,KAAK8Q,YAAYxO,OAAO,GAAK,KAAO,IAAMpD,KAAKc,KAAKgR,cAAc1O,OAAO,KAC7F,2BAED,WACE,OAAOpD,KAAKc,KAAKoR,mBAAmB,aACrC,EA7B+B,GCCb+I,GAAc,WAejC,WAAYC,GAAe,iBAd3BC,KAAO,CACL,CAAE3a,MAAO,YAAarC,MAAO,YAAa0S,SAAS,GACnD,CAAErQ,MAAO,QAASrC,MAAO,QAAS0S,SAAS,GAC3C,CAAErQ,MAAO,UAAWrC,MAAO,UAAW0S,SAAS,GAC/C,CAAErQ,MAAO,MAAOrC,MAAO,MAAO0S,SAAS,GACvC,CAAErQ,MAAO,MAAOrC,MAAO,MAAO0S,SAAS,GACvC,CAAErQ,MAAO,MAAOrC,MAAO,MAAO0S,SAAS,GACvC,CAAErQ,MAAO,MAAOrC,MAAO,MAAO0S,SAAS,GACvC,CAAErQ,MAAO,MAAOrC,MAAO,MAAO0S,SAAS,GACvC,CAAErQ,MAAO,MAAOrC,MAAO,MAAO0S,SAAS,GACvC,CAAErQ,MAAO,MAAOrC,MAAO,MAAO0S,SAAS,IACvC,KACFuK,SAAW,GAGLF,IACFA,EAAe,CAAC,cAElBlb,KAAKmb,KAAOnb,KAAKmb,KAAKjZ,KAAI,SAAAmZ,GAIxB,OAHGH,EAAaI,SAASD,EAAIld,SAC3Bkd,EAAIxK,SAAU,GAETwK,KAETrb,KAAKub,cAwEN,OAvEA,gCAED,WACEvb,KAAKob,SAAWpb,KAAKmb,KAAKrZ,QAAO,SAACuZ,GAAG,OAAKA,EAAIxK,aAC/C,8BAED,WACE,OAAO7Q,KAAKob,SAASI,QAAO,SAACC,EAAKC,GAEhC,OADAD,EAAIzZ,KAAK0Z,EAAKvd,OACPsd,IACN,MACJ,sBAED,WACE,IAAML,EAAWpb,KAAKob,SACtB,OAAIpb,KAAK2b,aACA,YAEe,IAApBP,EAASjY,OACJ,UAAYiY,EAAS,GAAG5a,MAE3BR,KAAK4b,UACA,eAEA,UAAYR,EAASjY,OAAS,UAG1C,yBAED,WACE,OAAGnD,KAAK2b,eAIT,yBAED,WACE,QAAG3b,KAAK6b,cAIT,2BAED,WACE,OAAO7b,KAAKob,SAASjY,OAAS,IAC/B,wBAED,WACE,OAA4B,IAAzBnD,KAAKob,SAASjY,QAGoB,IAAzBnD,KAAKob,SAASjY,QAA2C,cAA3BnD,KAAKob,SAAS,GAAGjd,QAE5D,qBAED,WACE,OAAO6B,KAAKob,SAASlY,MAAK,SAAAmY,GAAG,MAAkB,UAAdA,EAAIld,WACtC,uBAED,WACE,OAAiC,IAAzB6B,KAAKob,SAASjY,QAA2C,YAA3BnD,KAAKob,SAAS,GAAGjd,QACxD,4BAED,WACE,OAA4B,IAAzB6B,KAAKob,SAASjY,OACqB,YAA3BnD,KAAKob,SAAS,GAAGjd,OAAkD,cAA3B6B,KAAKob,SAAS,GAAGjd,MAEjE6B,KAAKob,SAASjY,OAAS,GAAKnD,KAAKob,SAASjY,OAAS,MAIvD,EAjGgC,G,gbCAc,IAE3C2Y,GAAkB,WAStB,WAAYC,EAAWC,EAAWC,GAAY,YAC5Cjc,KAAK+b,UAAYA,EACjB/b,KAAKgc,UAAYA,EACjBhc,KAAKic,UAAYA,EA6BlB,OA5BA,4BAED,WAEMjc,KAAK+b,YAGL/b,KAAK+b,UAAUH,WAAa5b,KAAKic,YACnCjc,KAAKkc,YAAclc,KAAKic,UAAUE,kBAAoB,SACtDnc,KAAKe,KAAOf,KAAKic,UAAUG,WAEzBpc,KAAK+b,UAAUF,cACjB7b,KAAKkc,YAAc,WAEjBlc,KAAK+b,UAAUM,kBAAoBrc,KAAKic,YAC1Cjc,KAAKkc,YACHlc,KAAKic,UAAUE,kBAAiB,IAC5Bnc,KAAK+b,UAAUX,SAASjY,OAAM,QACpCnD,KAAKe,KAAOf,KAAKic,UAAUG,WAEzBpc,KAAK+b,UAAUJ,cAAgB3b,KAAKic,WAAajc,KAAKgc,YACxDhc,KAAKkc,YACHlc,KAAKic,UAAUE,kBAAiB,IAC5Bnc,KAAKgc,UAAUM,gBACrBtc,KAAKc,KAAOd,KAAKgc,UAAUI,UAC3Bpc,KAAKe,KAAOf,KAAKic,UAAUG,WAE7Bpc,KAAKW,mBAAqBX,KAAK+b,UAAUQ,wBAC1C,EAzCqB,GA4ClBC,GAAyB,iCAC7B,WAAYC,EAAQ3b,EAAMC,GAAO,+BAE7B0b,EAAQ,IAAIxB,GAAewB,GAAU,KACrC3b,EAAM,IAAIka,GAAcla,GAAO,KAC/BC,EAAM,IAAIia,GAAcja,GAAO,MAElC,cAP4B,CAAS+a,I,iSC5CxC,IAqBeY,GArBF,SAAC1S,GACZ,IAAQxJ,EAA6DwJ,EAA7DxJ,MAAOmc,EAAsD3S,EAAtD2S,cAAeC,EAAuC5S,EAAvC4S,YAAaC,EAA0B7S,EAA1B6S,WAAehQ,EAAM,KAAK7C,EAAK,IAE1E,OACE,eAAC,S,oWAAM,EACLzF,QAAQ,WACR/D,MAAOA,EACPqc,WAAYA,EACZrX,QAASmX,EACTG,SAAU,SAAC9S,GAAK,OACd,eAAC,aAAU,CAETxE,QAASoX,EACTvY,KAAM,SAAC2F,GAAK,OAAK,eAAC,WAAI,CAAC/L,KAAK,QAAQuG,KAAM,OAFtC,kBAKJqI,K,UCdK,SAASkQ,GAAmB/S,GACzC,IAAQgT,EAA+DhT,EAA/DgT,aAAcC,EAAiDjT,EAAjDiT,aAAcnc,EAAmCkJ,EAAnClJ,KAAMC,EAA6BiJ,EAA7BjJ,KAAMmc,EAAuBlT,EAAvBkT,SAAUC,EAAanT,EAAbmT,SAU1D,OACE,gBAACxT,GAAA,QAAI,YACDuT,GACA,gBAACvT,GAAA,QAAI,CAEH5E,MAAO,CACLqH,QAAS,OACT/E,cAAe,MACfiR,eAAgB,IAChB,UAEF,eAAC3O,GAAA,QAAI,CAAC5E,MAAO,CAAE6C,MAAO,MAAOuE,OAAQ,GAAI,SACvC,eAAC,OAAI,sBAEP,eAACxC,GAAA,QAAI,CAAC5E,MAAO,CAAE6C,MAAO,OAAQ,SAC5B,eAAC,WAAc,CACbwV,OAAO,iBACPjf,MAAO2C,EACPuc,KAAM,OACNC,UAAU,EACV/M,SA5BgB,SAAClH,EAAOkU,GAClCP,EAAa3T,EAAOkU,QA8Bd,eAAC5T,GAAA,QAAI,CAAC5E,MAAO,CAAE6C,MAAO,WAnBlB,gBAsBNuV,GACA,gBAACxT,GAAA,QAAI,CAEH5E,MAAO,CAAEqH,QAAS,OAAQ/E,cAAe,OAAQ,UAEjD,eAACsC,GAAA,QAAI,CAAC5E,MAAO,CAAE6C,MAAO,MAAOuE,OAAQ,GAAI,SACvC,eAAC,OAAI,sBAEP,eAACxC,GAAA,QAAI,CAAC5E,MAAO,CAAE6C,MAAO,OAAQ,SAC5B,eAAC,WAAc,CACbwV,OAAO,iBACPjf,MAAO4C,EACPsc,KAAM,OACNC,UAAU,EACV/M,SA5CgB,SAAClH,EAAOmU,GAClCP,EAAa5T,EAAOmU,IA4CVzY,MAAO,CAAE6C,MAAO,YAGpB,eAAC+B,GAAA,QAAI,CAAC5E,MAAO,CAAE6C,MAAO,WAhBlB,kB,+NCrCC,SAAS6V,GAAoBzT,GAC1C,IAAQyS,EAAqBzS,EAArByS,OAAQlM,EAAavG,EAAbuG,SAChB,EAAkCT,WAAe,IAAImL,GAAewB,IAAQ,YAArEV,EAAS,KAAE2B,EAAY,KAC9B,EAAsC5N,WAAeiM,EAAUlS,YAAW,YAAnE8T,EAAW,KAAEC,EAAc,KAClC,EAAwB9N,WAAeiM,EAAU8B,iBAAgB,YAA1D/R,EAAI,KAAEgS,EAAO,KAUdC,EAAU,SAAClN,EAAS1S,GACxB,GAAI,CAAC,YAAa,WAAWmd,SAASnd,GACpC4d,EAAUZ,KAAKjZ,KAAI,SAACmZ,GAMlB,OALIA,EAAIld,QAAUA,EAChBkd,EAAIxK,QAAUA,EAEdwK,EAAIxK,SAAU,EAETwK,SAEJ,CACLU,EAAUZ,KAAK,GAAGtK,SAAU,EAC5BkL,EAAUZ,KAAK,GAAGtK,SAAU,EAC5B,IAAImN,EAAS,CAAC7f,GACA,UAAVA,IACF6f,EAAS,CAAC,QAAS,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAE/DjC,EAAUZ,KAAKjZ,KAAI,SAACmZ,GAIlB,OAHI2C,EAAO1C,SAASD,EAAIld,SACtBkd,EAAIxK,QAAUA,GAETwK,KAGTU,EAAUZ,KAAK,GAAGtK,QAAUkL,EAAUZ,KACnC/X,MAAM,GACN6a,OAAM,SAAC5C,GAAG,OAAKA,EAAIxK,WAExBkL,EAAUR,cACV,IAAM2C,EAAYnC,EAAUQ,mBACtB4B,EAAe,IAAIlD,GAAeiD,GACxCR,EAAaS,GAlCbP,EAAe7B,EAAUlS,YAoCzB0G,EAAS4N,IAGX,OACE,gBAACxU,GAAA,QAAI,CAAC5E,MAAO,CAAEqH,QAAS,OAAQ/E,cAAe,UAAW,UACxD,eAAC,SAAM,CACL7G,MAAOmd,EACPnY,QAhDoB,WACxBsY,GAAShS,IAgDL3B,QAAS,SAACH,GAAK,OAAK,eAAC,W,oWAAI,EAAC/L,KAAK,UAAa+L,KAC5CjF,MAAO,CAAEoH,OAAQ,MAElBL,GACC,eAACnC,GAAA,QAAI,CACH5E,MAAO,CAAEqH,QAAS,OAAQ/E,cAAe,MAAOkR,SAAU,QAAS,SAElEwD,GACCA,EAAUZ,KAAKjZ,KAAI,SAACmZ,GAClB,OACE,eAAC1R,GAAA,QAAI,CAEH5E,MAAO,CAAE6C,MAAO,MAAON,WAAY,cAAe,SAElD,gBAAC,YAAS,CACR9B,QAAS,WACPuY,GAAS1C,EAAIxK,QAASwK,EAAIld,QAE5B4G,MAAO,CACLqH,QAAS,OACT/E,cAAe,MACf8E,OAAQ,IACR,UAEF,eAAC,GAAY,CACXpH,MAAO6B,GAAOwX,SACdjgB,MAAOkd,EAAIxK,QACXL,QAAS6K,EAAIld,MACbmS,cAAeyN,IAEjB,eAAC,OAAI,UAAE1C,EAAI7a,YAnBR6a,EAAIld,eA8B3B,ICvFIggB,GACAE,GACAC,GDqFE1X,GAASqB,WAAWgF,OAAO,CAC/BmR,SAAU,CACRxP,iBAAkB,M,skBCnFP,SAAS2P,GAAevU,GAMrC,IAAMwU,EAAgB,IAAIxD,GAClBlW,EAAiDkF,EAAjDlF,QAAS2X,EAAwCzS,EAAxCyS,OAAQ3b,EAAgCkJ,EAAhClJ,KAAMC,EAA0BiJ,EAA1BjJ,KAAMmL,EAAoBlC,EAApBkC,QAASd,EAAWpB,EAAXoB,OAC9C,EAAgC0E,YAAe,GAAM,YAA9CoN,EAAQ,KAAEuB,EAAW,KAC5B,EAAgC3O,YAAe,GAAM,YAA9CqN,EAAQ,KAAEuB,EAAW,KAC5B5O,aAAgB,YACE,IAAZhL,IACFqZ,GAAe,IAAIlD,GAAewB,GAClC4B,GAAUvd,EACVwd,GAAUvd,EACV4d,EAAaR,OAEd,CAACnU,EAAMlF,UAKV,IAAM6Z,EAAe,SAAC5C,GACpB0C,EAAY1C,EAAU6C,eACtBF,EAAY3C,EAAU8C,gBA6BxB,OACE,eAAC,GAAM,CAAC/Z,QAASA,EAAQ,SACvB,eAAC,GAAY,UACX,gBAAC6E,GAAA,QAAI,WACH,gBAACA,GAAA,QAAI,CAAC5E,MAAO,CAAEqH,QAAS,OAAQ/E,cAAe,OAAQ,UACrD,eAACsC,GAAA,QAAI,CAAC5E,MAAO,CAAE8F,KAAM,GAAI,SACvB,eAAC,eAAY,CAACrK,MAAM,WAEtB,eAAC,aAAU,IACTgF,QAAS0G,EACT7H,KAAM,SAAC2F,GAAK,OAAK,eAAC,WAAI,IAAC/L,KAAK,SAAY+L,MACpCA,OAGR,gBAAC,gBAAa,WACZ,eAACyT,GAAmB,CAClBhB,OAAQA,EACRlM,SA1CsB,SAACwL,GAGjC4C,EADAR,GAAepC,MA0CP,eAACgB,GAAkB,CACjBjc,KAAMA,GAAQ0d,EAAcpC,UAC5Brb,KAAMA,GAAQyd,EAAcpC,UAC5Bc,SAAUA,EACVC,SAAUA,EACVH,aAzCgB,SAAC3T,EAAOkU,GAClCc,GAAUd,GAyCAN,aAtCgB,SAAC5T,EAAOmU,GAClCc,GAAUd,QAyCJ,eAAC,gBAAa,UACZ,eAAC,SAAM,CAAChd,MAAM,OAAOgF,QAtCT,WACpB4F,EACE+S,GACA,IAAInD,GAAcqD,IAClB,IAAIrD,GAAcsD,iB,skBC4MxB,IAAM1X,GAASqB,WAAWgF,OAAO,CAC/BnG,UAAW,CACTC,gBAAiB,QACjB+D,QAAS,GACTD,KAAM,GAERiU,SAAU,CACRjX,OAAQ,GACR6C,YAAa,OACbuD,kBAAmB,EACnB8Q,kBAAmB,EACnBC,YAAa,GACbnU,KAAM,GAERoU,iBAAkB,CAChBlU,SAAU,IAEZmU,kBAAmB,CACjBnU,SAAU,IAEZoU,UAAW,CACTvX,MAAO,GACPC,OAAQ,IAEVuX,iBAAkB,CAChBvX,OAAQ,GACRkD,SAAU,MAcCmK,sBAXE,SAAC5W,GAChB,IAAMK,EAAaL,EAAMyF,SAAS5F,MAC5BkhB,EAA8B,MAAV1gB,OAAU,EAAVA,EAAYuD,KAAI,SAACiR,GAAC,MAAM,CAChDhV,MAAOgV,EAAE9S,GACTiE,MAAO6O,EAAE3S,UAEX,MAAO,CACL7B,aACA0gB,uBAGWnK,EAlSf,SAA0B,GAA2C,IAAzCC,EAAU,EAAVA,WAAYC,EAAK,EAALA,MAAOiK,EAAiB,EAAjBA,kBACrCtJ,EAAWX,EAAXW,OAIFhU,EAAa,MAANgU,KAAQhU,KAAOY,KAAKK,MAAY,MAAN+S,OAAM,EAANA,EAAQhU,MAAQ,KACjDjC,GAAmB,MAANiW,OAAM,EAANA,EAAQjW,aAAcqB,EACzC,EAA0B2O,YAAmB,MAAJ/N,OAAI,EAAJA,EAAMvB,QAAS,IAAG,YAApDA,EAAK,KAAEuP,EAAQ,KACtB,EAAsCD,YAAmB,MAAJ/N,OAAI,EAAJA,EAAMtB,cAAe,IAAG,YAAtEA,EAAW,KAAE6e,EAAc,KAClC,EAA8CxP,WAAe,MAAK,YAA3DyP,EAAe,KAAEC,EAAkB,KAC1C,EAA4C1P,WAAe,MAAK,YAAzDuF,EAAc,KAAEC,EAAiB,KACxC,EAA8BxF,YAAe,GAAM,YAA5C2P,EAAO,KAAEC,EAAU,KAE1B,EACE5P,YAAe,GAAM,YADhB6P,EAAqB,KAAEC,EAAwB,KAMtD,EAAoD9P,WAC9C,MAAJ/N,KAAMjB,KAAO,IAAIY,KAAKK,EAAKjB,MAAQ,MACpC,YAFM+e,EAAkB,KAAEC,EAAqB,KAGhD,EAAoDhQ,WAC9C,MAAJ/N,KAAMhB,KAAO,IAAIW,KAAKK,EAAKhB,MAAQ,MACpC,YAFMgf,EAAkB,KAAEC,EAAqB,KAGhD,EAAwDlQ,YAClD,MAAJ/N,OAAI,EAAJA,EAAMpB,qBAAsB,MAC7B,YAFMsf,EAAoB,KAAEC,EAAuB,KAG9CC,EAAWrQ,WACjBqQ,EAAS5X,QAAU,CACjB/H,QACAC,cACA4U,iBACAwK,qBACAE,qBACAE,wBAEF,IAAMvhB,EAAWuU,wBAEXlQ,KAAahB,EACb4Q,GAAcyB,KACd1B,GAAsBe,KAE5BjL,qBAAU,WACR2M,EAAWa,WAAW,CACpBC,WAAY,SAACjM,GAAK,OAChB,eAACkM,GAAA,QAAgB,SACXlM,GAAK,IACTxE,QAAS4a,GACT9b,MAAO,UACP8R,cAAc,EACd1R,UAAWtD,QAIjBif,OACC,IAEH,IAAMD,GAAW,sBAAG,kBACZE,KACN,IAAMvc,EAAWoc,EAAS5X,QAAQ8M,eAClCF,EAAWqB,SAAS,UAAW,CAC7BjY,OAAQ,SACRwF,SAAUA,EACN,CAAE1D,GAAY,MAAR0D,OAAQ,EAARA,EAAU5F,MAAOqC,MAAe,MAARuD,OAAQ,EAARA,EAAUO,OACxC,UAEP,kBATgB,mCAWX+b,GAAc,sBAAG,YACrB,IAAM1hB,QAAmB+T,GAAoB+D,2BAC7C/D,GAAoBrU,cAAcM,MACnC,kBAHmB,mCAKd4hB,GAAwB,WAC5BX,GAAyB,IAmB3B9P,aAAgB,WACd,GAAI/N,EAAM,CAER,IAAMye,EAAW,IAAIhE,GACnByD,EACAJ,EACAE,GAEFS,EAASC,UACTjB,EAAmBgB,EAAStE,gBAI7B,CAACna,IAEJ,IAAMue,GAAU,sBAAG,YACjB,IAAMjgB,EAAK0B,EAAOA,EAAK1B,GAAK,KAC5B,EAOY,MAAR8f,OAAQ,EAARA,EAAU5X,QANZ/H,EAAK,EAALA,MACAC,EAAW,EAAXA,YACA4U,EAAc,EAAdA,eACAwK,EAAkB,EAAlBA,mBACAE,EAAkB,EAAlBA,mBACAE,EAAoB,EAApBA,qBAEES,EAAU,IAAIrf,EAAU,CAC1BhB,KACAG,MAAOA,EACPV,aACAW,YAAaA,EACbK,KAAM+e,EACN9e,KAAMgf,EACNpf,mBAAoBsf,IAEtB9f,EAAcsC,SAASie,SACjB/N,GAAYgO,mBAAmB,CACnC7gB,YAA0B,MAAduV,OAAc,EAAdA,EAAgBlX,QAAS2B,EACrCmL,KAAMyV,EACN3d,YACArE,gBAEH,kBA1Be,mCAkCVkiB,GAAY,WAChBd,EAAsB,MACtBE,EAAsB,MACtBE,EAAwB,MACxBV,EAAmB,OAGf9T,GAAQ,sBAAG,YACfyJ,EAAWqB,SAAS,UAAW,CAAEjY,OAAQ,SAAU0M,KAAMlJ,OAC1D,kBAFa,mCAId,OACE,gBAAC4H,GAAA,QAAI,CAAC5E,MAAO6B,GAAOE,UAAWzG,GAAG,YAAW,UAC3C,eAAC,GAAY,UACX,gBAACsJ,GAAA,QAAI,CAAC5E,MAAO,CAAE8F,KAAM,GAAI,UACvB,eAAC,YAAS,CACRtG,QAAQ,WACRpG,MAAOqC,EACP0P,aAAcH,EACdI,YAAY,iBAEd,eAAC,YAAS,CACR5L,QAAQ,WACRpG,MAAOsC,EACPyP,aAAcoP,EACdnP,YAAY,uBAEd,eAACxG,GAAA,QAAI,CAAC5E,MAAO,CAAEqH,QAAS,OAAQ/E,cAAe,OAAQ,SACrD,eAAC,YAAQ,CACPtC,MAAO,CAAC6B,GAAOkY,SAAUW,GAAW,CAAE/U,YAAa,SACnDuU,iBAAkBrY,GAAOqY,iBACzBC,kBAAmBtY,GAAOsY,kBAC1BE,iBAAkBxY,GAAOwY,iBACzBD,UAAWvY,GAAOuY,UAClBrG,KAAMuG,EACNwB,QAAM,EACNC,UAAW,IACXC,WAAW,QACXC,WAAW,QACX7Q,YAAcsP,EAAyB,MAAf,aACxBwB,kBAAkB,YAClB9iB,OAAqB,MAAdkX,OAAc,EAAdA,EAAgBlX,QAAS2B,EAChC+F,QAAS,kBAAM6Z,GAAW,IAC1B9Z,OAAQ,kBAAM8Z,GAAW,IACzBnP,SAAU,SAACtF,GACTqK,EAAkBrK,GAClByU,GAAW,QAkBhBH,GACC,eAAC,GAAI,CACH/e,MAAO+e,EACP5C,cApIiB,WAC3BiD,GAAyB,IAoIfhD,YA1EQ,WAClBhf,EAAId,MAAM,eAEV8jB,MAwEU/D,WAAY,CAAEhS,KAAM,GACpB9F,MAAO,CAAEmU,UAAW,GAAIjS,aAAc,MAGzC0Y,GACC,eAACpB,GAAc,CACb9B,OAAQwD,EACRnb,QAAS6a,EACT7e,KAAM+e,EACN9e,KAAMgf,EACN7T,QAASqU,GACTnV,OA5IiB,SAAC2Q,EAAWmF,EAAYC,GAEnD,IAAMX,EAAW,IAAI1E,GAAmBC,EAAWmF,EAAYC,GAC/DX,EAASC,UACTjB,EAAmBgB,EAAStE,aAC5BgE,EAAwBM,EAAS7f,oBACjCmf,EAAsBU,EAAS1f,MAC/Bkf,EAAsBQ,EAASzf,MAC/Bwf,aAyIE,gBAAC5W,GAAA,QAAI,WACF5G,IACC,eAAC,SAAM,CACL0B,MAAM,MACNjE,MAAO,SACPkE,UAAW,QACXc,QAASkG,GACT3G,MAAO,CAAE6C,MAAO,OAAQwZ,aAAc,MAG1C,eAAC,SAAM,CACLnb,UAAWzF,EACXA,MAAOuC,GAAW,SAAW,SAC7ByC,QAAS4a,GACT3b,MAAOrD,EACPsD,UAAW,QACXK,MAAO,CAAE6C,MAAO,OAAQwZ,aAAc,eCjQ1CC,GAAQC,oBAEC,SAASC,KACtB,OACE,eAAC,WAAa,CAACC,MAAOA,GAAM,SAC1B,eAAC,WAAQ,UACP,eAACC,EAAA,QAAmB,UAClB,gBAACJ,GAAMK,UAAS,WACd,eAACL,GAAMM,OAAM,CACX1jB,KAAK,OACL2jB,UAAWzI,GACX0I,QAAS,CAAErhB,MAAO,UAEpB,eAAC6gB,GAAMM,OAAM,CACX1jB,KAAK,UACL2jB,UAAWE,GACXD,QAAS,CAAErhB,MAAO,aAEpB,eAAC6gB,GAAMM,OAAM,CACX1jB,KAAK,eACL2jB,UAAWG,GACXF,QAAS,CAAErhB,MAAO,mBAEpB,eAAC6gB,GAAMM,OAAM,CACX1jB,KAAK,YACL2jB,UAAWE,GACXD,QAAS,CAAErhB,MAAO,aAEpB,eAAC6gB,GAAMM,OAAM,CACX1jB,KAAK,SACL2jB,UAAW7H,GACX8H,QAAS,CAAErhB,MAAO,YAEpB,eAAC6gB,GAAMM,OAAM,CACX1jB,KAAK,cACL2jB,UAAWjH,GACXkH,QAAS,CAAErhB,MAAO,sB","file":"static/js/app.404ac375.chunk.js","sourcesContent":["import { logger, consoleTransport } from \"react-native-logs\";\r\n\r\nconst defaultConfig = {\r\n  levels: {\r\n    debug: 0,\r\n    info: 1,\r\n    warn: 2,\r\n    error: 3,\r\n  },\r\n  severity: \"debug\",\r\n  transport: consoleTransport,\r\n  transportOptions: {\r\n    colors: {\r\n      info: \"blueBright\",\r\n      warn: \"yellowBright\",\r\n      error: \"redBright\",\r\n    },\r\n  },\r\n  async: true,\r\n  dateFormat: \"time\",\r\n  printLevel: true,\r\n  printDate: true,\r\n  enabled: true,\r\n};\r\n\r\nvar log = logger.createLogger(defaultConfig);\r\n\r\nexport { log };\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { log } from \"utils/log\";\r\n\r\nexport const categorySlice = createSlice({\r\n  name: 'category',\r\n  initialState: {\r\n    value: [],\r\n  },\r\n  reducers: {\r\n    setCategories: (state, action) => {\r\n      log.debug('categorySlice saveCategories', action);\r\n      state.value = action.payload;\r\n    }\r\n  },\r\n})\r\n\r\nexport const getCategories = createAsyncThunk(\r\n  \"category/getCategories\",\r\n  async (payload, { dispatch }) => {\r\n    const { categories } = payload;\r\n    dispatch(setCategories(categories));\r\n  }\r\n);\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { setCategories } = categorySlice.actions\r\n\r\nconst categorySliceReducer = categorySlice.reducer;\r\nexport default categorySliceReducer;","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nexport const counterSlice = createSlice({\r\n  name: 'counter',\r\n  initialState: {\r\n    value: 0,\r\n  },\r\n  reducers: {\r\n    increment: (state) => {\r\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\r\n      // doesn't actually mutate the state because it uses the Immer library,\r\n      // which detects changes to a \"draft state\" and produces a brand new\r\n      // immutable state based off those changes\r\n      state.value += 1\r\n    },\r\n    decrement: (state) => {\r\n      state.value -= 1\r\n    },\r\n    incrementByAmount: (state, action) => {\r\n      state.value += action.payload\r\n    },\r\n  },\r\n})\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { increment, decrement, incrementByAmount } = counterSlice.actions\r\n\r\nconst counterSliceReducer = counterSlice.reducer;\r\nexport default counterSliceReducer;","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nexport default class DaoBase {\r\n  async getItem(inputKey) {\r\n    return await AsyncStorage.getItem(inputKey);\r\n  }\r\n\r\n  async setItem(inputKey, inputValue) {\r\n    await AsyncStorage.setItem(inputKey, inputValue);\r\n  }\r\n\r\n  async mergeItem(inputKey, inputValue) {\r\n    await AsyncStorage.mergeItem(inputKey, inputValue);\r\n  }\r\n\r\n  async multiSet(value) {\r\n    await AsyncStorage.multiSet(value);\r\n  }\r\n\r\n  async clear() {\r\n    await AsyncStorage.clear();\r\n  }\r\n}\r\n","import DaoBase from \"../dao-base\";\r\n\r\nexport default class TaskDao extends DaoBase {\r\n  async getTasksByCategory(categoryId) {\r\n    const key = this.getKeyPrefix() + categoryId;\r\n    return await this.getItem(key);\r\n  }\r\n\r\n  async setTasksByCategory(categoryId, value) {\r\n    const key = this.getKeyPrefix() + categoryId;\r\n    await this.setItem(key, value);\r\n  }\r\n\r\n  async mergeTaskByCategory(categoryId, value) {\r\n    const key = this.getKeyPrefix() + categoryId;\r\n    await this.mergeItem(key, value);\r\n  }\r\n\r\n  getKeyPrefix() {\r\n    return \"tasks-category-\";\r\n  }\r\n}\r\n\r\nexport const taskDao = new TaskDao();\r\n","import { date, object, string, array } from \"yup\";\r\n\r\nconst TaskValidator = object({\r\n  id: string().required(),\r\n  title: string().required(),\r\n  categoryId: string().required(),\r\n  description: string().nullable(),\r\n  selectedDaysRepeat: array().of(string()).nullable(),\r\n  date: date().nullable(),\r\n  time: date().nullable(),\r\n  createdDate: date().nullable(),\r\n  updatedDate: date().nullable(),\r\n});\r\nconst TaskListValidator = array().of(TaskValidator);\r\nexport { TaskValidator, TaskListValidator };\r\n","export const constants = {\r\n    RECENT_ACTIONS: 'recent-actions',\r\n    MY_ACTIONS: 'my-actions',\r\n    RECENT_SIZE: 3,\r\n    BASE_URL: 'https://gamegarbage.github.io'\r\n}\r\n\r\nexport const layoutConstants = {\r\n    colorPrimary: '#489C93',\r\n    colorSecondary: '#489C93',\r\n    \r\n}","import uuid from 'react-native-uuid';\r\n\r\nexport default class TaskModel {\r\n  id;\r\n  title;\r\n  categoryId;\r\n  description;\r\n  selectedDaysRepeat;\r\n  date;\r\n  time;\r\n  deleted;\r\n  createdDate;\r\n  updatedDate;\r\n\r\n  constructor(taskJson) {\r\n    const {id, title, description, selectedDaysRepeat, date, time, deleted, categoryId, createdDate, updatedDate} = taskJson;\r\n    this.id = id ? id : uuid.v4();\r\n    this.title = title;\r\n    this.categoryId = categoryId;\r\n    this.description = description;\r\n    this.selectedDaysRepeat = selectedDaysRepeat;\r\n    this.date = date;\r\n    this.time = time;\r\n    this.deleted = deleted;\r\n    this.createdDate = createdDate || new Date();\r\n    this.updatedDate = updatedDate || new Date();\r\n  }\r\n}\r\n","import { constants } from \"../contants\";\r\nimport TaskModel from \"./task-model\";\r\n\r\nexport class TaskListModel {\r\n  tasks = [];\r\n\r\n  get(includeDeleted = false) {\r\n    if (!includeDeleted) {\r\n      return this.tasks.filter((task) => {\r\n        return !task.deleted;\r\n      });\r\n    }\r\n    return this.tasks;\r\n  }\r\n\r\n  add(task) {\r\n    this.tasks.push(task);\r\n    return this.tasks;\r\n  }\r\n\r\n  softDelete(value) {\r\n    let index = -1;\r\n    this.tasks = this.tasks.map((task, i) => {\r\n      if (task.id == value.id) {\r\n        task.deleted = true;\r\n        index = i;\r\n      }\r\n      return task;\r\n    });\r\n    return index;\r\n  }\r\n\r\n  set(rawTasks) {\r\n    if(rawTasks) {\r\n      this.tasks = rawTasks.map((taskJson) => {\r\n        const task = new TaskModel(taskJson);\r\n        if (!task.categoryId) {\r\n          task.categoryId = constants.MY_ACTIONS;\r\n        }\r\n        return task;\r\n      });\r\n    }\r\n  }\r\n\r\n  remove(value) {\r\n    this.tasks = this.tasks.filter((task) => {\r\n      return task.id !== value.id && task.deleted !== true;\r\n    });\r\n  }\r\n\r\n  undo(value) {\r\n    this.tasks = this.tasks.map(task => {\r\n      if(task.id === value.id) {\r\n        task.deleted = false;\r\n      }\r\n      return task;\r\n    });\r\n  }\r\n\r\n  update(task) {\r\n    this.tasks = this.tasks.map((t) => {\r\n      if (t.id === task.id) {\r\n        return task;\r\n      } else {\r\n        return t;\r\n      }\r\n    });\r\n    return this.tasks;\r\n  }\r\n}\r\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { taskDao } from \"models/task/task-dao\";\r\nimport { TaskListValidator } from \"models/task/task-validator\";\r\nimport { log } from \"utils/log\";\r\nimport { constants } from \"../models/contants\";\r\nimport { TaskListModel } from \"../models/task/task-list-model\";\r\nimport { TaskValidator } from \"../models/task/task-validator\";\r\n\r\nexport const taskSlice = createSlice({\r\n  name: \"task\",\r\n  initialState: {\r\n    value: [],\r\n  },\r\n  reducers: {\r\n    setTasks: (state, action) => {\r\n      log.debug(\"taskSlice setTasks\", action);\r\n      state.value = action.payload;\r\n    },\r\n  }\r\n});\r\n\r\nexport const saveTasksByCategory = createAsyncThunk(\r\n  \"task/saveTasksByCategory\",\r\n  async (payload, { dispatch }) => {\r\n    const { categoryId, tasks } = payload;\r\n    await TaskListValidator.validate(tasks);\r\n    await taskDao.setTasksByCategory(categoryId, JSON.stringify(tasks));\r\n    dispatch(setTasks(tasks));\r\n  }\r\n);\r\n\r\nexport const saveRecent = createAsyncThunk(\r\n  \"task/saveRecent\",\r\n  async (payload) => {\r\n    const { recent, isUpdate } = payload;\r\n    await TaskValidator.validate(recent);\r\n    let rawTasks = JSON.parse(\r\n      await taskDao.getTasksByCategory(constants.RECENT_ACTIONS)\r\n    ) || [];\r\n    if(isUpdate || rawTasks.some(task => task.id === recent.id)) {\r\n      rawTasks = rawTasks.filter(task => task.id !== recent.id);\r\n    }\r\n    if(rawTasks.length >= constants.RECENT_SIZE) {\r\n      rawTasks = rawTasks.slice(1, constants.RECENT_SIZE);\r\n    }\r\n    rawTasks.push(recent);\r\n    await taskDao.setTasksByCategory(constants.RECENT_ACTIONS, JSON.stringify(rawTasks));\r\n  }\r\n);\r\n\r\nexport const getTasksByCategory = createAsyncThunk(\r\n  \"task/getTasksByCategory\",\r\n  async (payload, { dispatch }) => {\r\n    const { categoryId, includeDeleted } = payload;\r\n    try {\r\n      let rawTasks = JSON.parse(\r\n        await taskDao.getTasksByCategory(categoryId)\r\n      );\r\n      if(!rawTasks) {\r\n        throw Error('Empty Task for Category')\r\n      }\r\n      const taskList = new TaskListModel();\r\n      taskList.set(rawTasks);\r\n      // dispatch(setActiveCategory(category));\r\n      dispatch(setTasks(taskList.get(includeDeleted)));\r\n    } catch (error) {\r\n      log.warn(error);\r\n      dispatch(setTasks([]));\r\n    }\r\n  }\r\n);\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { setTasks } = taskSlice.actions;\r\n\r\nconst taskSliceReducer = taskSlice.reducer;\r\nexport default taskSliceReducer;\r\n","import { createSlice } from '@reduxjs/toolkit'\r\nimport { log } from \"utils/log\";\r\n\r\nexport const activeCategorySlice = createSlice({\r\n  name: 'activeCategory',\r\n  initialState: {\r\n    value: null,\r\n  },\r\n  reducers: {\r\n    setActiveCategory: (state, action) => {\r\n      log.debug(\"setActiveCategory\", action);\r\n      state.value = action.payload;\r\n    },\r\n  },\r\n})\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { setActiveCategory } = activeCategorySlice.actions\r\n\r\nconst activeCategorySliceReducer = activeCategorySlice.reducer;\r\nexport default activeCategorySliceReducer;","import { configureStore } from '@reduxjs/toolkit'\r\nimport categorySliceReducer from './features/category-slice'\r\nimport counterSliceReducer from './features/couterSlice'\r\nimport taskSliceReducer from './features/task-slice'\r\nimport activeCategorySliceReducer from './features/active-category-slice'\r\n\r\n// only for reactive programing\r\nexport default configureStore({\r\n  reducer: {\r\n    counter: counterSliceReducer,\r\n    task: taskSliceReducer,\r\n    category: categorySliceReducer,\r\n    activeCategory: activeCategorySliceReducer,\r\n  },\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: false\r\n    })\r\n})","import { ActivityIndicator, Pressable, Surface, Text, useAnimatedElevation, usePaletteColor, useStyles } from '@react-native-material/core';\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Animated, GestureResponderEvent, StyleSheet, View } from 'react-native';\r\n\r\nconst FAB = ({\r\n  icon,\r\n  label,\r\n  variant = 'standard',\r\n  size = 'default',\r\n  color = 'secondary',\r\n  tintColor,\r\n  loading = false,\r\n  loadingIndicator,\r\n  loadingIndicatorPosition = 'icon',\r\n  visible = true,\r\n  style,\r\n  pressableContainerStyle,\r\n  contentContainerStyle,\r\n  iconContainerStyle,\r\n  labelContainerStyle,\r\n  labelStyle,\r\n  loadingOverlayContainerStyle,\r\n\r\n  pressEffect,\r\n  pressEffectColor,\r\n  onPress,\r\n  onPressIn,\r\n  onPressOut,\r\n  onLongPress,\r\n  onBlur,\r\n  onFocus,\r\n  onMouseEnter,\r\n  onMouseLeave,\r\n  delayLongPress,\r\n  disabled,\r\n  hitSlop,\r\n  pressRetentionOffset,\r\n  android_disableSound,\r\n  android_ripple,\r\n  testOnly_pressed,\r\n  ...rest\r\n}) => {\r\n  const palette = usePaletteColor(color, tintColor);\r\n\r\n  const hasIcon = useMemo(\r\n    () => icon || (loading && loadingIndicatorPosition === 'icon'),\r\n    [icon, loading, loadingIndicatorPosition]\r\n  );\r\n\r\n  const styles = useStyles(\r\n    () => ({\r\n      container: {\r\n        backgroundColor: palette.main,\r\n        borderRadius: size === 'default' ? 28 : 20,\r\n      },\r\n      pressableContainer: {\r\n        borderRadius: size === 'default' ? 28 : 20,\r\n        overflow: 'hidden',\r\n      },\r\n      pressable: {\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        paddingStart:\r\n          variant === 'extended'\r\n            ? hasIcon\r\n              ? size === 'default'\r\n                ? 12\r\n                : 6\r\n              : size === 'default'\r\n              ? 20\r\n              : 10\r\n            : size === 'default'\r\n            ? 16\r\n            : 8,\r\n        paddingEnd: variant === 'extended' ? (size === 'default' ? 20 : 10) : size === 'default' ? 16 : 8,\r\n        paddingVertical: size === 'default' ? 16 : 8,\r\n      },\r\n      iconContainer: {\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        width: 24,\r\n        height: 24,\r\n      },\r\n      labelContainer: {\r\n        marginStart: hasIcon ? (size === 'default' ? 12 : 6) : 0,\r\n      },\r\n      loadingOverlayContainer: {\r\n        ...StyleSheet.absoluteFillObject,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: palette.main,\r\n      },\r\n    }),\r\n    [variant, size, palette, hasIcon]\r\n  );\r\n\r\n  const animated = useRef(new Animated.Value(visible ? 1 : 0)).current;\r\n\r\n  useEffect(() => {\r\n    Animated.timing(animated, {\r\n      toValue: visible ? 1 : 0,\r\n      duration: 200,\r\n      useNativeDriver: true,\r\n    }).start();\r\n  }, [visible]);\r\n\r\n  const getLoadingIndicator = () => {\r\n    if (!loadingIndicator) return <ActivityIndicator color={palette.on} />;\r\n    switch (typeof loadingIndicator) {\r\n      case 'string':\r\n        return (\r\n          <Text variant=\"button\" style={{ color: palette.on }}>\r\n            {loadingIndicator}\r\n          </Text>\r\n        );\r\n      case 'function':\r\n        return loadingIndicator({ color: palette.on });\r\n      default:\r\n        return loadingIndicator;\r\n    }\r\n  };\r\n\r\n  const getIcon = () => {\r\n    if (loading && loadingIndicatorPosition === 'icon') return getLoadingIndicator();\r\n    return typeof icon === 'function' ? icon({ color: palette.on, size: 24 }) : icon;\r\n  };\r\n\r\n  const getLabel = () => {\r\n    switch (typeof label) {\r\n      case 'string':\r\n        return (\r\n          <Text variant=\"button\" selectable={false} style={[{ color: palette.on }, labelStyle]}>\r\n            {label}\r\n          </Text>\r\n        );\r\n      case 'function':\r\n        return label({ color: palette.on });\r\n      default:\r\n        return label;\r\n    }\r\n  };\r\n\r\n  const [pressed, setPressed] = useState(false);\r\n\r\n  const handlePressIn = useCallback(\r\n    (event) => {\r\n      onPressIn?.(event);\r\n      setPressed(true);\r\n    },\r\n    [onPressIn]\r\n  );\r\n\r\n  const handlePressOut = useCallback(\r\n    (event) => {\r\n      onPressOut?.(event);\r\n      setPressed(false);\r\n    },\r\n    [onPressOut]\r\n  );\r\n\r\n  const animatedElevation = useAnimatedElevation(pressed ? 12 : 6);\r\n\r\n  return (\r\n    <Surface style={[animatedElevation, styles.container, { transform: [{ scale: animated }] }, style]} {...rest}>\r\n      <View style={[styles.pressableContainer, pressableContainerStyle]}>\r\n        <Pressable\r\n          style={[styles.pressable, contentContainerStyle]}\r\n          pressEffect={pressEffect}\r\n          pressEffectColor={pressEffectColor ?? palette.on}\r\n          onPress={onPress}\r\n          onPressIn={handlePressIn}\r\n          onPressOut={handlePressOut}\r\n          onLongPress={onLongPress}\r\n          onBlur={onBlur}\r\n          onFocus={onFocus}\r\n          onMouseEnter={onMouseEnter}\r\n          onMouseLeave={onMouseLeave}\r\n          delayLongPress={delayLongPress}\r\n          disabled={disabled}\r\n          hitSlop={hitSlop}\r\n          pressRetentionOffset={pressRetentionOffset}\r\n          android_disableSound={android_disableSound}\r\n          android_ripple={android_ripple}\r\n          testOnly_pressed={testOnly_pressed}\r\n        >\r\n          {hasIcon && <View style={[styles.iconContainer, iconContainerStyle]}>{getIcon()}</View>}\r\n          {variant === 'extended' && <View style={[styles.labelContainer, labelContainerStyle]}>{getLabel()}</View>}\r\n\r\n          {loading && loadingIndicatorPosition === 'overlay' && (\r\n            <View style={[styles.loadingOverlayContainer, loadingOverlayContainerStyle]}>{getLoadingIndicator()}</View>\r\n          )}\r\n        </Pressable>\r\n      </View>\r\n    </Surface>\r\n  );\r\n};\r\n\r\nexport default FAB;\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport { AppBar, IconButton } from \"@react-native-material/core\";\r\nimport React from \"react\";\r\nimport { layoutConstants } from \"../../models/contants\";\r\nimport FAB from \"./fab\";\r\n\r\nconst BottomBar = (props) => {\r\n  const { onMenuClick, onAddClick } = props;\r\n  return (\r\n    <AppBar\r\n      variant=\"bottom\"\r\n      color={layoutConstants.colorPrimary}\r\n      leading={(props) => (\r\n        <IconButton\r\n          contentContainerStyle={{ left: 15 }}\r\n          onPress={onMenuClick}\r\n          color={\"white\"}\r\n          icon={(props) => <Icon  name=\"menu\" {...props} color={\"white\"} />}\r\n          {...props}\r\n        />\r\n      )}\r\n      //   trailing={(props) => (\r\n      //     <IconButton\r\n      //       icon={(props) => <Icon name=\"magnify\" {...props} />}\r\n      //       {...props}\r\n      //     />\r\n      //   )}\r\n      style={{ position: \"absolute\", start: 0, end: 0, bottom: 0 }}\r\n    >\r\n      <FAB\r\n        color={layoutConstants.colorPrimary}\r\n        tintColor={\"white\"}\r\n        onPress={onAddClick}\r\n        icon={(props) => <Icon name=\"plus\" {...props} />}\r\n        style={{ position: \"absolute\", top: -28, alignSelf: \"center\", borderColor: \"white\", borderWidth: 1 }}\r\n      />\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default BottomBar;\r\n","import React, { useEffect } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { Snackbar, Button } from \"@react-native-material/core\";\r\nimport { log } from \"utils/log\";\r\n\r\nlet timeout;\r\nconst RemovedSnackBar = (props) => {\r\n  const { item, onUndo, visible, setVisible, onDone } = props;\r\n\r\n  const onUndoHandler = () => {\r\n    clearTimeout(timeout);\r\n    onUndo(item);\r\n    setVisible(false);\r\n  }\r\n  \r\n  useEffect(() => {\r\n    if(visible) {\r\n      log.debug('RemovedSnackBar', item)\r\n      timeout = setTimeout(() => {\r\n        onDone(item);\r\n        setVisible(false);\r\n        \r\n      }, 4000);\r\n    }\r\n  }, [visible])\r\n  \r\n  return (\r\n    visible && <View style={{ flex: 1 }}>\r\n      <Snackbar\r\n        message=\"Removed Item\"\r\n        action={<Button variant=\"text\" title=\"Undo\" color=\"#6666ff\" compact onPress={onUndoHandler}/>}\r\n        style={{ position: \"absolute\", start: 16, end: 16, bottom: 70 }}\r\n      />\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default RemovedSnackBar;\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport { IconButton, Text } from \"@react-native-material/core\";\r\nimport { View } from \"react-native\";\r\n\r\nexport default function EmptyPage(props) {\r\n  const { onPress } = props;\r\n  return (\r\n    <View style={{ backgroundColor: \"white\", flex: 1, alignItems: \"center\", justifyContent: \"center\" }}>\r\n      <IconButton icon={props => <Icon  size={50} name=\"plus\" />}  onPress={onPress}/>\r\n      <Text style={{padding: 30, color: \"grey\", fontSize:18}}>Click to create task, You have no task</Text>\r\n    </View>\r\n  );\r\n}\r\n","import { Button } from \"@react-native-material/core\";\r\nimport React, { useRef } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport ActionSheet from \"react-native-actions-sheet\";\r\nimport { Divider } from \"@react-native-material/core\";\r\n\r\nlet isUpdate = false;\r\nexport default function CategoryActionSheet(props) {\r\n  const { activeCategory, onDelete, onUpdate, visible, setVisible } = props;\r\n  const isDefaultCategory = activeCategory?.id === \"my-task\";\r\n  const actionRef = useRef(null);\r\n  const onShow = () => {\r\n    isUpdate = false;\r\n    actionRef.current?.show();\r\n  };\r\n  useEffect(() => {\r\n    if (visible) {\r\n      onShow();\r\n    } else {\r\n      actionRef.current?.hide();\r\n    }\r\n  }, [visible]);\r\n\r\n  const onDeleteHandler = () => {\r\n    isUpdate = false;\r\n    actionRef.current?.hide();\r\n    onDelete(activeCategory);\r\n  };\r\n\r\n  const onUpdateHandler = () => {\r\n    isUpdate = true;\r\n    actionRef.current?.hide();\r\n  };\r\n\r\n  const onCloseHander = () => {\r\n    if (isUpdate) {\r\n      onUpdate(activeCategory);\r\n    }\r\n    setVisible(false);\r\n  };\r\n\r\n  return (\r\n    <ActionSheet ref={actionRef} onClose={onCloseHander}>\r\n      <View style={{ margin: 20, display: \"flex\" }}>\r\n        <Button\r\n          variant=\"text\"\r\n          key=\"remove-category\"\r\n          onPress={onDeleteHandler}\r\n          disabled={isDefaultCategory}\r\n          title=\"Remove Category\"\r\n        />\r\n        <Divider style={{ margin: 5 }} />\r\n        <Button\r\n          variant=\"text\"\r\n          key=\"update-category\"\r\n          onPress={onUpdateHandler}\r\n          disabled={isDefaultCategory}\r\n          title=\"Update Category\"\r\n        />\r\n      </View>\r\n    </ActionSheet>\r\n  );\r\n}\r\n","export default class TabListModel {\r\n    tabs = [];\r\n    constructor(tabs) {\r\n        if(tabs) {\r\n            this.tabs = tabs;\r\n        }\r\n        this.setDefaultActiveTab();\r\n    }\r\n\r\n    setDefaultActiveTab() {\r\n        if(this.tabs.length > 0 && !this.tabs.some(tab => tab.active)) {\r\n            this.tabs[0].active = true;\r\n        }\r\n    }\r\n  }\r\n  ","import { Pressable, StyleSheet, Text } from \"react-native\";\r\n\r\nexport default function ButtonPressable(props) {\r\n  const { onPress, children, active, customStyles, ...others } = props;\r\n  return (\r\n    <Pressable\r\n      onPress={onPress}\r\n      style={({ pressed }) => [\r\n        styles.button,\r\n        pressed? styles.buttonPressed : \"\",\r\n        customStyles,\r\n      ]}\r\n      {...others}\r\n    >\r\n      {children}\r\n    </Pressable>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  buttonPressed: {\r\n    opacity: 0.5,\r\n  },\r\n  button: {\r\n    padding: 10,\r\n    textAlign: \"center\",\r\n    overflow: \"hidden\",\r\n    textOverflow: \"ellipsis\"\r\n  }\r\n});\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport { IconButton, Text } from \"@react-native-material/core\";\r\nimport React from \"react\";\r\nimport { ScrollView, StyleSheet, View } from \"react-native\";\r\nimport TabListModel from \"models/tab-list-model\";\r\nimport ButtonPressable from \"../utils/button-pressable\";\r\nimport { layoutConstants } from \"../../models/contants\";\r\n\r\n// data model: tabs\r\n// view props: others\r\n// action: onAdd, onClick\r\nexport default function CategoryTab(props) {\r\n  const {\r\n    tabs,\r\n    activeCategory,\r\n    onAdd,\r\n    onClick,\r\n    onDelete,\r\n    onUpdate,\r\n    onLongPress,\r\n    ...others\r\n  } = props;\r\n  const tabList = new TabListModel(tabs);\r\n  const onClickHandler = (tab) => {\r\n    onClick(tab);\r\n  };\r\n  return (\r\n    <View style={styles.tabContainer}>\r\n      {/* <IconButton\r\n        onPress={onShowSheet}\r\n        icon={(props) => <Icon name=\"menu\" {...props} />}\r\n      /> */}\r\n      {tabList.tabs && activeCategory && (\r\n        <ScrollView horizontal style={{ flexGrow: 0 }}>\r\n          <View style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n            {tabList.tabs.map((tab, index) => {\r\n              const active = tab.id === activeCategory.id;\r\n              return (\r\n                <ButtonPressable\r\n                  key={index}\r\n                  onPress={() => {\r\n                    onClickHandler(tab);\r\n                  }}\r\n                  onLongPress={() => {\r\n                    onClickHandler(tab);\r\n                    onLongPress();\r\n                  }}\r\n                  customStyles={\r\n                    active\r\n                      ? { ...styles.button, ...styles.active }\r\n                      : { ...styles.button }\r\n                  }\r\n                  active={active}\r\n                >\r\n                  <Text\r\n                    numberOfLines={1}\r\n                    style={active ? styles.textActive : \"\"}\r\n                  >\r\n                    {tab.title}\r\n                  </Text>\r\n                </ButtonPressable>\r\n              );\r\n            })}\r\n          </View>\r\n        </ScrollView>\r\n      )}\r\n      <IconButton\r\n        key=\"add-category\"\r\n        onPress={onAdd}\r\n        icon={(props) => <Icon name=\"plus\" {...props} />}\r\n      />\r\n    </View>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  button: {\r\n    width: 80,\r\n  },\r\n  buttonMenu: {\r\n    width: 60,\r\n  },\r\n  tabContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    backgroundColor: \"white\",\r\n    borderBottomWidth: 2,\r\n    borderBottomColor: \"rgb(216, 216, 216)\",\r\n  },\r\n  buttonActive: {\r\n    width: 120,\r\n    borderColor: layoutConstants.colorPrimary,\r\n    borderBottomWidth: 2,\r\n  },\r\n  textActive: {\r\n    color: layoutConstants.colorPrimary,\r\n  },\r\n  active: {\r\n    textColor: layoutConstants.colorPrimary,\r\n    borderColor: layoutConstants.colorPrimary,\r\n    borderBottomWidth: 3,\r\n    borderRadius: 3,\r\n  },\r\n});\r\n","import uuid from 'react-native-uuid';\r\n\r\nexport default class TaskCategoryModel {\r\n    id;\r\n    title;\r\n    deleted;\r\n    createdDate;\r\n    updatedDate;\r\n\r\n    constructor({id, title, deleted, createdDate, updatedDate}) {\r\n        this.id = id ? id : uuid.v4();\r\n        this.title = title;\r\n        this.deleted = deleted;\r\n        this.createdDate = createdDate || new Date();\r\n        this.updatedDate = updatedDate || new Date();\r\n    }\r\n}","import { Keyboard, TouchableWithoutFeedback } from 'react-native';\r\n\r\nconst HideKeyboard = ({ children }) => (\r\n    <TouchableWithoutFeedback onPress={() => Keyboard.dismiss()}>\r\n      {children}\r\n    </TouchableWithoutFeedback>\r\n  );\r\n\r\nexport default HideKeyboard;","import { Portal, Surface } from '@react-native-material/core';\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport { Animated, Easing, Platform, StyleSheet, TouchableWithoutFeedback } from 'react-native';\r\n// import { Portal } from './base/PortalContext';\r\n// import Surface from './Surface';\r\n\r\nconst Dialog = ({ visible = false, onDismiss, children }) => {\r\n  const [portalVisible, setPortalVisible] = useState(visible);\r\n\r\n  const animatedValue = useMemo(() => new Animated.Value(visible ? 1 : 0), []);\r\n\r\n  useEffect(() => {\r\n    if (visible) setPortalVisible(true);\r\n\r\n    Animated.timing(animatedValue, {\r\n      toValue: visible ? 1 : 0,\r\n      duration: 225,\r\n      easing: Easing.out(Easing.cubic),\r\n      useNativeDriver: Platform.OS !== 'android',\r\n    }).start(() => {\r\n      if (!visible) setPortalVisible(false);\r\n    });\r\n  }, [visible]);\r\n\r\n  if (!portalVisible) return null;\r\n\r\n  return (\r\n    <Portal>\r\n      <TouchableWithoutFeedback onPress={onDismiss}>\r\n        <Animated.View style={[StyleSheet.absoluteFill, styles.backdrop, { opacity: animatedValue }]} />\r\n      </TouchableWithoutFeedback>\r\n      <Animated.View\r\n        style={[StyleSheet.absoluteFill, styles.container, { opacity: animatedValue }]}\r\n        pointerEvents=\"box-none\"\r\n        needsOffscreenAlphaCompositing={Platform.OS === 'android'}\r\n      >\r\n        <Surface category=\"medium\" elevation={24} style={[styles.surface]}>\r\n          {children}\r\n        </Surface>\r\n      </Animated.View>\r\n    </Portal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  backdrop: {\r\n    backgroundColor: 'rgba(0,0,0,.5)',\r\n  },\r\n  container: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: '95%'\r\n  },\r\n  surface: {\r\n    width: \"100%\",\r\n    marginHorizontal: 40,\r\n  },\r\n});\r\n\r\nexport default Dialog;\r\n","import {\r\n  Button,\r\n  DialogHeader,\r\n  DialogActions,\r\n  DialogContent,\r\n  TextInput,\r\n  IconButton,\r\n} from \"@react-native-material/core\";\r\nimport * as React from \"react\";\r\nimport { View } from \"react-native\";\r\nimport TaskCategoryModel from \"models/category/task-category-model\";\r\nimport HideKeyboard from \"../utils/hide-keyboard\";\r\nimport Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport Dialog from \"../utils/dialog\";\r\n\r\n// data model: category || null\r\n// view props: visible\r\n// action: onClose, onSave, onDelete, onCancel\r\nexport default function TaskCategoryForm(props) {\r\n  // on init create form, title are null\r\n  // on init update form, title base on data model\r\n  // on action create/update form, category is submited\r\n  const { category, visible, onClose, onSave, onDelete } = props;\r\n  const [title, setTitle] = React.useState(category?.title || \"\");\r\n  const isUpdate = !!category;\r\n  const [formTitle, setFormTitle] = React.useState(\"Create Category\");\r\n\r\n  React.useEffect(() => {\r\n    if (category) {\r\n      // on init existing category\r\n      setFormTitle(\"Update Category\");\r\n    } else {\r\n      // on init new category\r\n      setFormTitle(\"Create Category\");\r\n    }\r\n  }, [props.task]);\r\n\r\n  const handelSave = () => {\r\n    const id = category ? category.id : null;\r\n    // todo validate category here\r\n    let obj = new TaskCategoryModel({\r\n      id,\r\n      title,\r\n    });\r\n    onSave(obj, isUpdate);\r\n  };\r\n\r\n  const onDeleteHandler = () => {\r\n    onDelete(category);\r\n  };\r\n\r\n  return (\r\n    <Dialog visible={visible} onDismiss={onClose}>\r\n      <HideKeyboard>\r\n        <View>\r\n          <View\r\n            style={{ display: \"flex\", flexDirection: \"row\" }}\r\n            id=\"task-form\"\r\n          >\r\n            <View style={{ flex: 1 }}>\r\n              <DialogHeader title={formTitle} />\r\n            </View>\r\n            {isUpdate && (\r\n              <IconButton\r\n                onPress={onDeleteHandler}\r\n                icon={(props) => <Icon name=\"delete\" {...props} />}\r\n              />\r\n            )}\r\n            <IconButton\r\n              onPress={onClose}\r\n              icon={(props) => <Icon name=\"close\" {...props} />}\r\n            />\r\n          </View>\r\n\r\n          <DialogContent>\r\n            <View>\r\n              <TextInput\r\n                value={title}\r\n                onChangeText={setTitle}\r\n                placeholder=\"Category Title\"\r\n              />\r\n            </View>\r\n          </DialogContent>\r\n\r\n          <DialogActions>\r\n            <Button variant=\"outlined\" title=\"Cancel\" onPress={onClose} />\r\n            <Button\r\n              disabled={!title}\r\n              title={isUpdate ? \"Update\" : \"Create\"}\r\n              onPress={handelSave}\r\n            />\r\n          </DialogActions>\r\n        </View>\r\n      </HideKeyboard>\r\n    </Dialog>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { Image, Platform, Pressable, StyleSheet } from \"react-native\";\r\n\r\nconst checkmarkBase64 =\r\n  \"data:image/png;base64,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\";\r\n\r\nconst ExpoCheckbox = (props) => {\r\n  const {\r\n    color,\r\n    disabled,\r\n    onChange,\r\n    onValueChange,\r\n    style,\r\n    value,\r\n    keyword,\r\n    ...other\r\n  } = props;\r\n\r\n  const handleChange = useCallback(() => {\r\n    onValueChange && onValueChange(!value, keyword);\r\n  }, [onValueChange, value]);\r\n\r\n  return (\r\n    <Pressable\r\n      {...other}\r\n      disabled={disabled}\r\n      // Announces \"checked\" status and \"checkbox\" as the focused element\r\n      accessibilityRole=\"checkbox\"\r\n      accessibilityState={{ disabled, checked: value }}\r\n      style={[\r\n        styles.root,\r\n        style,\r\n        value && styles.checked,\r\n        !!color && {\r\n          backgroundColor: value ? color : undefined,\r\n          borderColor: color,\r\n        },\r\n        disabled && styles.disabled,\r\n        value && disabled && styles.checkedAndDisabled,\r\n      ]}\r\n      onPress={handleChange}\r\n    >\r\n      {value && (\r\n        <Image\r\n          source={{\r\n            uri: checkmarkBase64,\r\n          }}\r\n          style={StyleSheet.absoluteFill}\r\n        />\r\n      )}\r\n    </Pressable>\r\n  );\r\n};\r\n\r\nExpoCheckbox.displayName = \"Checkbox\";\r\n\r\nexport default ExpoCheckbox;\r\n\r\nconst defaultEnabledColor = Platform.select({\r\n  ios: \"#007AFF\",\r\n  android: \"#009688\",\r\n});\r\nconst defaultGrayColor = \"#657786\";\r\nconst disabledGrayColor = \"#CCD6DD\";\r\nconst disabledCheckedGrayColor = \"#AAB8C2\";\r\n\r\nconst styles = StyleSheet.create({\r\n  root: {\r\n    height: 20,\r\n    width: 20,\r\n    borderRadius: 2,\r\n    borderWidth: 2,\r\n    borderColor: defaultGrayColor,\r\n  },\r\n  checked: {\r\n    backgroundColor: defaultEnabledColor,\r\n    borderColor: defaultEnabledColor,\r\n  },\r\n  disabled: {\r\n    borderColor: disabledGrayColor,\r\n    backgroundColor: \"transparent\",\r\n  },\r\n  checkedAndDisabled: {\r\n    backgroundColor: disabledCheckedGrayColor,\r\n    borderColor: disabledCheckedGrayColor,\r\n  },\r\n});\r\n\r\nExpoCheckbox.isAvailableAsync = () => {\r\n  console.warn(\r\n    \"Checkbox.isAvailableAsync() is deprecated and will be removed in future releases\"\r\n  );\r\n  return Promise.resolve(true);\r\n};\r\n","import { Text } from \"@react-native-material/core\";\r\nimport * as React from \"react\";\r\nimport { Pressable, StyleSheet, View } from \"react-native\";\r\nimport ExpoCheckbox from \"../utils/expo-checkbox\";\r\n\r\nexport default function TaskList(props) {\r\n  const { tasks, onPress } = props;\r\n  return (\r\n    <View style={{ flex: 1 }}>\r\n      {tasks &&\r\n        tasks.map((task, index) => {\r\n          const date = task.date ? new Date(task.date) : \"\";\r\n          const time = task.time ? new Date(task.time) : \"\";\r\n          let timeDisplay;\r\n          if(date || time) {\r\n            if(!date) {\r\n              timeDisplay = time;\r\n            }\r\n            if(!time) {\r\n              timeDisplay = date;\r\n            }\r\n            if(date && time) {\r\n              timeDisplay = date;\r\n              timeDisplay.setHours(time.getHours());\r\n              timeDisplay.setMinutes(time.getMinutes());\r\n            }\r\n          }\r\n          return (\r\n            <Pressable\r\n              onPress={() => {\r\n                onPress(task);\r\n              }}\r\n              key={task.id + index}\r\n            >\r\n              <View style={[styles.listItem]}>\r\n                <ExpoCheckbox\r\n                  style={{ borderRadius: \"50%\", padding: 12 }}\r\n                  value={false}\r\n                  keyword={task.title}\r\n                  onValueChange={() => {\r\n                    console.log(\"bbbbbbbbb\");\r\n                  }}\r\n                />\r\n                <View style={{ width: \"100%\", paddingLeft: 10, margin: 5 }}>\r\n                    <Text>{task.title}</Text>\r\n                    <Text style={styles.description}>{task.description}</Text>\r\n                    <Text style={styles.time}>{timeDisplay && timeDisplay.toLocaleDateString(\"en-US\")}</Text>\r\n                  </View>\r\n              </View>\r\n            </Pressable>\r\n          );\r\n        })}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  listItem: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    borderBottomColor: \"rgb(216, 216, 216)\",\r\n    borderBottomWidth: 2,\r\n    paddingLeft: 15,\r\n    alignItems: \"center\",\r\n    minHeight: 50,\r\n  },\r\n  description: {\r\n    color: 'grey',\r\n    fontSize: 12\r\n  },\r\n  time: {\r\n    color: 'green',\r\n    fontSize: 12\r\n  }\r\n});\r\n","import { array, boolean, object, string, date } from \"yup\";\r\n\r\nconst CategoryValidator = object({\r\n  id: string().required(),\r\n  title: string().required(),\r\n  deleted: boolean().nullable(),\r\n  createdDate: date().nullable(),\r\n  updatedDate: date().nullable(),\r\n});\r\nconst CategoryListValidator = array().of(CategoryValidator);\r\nexport { CategoryValidator, CategoryListValidator };\r\n\r\n","import DaoBase from \"../dao-base\";\r\n\r\nexport default class TaskCategoryDao extends DaoBase {\r\n  async getCategories() {\r\n    const key = this.getKeyPrefix();\r\n    return await this.getItem(key);\r\n  }\r\n\r\n  async setCategories(value) {\r\n    const key = this.getKeyPrefix();\r\n    await this.setItem(key, value);\r\n  }\r\n\r\n  getKeyPrefix() {\r\n    return \"categories\";\r\n  }\r\n}\r\n\r\nexport const taskCategoryDao = new TaskCategoryDao();","import { setActiveCategory } from \"features/active-category-slice\";\r\nimport { setCategories } from \"features/category-slice\";\r\nimport { batch, useDispatch } from \"react-redux\";\r\nimport { log } from \"utils/log\";\r\nimport { getTasksByCategory } from \"../features/task-slice\";\r\nimport TaskCategoryDao from \"../models/category/task-category-dao\";\r\nimport TaskCategoryModel from \"../models/category/task-category-model\";\r\nimport {\r\n  CategoryListValidator,\r\n  CategoryValidator,\r\n} from \"../models/category/task-category-validator\";\r\nimport { constants } from \"../models/contants\";\r\n\r\nexport default class TaskCategoryService {\r\n  categoryDao;\r\n  defaultCategory;\r\n  dispatch;\r\n  constructor() {\r\n    this.categoryDao = new TaskCategoryDao();\r\n    this.defaultCategory = new TaskCategoryModel({\r\n      id: constants.MY_ACTIONS,\r\n      title: \"My Actions\",\r\n    });\r\n    this.dispatch = useDispatch();\r\n  }\r\n  async getCategories(includeDeleted = false) {\r\n    log.debug(\"getCategories\", includeDeleted);\r\n    try {\r\n      let categories = JSON.parse(await this.categoryDao.getCategories());\r\n      if (!includeDeleted) {\r\n        categories = categories.filter((c) => !c.deleted);\r\n      }\r\n      return categories.map((c) => new TaskCategoryModel(c));\r\n    } catch (error) {\r\n      log.error(\"getCategories error\", error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  // Get data from store and set to redux setCategories setActiveCategory\r\n  async getCategoriesWithDefault(includeDeleted = false) {\r\n    log.debug(\"getCategoriesWithDefault\", includeDeleted);\r\n    let categories;\r\n    try {\r\n      categories = await this.getCategories(includeDeleted);\r\n      categories = [this.defaultCategory, ...categories];\r\n    } catch (error) {\r\n      log.warn(\"getCategoriesWithDefault error\", error);\r\n      categories = [this.defaultCategory];\r\n    }\r\n    return categories;\r\n  }\r\n\r\n  setActiveCategory(category) {\r\n    // should validate\r\n    CategoryValidator.validateSync(category);\r\n    return this.dispatch(setActiveCategory(category));\r\n  }\r\n\r\n  setCategories(categories) {\r\n    return this.dispatch(setCategories(categories));\r\n  }\r\n\r\n  setActiveCategoriesAndLoadTasks(category) {\r\n    batch(() => {\r\n      this.dispatch(\r\n        getTasksByCategory({\r\n          categoryId: category.id,\r\n          includeDeleted: false,\r\n          category,\r\n        })\r\n      );\r\n      this.dispatch(setActiveCategory(category));\r\n    });\r\n  }\r\n\r\n  async saveCategories(categoryModel, isUpdate) {\r\n    let categories;\r\n    if (isUpdate) {\r\n      categories = await this.updateCategory(categoryModel);\r\n    } else {\r\n      categories = await this.addCategories(categoryModel);\r\n    }\r\n    // validate categories\r\n    CategoryListValidator.validate(categories);\r\n    await this.categoryDao.setCategories(JSON.stringify(categories));\r\n    this.setCategories([this.defaultCategory, ...categories], categoryModel);\r\n  }\r\n\r\n  async addCategories(categoryModel) {\r\n    try {\r\n      // validate category\r\n      const categories = await this.getCategories();\r\n      categories.push(categoryModel);\r\n      return categories;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  async removeCategories(category) {\r\n    log.debug(\"removeCategories\", category);\r\n    try {\r\n      // validate category\r\n      CategoryValidator.validate(category);\r\n      let categories = await this.getCategories(true);\r\n      categories = categories.filter(\r\n        (c) => c.id !== category.id && c.deleted !== true\r\n      );\r\n      // validate categories\r\n      CategoryListValidator.validate(categories);\r\n      await this.categoryDao.setCategories(JSON.stringify(categories));\r\n    } catch (error) {\r\n      log.error(\"removeCategories\", error);\r\n    }\r\n  }\r\n\r\n  async softRemoveCategories(category) {\r\n    log.debug(\"softRemoveCategories\", category);\r\n    try {\r\n      // validate category\r\n      CategoryValidator.validate(category);\r\n      let categories = await this.getCategories();\r\n      categories = categories.map((c) => {\r\n        if (c.id === category.id) {\r\n          c.deleted = true;\r\n        }\r\n        return c;\r\n      });\r\n      // validate categories\r\n      CategoryListValidator.validate(categories);\r\n      await this.categoryDao.setCategories(JSON.stringify(categories));\r\n      this.setCategories([this.defaultCategory, ...categories]);\r\n      log.info(\"softRemoveCategories success\");\r\n    } catch (error) {\r\n      log.error(\"softRemoveCategories\", error);\r\n    }\r\n  }\r\n\r\n  async undoRemovedCategory({ item, dispatch }) {\r\n    log.debug(\"undoRemovedCategory\", item);\r\n    try {\r\n      // validate category\r\n      CategoryValidator.validate(item);\r\n      let categories = await this.getCategories(true);\r\n      categories = categories.map((c) => {\r\n        if (c.id == item.id) {\r\n          c.deleted = false;\r\n        }\r\n        return c;\r\n      });\r\n      // validate categories\r\n      CategoryListValidator.validate(categories);\r\n      await this.categoryDao.setCategories(JSON.stringify(categories));\r\n      dispatch &&\r\n        dispatch(setCategories([this.defaultCategory, ...categories]));\r\n      return { item };\r\n    } catch (error) {\r\n      log.error(\"undoRemovedCategory\", error);\r\n    }\r\n  }\r\n\r\n  async updateCategory(categoryModel) {\r\n    try {\r\n      // validate\r\n      let categories = await this.getCategories();\r\n      categories = categories.map((c) => {\r\n        if (c.id == categoryModel.id) {\r\n          c = categoryModel;\r\n        }\r\n        return c;\r\n      });\r\n      return categories;\r\n    } catch (error) {\r\n      log.error(\"updateCategory\", error);\r\n    }\r\n  }\r\n}\r\n\r\nlet taskCategoryService;\r\nconst createTaskCategoryService = () => {\r\n  if (taskCategoryService) {\r\n    return taskCategoryService;\r\n  }\r\n  taskCategoryService = new TaskCategoryService();\r\n  return taskCategoryService;\r\n};\r\n\r\nexport { createTaskCategoryService };\r\n","import { log } from \"components/utils/log\";\r\nimport { saveTasksByCategory, setTasks } from \"features/task-slice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setActiveCategory } from \"../features/active-category-slice\";\r\nimport { getTasksByCategory, saveRecent } from \"../features/task-slice\";\r\nimport TaskDao from \"../models/task/task-dao\";\r\nimport { TaskListModel } from \"../models/task/task-list-model\";\r\nimport {\r\n  TaskListValidator,\r\n  TaskValidator,\r\n} from \"../models/task/task-validator\";\r\n\r\nexport default class TaskService {\r\n  taskDao;\r\n  dispatch;\r\n  constructor() {\r\n    this.taskDao = new TaskDao();\r\n    this.dispatch = useDispatch();\r\n  }\r\n\r\n  async getTasksByCategory(categoryId, includeDeleted = false) {\r\n    log.debug(\"getTasksByCategory\", categoryId, includeDeleted);\r\n    try {\r\n      let rawTasks = JSON.parse(\r\n        await this.taskDao.getTasksByCategory(categoryId)\r\n      );\r\n      const taskList = new TaskListModel();\r\n      taskList.set(rawTasks);\r\n      return taskList;\r\n    } catch (error) {\r\n      log.warn(error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getTasksByCategoryStore(categoryId, includeDeleted = false) {\r\n    log.debug(\"getTasksByCategoryStore\", categoryId, includeDeleted);\r\n    try {\r\n      this.dispatch(getTasksByCategory({ categoryId, includeDeleted }));\r\n    } catch (error) {\r\n      log.warn(error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async setTasksStore(tasks) {\r\n    // validate tasks\r\n    await TaskListValidator.validate(tasks);\r\n    this.dispatch(setTasks(tasks));\r\n  }\r\n\r\n  async setTasksByCategory(categoryId, value) {\r\n    log.debug(\"setTasksByCategory\", categoryId, value);\r\n    try {\r\n      await TaskListValidator.validate(value);\r\n      await this.taskDao.setTasksByCategory(categoryId, JSON.stringify(value));\r\n      log.info(\"setTasksByCategory success\");\r\n    } catch (error) {\r\n      log.error(error);\r\n    }\r\n  }\r\n\r\n  // save flow: categoryId equal to task.categoryId\r\n  // update flow: categoryId is new category, task.categoryId is old category\r\n  async saveTaskByCategory({categoryId, item, isUpdate, dispatch}) {\r\n    log.debug(\"saveTaskByCategory\", categoryId, item, isUpdate);\r\n    let tasks;\r\n    if (isUpdate) {\r\n      // if new categoryId equal to old categoryId\r\n      if (categoryId === item.categoryId) {\r\n        tasks = await this.updateTaskByCategory({categoryId, item, dispatch});\r\n      } else {\r\n        // remove item in old category\r\n        await this.removeTaskByCategory({categoryId: item.categoryId, item, dispatch});\r\n        // add item in new categoryId\r\n        item.categoryId = categoryId;\r\n        tasks = await this.addTaskByCategory({categoryId, item, dispatch});\r\n      }\r\n    } else {\r\n      tasks = await this.addTaskByCategory({categoryId, item, dispatch});\r\n    }\r\n    // dispatch && dispatch(saveTasksByCategory({ categoryId, tasks }));\r\n    dispatch && dispatch(saveRecent({ recent: item, isUpdate }));\r\n  }\r\n\r\n  async removeTaskByCategory({categoryId, item, dispatch}) {\r\n    log.debug(\"removeTaskByCategory\", categoryId, item);\r\n    try {\r\n      await TaskValidator.validate(item);\r\n      let taskList = await this.getTasksByCategory(categoryId);\r\n      taskList.remove(item);\r\n      dispatch && dispatch(saveTasksByCategory({ categoryId, tasks: taskList.get() }));\r\n      return item;\r\n    } catch (error) {\r\n      log.error(error);\r\n    }\r\n  }\r\n\r\n  async undoRemovedTask({item, dispatch}) {\r\n    log.debug(\"undoRemovedTask\", item);\r\n    try {\r\n      await TaskValidator.validate(item);\r\n      const categoryId = item.categoryId;\r\n      let taskList = await this.getTasksByCategory(categoryId);\r\n      taskList.undo(item);\r\n      const tasks = taskList.get();\r\n      dispatch && dispatch(saveTasksByCategory({ categoryId, tasks }));\r\n      return {item, list: tasks};\r\n    } catch (error) {\r\n      log.error(error);\r\n    }\r\n  }\r\n\r\n  async softRemoveTaskByCategory(categoryId, value) {\r\n    log.debug(\"softRemoveTaskByCategory\", categoryId, value);\r\n    try {\r\n      await TaskValidator.validate(value);\r\n      let taskList = await this.getTasksByCategory(categoryId);\r\n      let index = taskList.softDelete(value);\r\n      if (index == -1) {\r\n        throw Error(\"not found \" + JSON.parse(value));\r\n      }\r\n      this.dispatch(\r\n        saveTasksByCategory({ categoryId, tasks: taskList.get(true) })\r\n      );\r\n      log.info(\"softRemoveTaskByCategory success\");\r\n    } catch (error) {\r\n      log.error(error);\r\n    }\r\n  }\r\n\r\n  async updateTaskByCategory({categoryId, item, dispatch}) {\r\n    log.debug(\"updateTaskByCategory\", categoryId, item);\r\n    try {\r\n      await TaskValidator.validate(item);\r\n      let taskList = await this.getTasksByCategory(categoryId);\r\n      const tasks = taskList.update(item);\r\n      dispatch && dispatch(saveTasksByCategory({ categoryId, tasks }));\r\n      return tasks;\r\n    } catch (error) {\r\n      // todo handle error\r\n      log.error(error);\r\n    }\r\n  }\r\n\r\n  async addTaskByCategory({categoryId, item, dispatch}) {\r\n    log.debug(\"addTaskByCategory\", categoryId, item);\r\n    try {\r\n      await TaskValidator.validate(item);\r\n      const taskList = await this.getTasksByCategory(categoryId);\r\n      const tasks = taskList.add(item);\r\n      dispatch && dispatch(saveTasksByCategory({ categoryId, tasks }));\r\n      return tasks;\r\n    } catch (error) {\r\n      // todo handle error\r\n      log.error(error);\r\n    }\r\n  }\r\n}\r\n\r\nlet taskService;\r\nconst createTaskService = () => {\r\n  if (taskService) {\r\n    return taskService;\r\n  }\r\n  taskService = new TaskService();\r\n  return taskService;\r\n};\r\n\r\nexport { createTaskService };\r\n","import { log } from \"utils/log\";\r\nimport TaskCategoryService from \"services/task-category-service\";\r\nimport TaskService from \"services/task-service\";\r\n\r\nexport default class RemoveItemService {\r\n  taskService;\r\n  categoryService;\r\n  constructor() {\r\n    this.taskService = new TaskService();\r\n    this.categoryService = new TaskCategoryService();\r\n  }\r\n\r\n  removeAble(item) {\r\n    if (this.isTaskModel(item) || this.isTaskCategoryModel(item)) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  isTaskModel(item) {\r\n    if (item.constructor.name === \"TaskModel\") {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  isTaskCategoryModel(item) {\r\n    if (item.constructor.name === \"TaskCategoryModel\") {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  undo(item) {\r\n    log.debug(\"undo\", item);\r\n    if (this.removeAble(item)) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  async removePermanent(item) {\r\n    log.debug(\"removePermanent\", item);\r\n    // validate item\r\n    if (!this.removeAble(item)) {\r\n      return;\r\n    }\r\n    if (this.isTaskModel(item)) {\r\n      const reItem = await this.taskService.removeTaskByCategory(\r\n        item.categoryId,\r\n        item\r\n      );\r\n      log.info(\"removePermanent success\");\r\n      return reItem;\r\n    }\r\n    if (this.isTaskCategoryModel(item)) {\r\n      const reItem = await this.categoryService.removeCategories(item);\r\n      log.info(\"removePermanent success\");\r\n      return reItem;\r\n    }\r\n    log.info(\"removePermanent failed\");\r\n  }\r\n\r\n  async undoRemoved({item, dispatch}) {\r\n    log.debug(\"undoRemoved\", item);\r\n    // validate item\r\n    if (!this.removeAble(item)) {\r\n      return;\r\n    }\r\n    if (this.isTaskModel(item)) {\r\n      const result = await this.taskService.undoRemovedTask({\r\n        item,\r\n        dispatch,\r\n      });\r\n      log.info(\"undoRemoved success\");\r\n      return result.item;\r\n    }\r\n    if (this.isTaskCategoryModel(item)) {\r\n      const result = await this.categoryService.undoRemovedCategory({\r\n        item,\r\n        dispatch,\r\n      });\r\n      log.info(\"undoRemoved success\");\r\n      return result.item;\r\n    }\r\n    log.info(\"undoRemoved failed\");\r\n  }\r\n}\r\n\r\nlet removeItemService;\r\nconst createRemoveItemService = () => {\r\n  if (removeItemService) {\r\n    return removeItemService;\r\n  }\r\n  removeItemService = new RemoveItemService();\r\n  return removeItemService;\r\n};\r\n\r\nexport { createRemoveItemService };\r\n","// import { useIsFocused } from \"@react-navigation/native\";\r\nimport React, { useEffect } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { connect, useDispatch } from \"react-redux\";\r\nimport BottomBar from \"utils/bottom-bar\";\r\nimport EmptyPage from \"utils/empty-page\";\r\nimport { log } from \"utils/log\";\r\nimport RemovedSnackBar from \"utils/removed-snack-bar\";\r\nimport CategoryActionSheet from \"../components/task/category-action-sheet\";\r\nimport CategoryTab from \"../components/task/category-tab\";\r\nimport TaskCategoryForm from \"../components/task/task-category-form\";\r\nimport TaskList from \"../components/task/task-list\";\r\nimport {\r\n  CategoryListValidator,\r\n  CategoryValidator,\r\n} from \"../models/category/task-category-validator\";\r\nimport { TaskListValidator } from \"../models/task/task-validator\";\r\nimport { createRemoveItemService } from \"../services/remove-item-service\";\r\nimport { createTaskCategoryService } from \"../services/task-category-service\";\r\nimport { createTaskService } from \"../services/task-service\";\r\nimport { HeaderBackButton } from \"@react-navigation/elements\";\r\nimport { layoutConstants } from \"../models/contants\";\r\n\r\nconst TaskScreen = ({\r\n  navigation,\r\n  route,\r\n  categories,\r\n  tasks,\r\n  activeCategory,\r\n}) => {\r\n  const [categoryUpdate, setCategoryUpdate] = React.useState(null);\r\n  const [categoryVisible, setCategoryVisible] = React.useState(false);\r\n  // CategoryActionSheet\r\n  const [categoryActionSheetVisible, setCategoryActionSheetVisible] =\r\n    React.useState(false);\r\n  // RemovedSnackBar\r\n  const [snackVisible, setSnackVisible] = React.useState(false);\r\n  const [snackItem, setSnackItem] = React.useState(null);\r\n  const { params } = route;\r\n  // on start init\r\n  useEffect(() => {\r\n    navigation.setOptions({\r\n      headerLeft: (props) => (\r\n        <HeaderBackButton\r\n          {...props}\r\n          onPress={() => {\r\n            navigation.goBack();\r\n          }}\r\n          labelVisible={true}\r\n          tintColor={layoutConstants.colorPrimary}\r\n        />\r\n      ),\r\n    });\r\n    initTaskScreen();\r\n    // Should validate task screen params\r\n    validateScreen({ activeCategory, categories, tasks });\r\n  }, []);\r\n  useEffect(() => {\r\n    if (params?.action === \"delete\") {\r\n      onDeleteTask(params.item);\r\n    }\r\n    if (params?.action === \"reload\") {\r\n      params?.category &&\r\n        taskCategoryService.setActiveCategory(params.category);\r\n    }\r\n  }, [params]);\r\n  // Services\r\n  const taskService = createTaskService();\r\n  const taskCategoryService = createTaskCategoryService();\r\n  const removeItemService = createRemoveItemService();\r\n  const dispatch = useDispatch();\r\n\r\n  const onNavigateTaskScreen = (task) => {\r\n    navigation.navigate(\"ActionDetail\", {\r\n      task: task ? JSON.stringify(task) : null,\r\n      categoryId: task?.categoryId,\r\n    });\r\n  };\r\n\r\n  const initTaskScreen = async () => {\r\n    log.debug(\"initTaskScreen\", activeCategory);\r\n    const categories = await taskCategoryService.getCategoriesWithDefault();\r\n    taskCategoryService.setCategories(categories);\r\n    const category = activeCategory || categories[0];\r\n    taskCategoryService.setActiveCategory(category);\r\n    taskService.getTasksByCategoryStore(category.id);\r\n  };\r\n\r\n  const onDeleteTask = async (task) => {\r\n    log.debug(\"onDeleteTask\", task);\r\n    await taskService.softRemoveTaskByCategory(task.categoryId, task);\r\n    enableSnack(task);\r\n  };\r\n\r\n  // Category form\r\n  const onCategoryOpen = () => {\r\n    setCategoryVisible(true);\r\n  };\r\n  const onTaskTapAdd = async () => {\r\n    setCategoryUpdate(null);\r\n    onCategoryOpen();\r\n  };\r\n\r\n  const onCreateNewItem = () => {\r\n    navigation.navigate(\r\n      \"ActionDetail\",\r\n      JSON.stringify({ categoryId: activeCategory.id })\r\n    );\r\n  };\r\n\r\n  const onCategoryTapClick = async (tab) => {\r\n    taskCategoryService.setActiveCategoriesAndLoadTasks(tab);\r\n  };\r\n\r\n  const onCloseCategoryForm = async () => {\r\n    setCategoryVisible(false);\r\n  };\r\n\r\n  const onSaveCategoryForm = async (category, isUpdate) => {\r\n    log.debug(\"onSaveCategoryForm\", category, isUpdate);\r\n    await taskCategoryService.saveCategories(category, isUpdate);\r\n    onCloseCategoryForm();\r\n    log.info(\"onSaveCategoryForm success\");\r\n  };\r\n\r\n  const onDeleteCategoryForm = async (category) => {\r\n    await onDeleteCategoryTab(category);\r\n    onCloseCategoryForm();\r\n  };\r\n\r\n  const onDeleteCategoryTab = async (category) => {\r\n    log.debug(\"onDeleteCategoryTab\", category);\r\n    await taskCategoryService.softRemoveCategories(category);\r\n    enableSnack(category);\r\n  };\r\n\r\n  const onUpdateCategoryTab = async (category) => {\r\n    log.debug(\"onUpdateCategoryTab\", category);\r\n    setCategoryUpdate(category);\r\n    onCategoryOpen();\r\n  };\r\n  // End Category form\r\n\r\n  const enableSnack = (removedItem) => {\r\n    log.debug(\"enableSnack\", removedItem);\r\n    // validate remove item\r\n    if (\r\n      removedItem.constructor.name !== \"TaskModel\" &&\r\n      removedItem.constructor.name !== \"TaskCategoryModel\"\r\n    ) {\r\n      return;\r\n    }\r\n    setSnackItem(removedItem);\r\n    setSnackVisible(true);\r\n    log.info(\"enableSnack success\");\r\n  };\r\n\r\n  const onClickUndoRemovedSnackBar = async (item) => {\r\n    log.debug(\"onClickUndoRemovedSnackBar\", item);\r\n    await removeItemService.undoRemoved({ item, dispatch });\r\n  };\r\n\r\n  const onDoneRemovedSnackBar = async (item, catergoryId) => {\r\n    log.debug(\"onDoneRemovedSnackBar\", item);\r\n    await removeItemService.removePermanent(item);\r\n  };\r\n\r\n  // End RemovedSnackBar\r\n\r\n  return (\r\n    <View style={{ flex: 1, backgroundColor: \"white\" }} className=\"wrapper\">\r\n      {categories && (\r\n        <CategoryTab\r\n          tabs={categories}\r\n          activeCategory={activeCategory}\r\n          onAdd={onTaskTapAdd}\r\n          onClick={onCategoryTapClick}\r\n          onLongPress={() => {\r\n            setCategoryActionSheetVisible(true);\r\n          }}\r\n        ></CategoryTab>\r\n      )}\r\n      {tasks.length > 0 ? (\r\n        <TaskList\r\n          tasks={tasks}\r\n          onPress={(task) => onNavigateTaskScreen(task)}\r\n        ></TaskList>\r\n      ) : (\r\n        <EmptyPage\r\n          onPress={() => {\r\n            onNavigateTaskScreen();\r\n          }}\r\n        ></EmptyPage>\r\n      )}\r\n      {categoryVisible && (\r\n        <TaskCategoryForm\r\n          category={categoryUpdate}\r\n          onClose={onCloseCategoryForm}\r\n          visible={categoryVisible}\r\n          onSave={onSaveCategoryForm}\r\n          onDelete={onDeleteCategoryForm}\r\n        ></TaskCategoryForm>\r\n      )}\r\n      <CategoryActionSheet\r\n        activeCategory={activeCategory}\r\n        visible={categoryActionSheetVisible}\r\n        setVisible={setCategoryActionSheetVisible}\r\n        onDelete={onDeleteCategoryTab}\r\n        onUpdate={onUpdateCategoryTab}\r\n      ></CategoryActionSheet>\r\n      <RemovedSnackBar\r\n        visible={snackVisible}\r\n        setVisible={setSnackVisible}\r\n        item={snackItem}\r\n        onUndo={onClickUndoRemovedSnackBar}\r\n        onDone={onDoneRemovedSnackBar}\r\n      ></RemovedSnackBar>\r\n      <BottomBar\r\n        onMenuClick={() => {\r\n          setCategoryActionSheetVisible(true);\r\n        }}\r\n        onAddClick={onCreateNewItem}\r\n        style={{ height: 600 }}\r\n      ></BottomBar>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst validateScreen = (screenState) => {\r\n  try {\r\n    const { categories, tasks, activeCategory } = screenState;\r\n    CategoryListValidator.validateSync(categories);\r\n    TaskListValidator.validateSync(tasks);\r\n    activeCategory && CategoryValidator.validateSync(activeCategory);\r\n    // if(activeCategory && tasks[0] && activeCategory.id !== tasks[0].categoryId) {\r\n    //   log.debug(activeCategory, tasks[0]);\r\n    //   throw Error('task category is difference category');\r\n    // }\r\n    // tasks.map((t) => {\r\n    //   if (activeCategory.id !== t.categoryId) {\r\n    //     throw Error(\r\n    //       \"task category is difference category\" +\r\n    //         JSON.stringify({ activeCategory, tasks })\r\n    //     );\r\n    //   }\r\n    // });\r\n    log.info(\"validateScreen success\");\r\n  } catch (error) {\r\n    log.error(\"validateScreen\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst mapState = (state) => {\r\n  const categories = state.category.value;\r\n  const activeCategory = state.activeCategory.value;\r\n  const tasks = state.task.value.filter((c) => !c.deleted);\r\n\r\n  return {\r\n    categories,\r\n    activeCategory,\r\n    tasks,\r\n  };\r\n};\r\nexport default connect(mapState)(TaskScreen);\r\n","import { Text } from \"@react-native-material/core\";\r\nimport * as React from \"react\";\r\nimport { Pressable, StyleSheet, View } from \"react-native\";\r\n\r\nexport default function BoxLabel({ style, label, textStyle, onPress }) {\r\n  return (\r\n    <Pressable style={style ? style : styles.box} onPress={onPress}>\r\n      <View style={{ alignItems: \"center\",  justifyContent: \"center\", flex: 1 }}>\r\n        <Text style={textStyle ? textStyle : \"\"}>{label || \"Title\"}</Text>\r\n      </View>\r\n    </Pressable>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  box: {\r\n    width: 150,\r\n    height: \"45%\",\r\n    borderRadius: 10,\r\n    margin: 5,\r\n    padding: 5,\r\n    backgroundColor: \"#E7EBEB\",\r\n  },\r\n});\r\n","import { Divider, Text } from \"@react-native-material/core\";\r\nimport * as React from \"react\";\r\nimport { ScrollView, View } from \"react-native\";\r\n\r\nexport default function TitleBoxs({\r\n  title,\r\n  children,\r\n}) {\r\n  const upperTitle = title.charAt(0).toUpperCase() + title.slice(1);\r\n  return (\r\n    <View style={{ margin: 10 }}>\r\n      <Text variant=\"h5\">{upperTitle || \"Title\"}</Text>\r\n      <ScrollView horizontal style={{ flexGrow: 0, marginVertical: 5 }}>\r\n        <View\r\n          style={{\r\n            display: \"flex\",\r\n            flexWrap: \"wrap\",\r\n            flexDirection: \"column\",\r\n            height: 200,\r\n          }}\r\n        >\r\n          {children}\r\n        </View>\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n}\r\n","import { Text } from \"@react-native-material/core\";\r\nimport * as React from \"react\";\r\nimport { Pressable, StyleSheet, View } from \"react-native\";\r\n\r\nexport default function HomeTaskList(props) {\r\n  const { tasks, onPress } = props;\r\n  return (\r\n    <View style={{ flex: 1 }}>\r\n      {tasks &&\r\n        tasks.map((task, index) => {\r\n          const date = task.date ? new Date(task.date) : \"\";\r\n          const time = task.time ? new Date(task.time) : \"\";\r\n          let timeDisplay;\r\n          if(date || time) {\r\n            if(!date) {\r\n              timeDisplay = time;\r\n            }\r\n            if(!time) {\r\n              timeDisplay = date;\r\n            }\r\n            if(date && time) {\r\n              timeDisplay = date;\r\n              timeDisplay.setHours(time.getHours());\r\n              timeDisplay.setMinutes(time.getMinutes());\r\n            }\r\n          }\r\n          return (\r\n            <Pressable\r\n              onPress={() => {\r\n                onPress(task);\r\n              }}\r\n              key={task.id + index}\r\n            >\r\n              <View style={[styles.listItem]}>\r\n                <View style={{ width: \"100%\", margin: 5 }}>\r\n                    <Text>{task.title}</Text>\r\n                    <Text style={styles.description}>{task.description}</Text>\r\n                    <Text style={styles.time}>{timeDisplay && timeDisplay.toLocaleDateString(\"en-US\")}</Text>\r\n                  </View>\r\n              </View>\r\n            </Pressable>\r\n          );\r\n        })}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  listItem: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    borderBottomColor: \"rgb(216, 216, 216)\",\r\n    borderBottomWidth: 1,\r\n    paddingLeft: 15,\r\n    alignItems: \"center\",\r\n    minHeight: 50,\r\n  },\r\n  description: {\r\n    color: 'grey',\r\n    fontSize: 12\r\n  },\r\n  time: {\r\n    color: 'green',\r\n    fontSize: 12\r\n  }\r\n});\r\n","import axios from \"axios\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { log } from \"utils/log\";\r\nimport { constants } from \"../models/contants\";\r\n\r\nexport default class HomeService {\r\n  dispatch;\r\n  constructor() {\r\n    this.dispatch = useDispatch();\r\n  }\r\n\r\n  async getCategories() {\r\n    const url = constants.BASE_URL + \"/api/quote-action/data/category.json\";\r\n    const request = axios.create({baseURL: url, timeout: 5000});\r\n    const res = await request.get(url);\r\n    return res.data;\r\n  }\r\n}\r\n","import { StyleSheet } from \"react-native\";\r\n\r\nconst lineStyle = StyleSheet.create({\r\n  line: {\r\n    borderBottomColor: \"rgb(216, 216, 216)\",\r\n    borderBottomWidth: 1,\r\n  },\r\n});\r\n\r\nexport { lineStyle };\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  Text,\r\n  TextInput,\r\n} from \"@react-native-material/core\";\r\nimport { useIsFocused } from \"@react-navigation/native\";\r\nimport BoxLabel from \"components/home/box-label\";\r\nimport TitleBoxs from \"components/home/title-boxs\";\r\nimport React, { useEffect } from \"react\";\r\nimport { ScrollView, StyleSheet, View } from \"react-native\";\r\nimport { useSelector } from \"react-redux\";\r\nimport HomeTaskList from \"../components/home/task-list\";\r\nimport { log } from \"../components/utils/log\";\r\nimport { constants, layoutConstants } from \"../models/contants\";\r\nimport HomeService from \"../services/home-service\";\r\nimport TaskService from \"../services/task-service\";\r\nimport { lineStyle } from \"../styles/component-style\";\r\n\r\nconst HomeScreen = ({ navigation }) => {\r\n  const homeService = new HomeService();\r\n  const taskService = new TaskService();\r\n  const [categories, setCategories] = React.useState(null);\r\n  const tasks = useSelector((state) =>\r\n    state.task.value.filter((c) => !c.deleted)\r\n  );\r\n  const focus = useIsFocused();\r\n  useEffect(() => {\r\n    const getCategoriesSync = async () => {\r\n      const categories = await homeService.getCategories();\r\n      setCategories(categories);\r\n    };\r\n    getCategoriesSync();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    focus && taskService.getTasksByCategoryStore(constants.RECENT_ACTIONS);\r\n  }, [focus]);\r\n\r\n  const onPressTaskList = () => {\r\n    navigation.navigate(\"Actions\");\r\n  };\r\n\r\n  const onQuotePress = (tag) => {\r\n    log.debug(tag);\r\n    navigation.navigate(\"QuoteDetail\", { url: tag.url });\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <ScrollView>\r\n        <BoxLabel\r\n          style={styles.box}\r\n          label={\r\n            'They may call your victories, \"lucky\"...They may mock your failures...They may laugh at your heartache...But still, they will never be happy. This is the cyclical emptiness of the hater mindset.'\r\n          }\r\n          onPress={() => {}}\r\n          textStyle={{ color: layoutConstants.colorPrimary }}\r\n        ></BoxLabel>\r\n        <View style={{ margin: 10 }}>\r\n          {tasks ? (\r\n            <View>\r\n              <Text variant=\"h5\">Recent Actions</Text>\r\n              <HomeTaskList\r\n                tasks={tasks.reverse()}\r\n                onPress={onPressTaskList}\r\n              ></HomeTaskList>\r\n              <Button\r\n                title=\"Click to see more actions\"\r\n                variant=\"text\"\r\n                onPress={onPressTaskList}\r\n                color={layoutConstants.colorPrimary}\r\n              />\r\n            </View>\r\n          ) : (\r\n            <Button\r\n              variant=\"text\"\r\n              onPress={onPressTaskList}\r\n              color={layoutConstants.colorPrimary}\r\n            >\r\n              Click to create first action\r\n            </Button>\r\n          )}\r\n        </View>\r\n\r\n        {categories &&\r\n          Object.keys(categories).map((k, index) => (\r\n            <View key={index}>\r\n              <View\r\n                style={{\r\n                  ...lineStyle.line,\r\n                  borderBottomColor: \"#339F9F\",\r\n                  marginHorizontal: 10,\r\n                }}\r\n              />\r\n              <TitleBoxs key={k} navigation={navigation} title={k}>\r\n                {categories[k] &&\r\n                  categories[k].map((c, index) => {\r\n                    c.tag = c.tag.charAt(0).toUpperCase() + c.tag.slice(1);\r\n                    return (\r\n                      <BoxLabel\r\n                        key={index}\r\n                        navigation={navigation}\r\n                        label={c.tag}\r\n                        onPress={() => onQuotePress(c)}\r\n                      ></BoxLabel>\r\n                    );\r\n                  })}\r\n              </TitleBoxs>\r\n            </View>\r\n          ))}\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"#F3F3F3\",\r\n    flex: 1,\r\n  },\r\n  box: {\r\n    height: 100,\r\n    borderRadius: 10,\r\n    marginHorizontal: 30,\r\n    marginTop: 20,\r\n    padding: 5,\r\n    color: \"#489C93\",\r\n    borderWidth: 2,\r\n    borderColor: \"#40A79E\",\r\n    backgroundColor: \"#E5FFFD\",\r\n  },\r\n});\r\nexport default HomeScreen;\r\n","import axios from \"axios\";\r\nimport { log } from \"utils/log\";\r\n\r\nexport default class QuoteService {\r\n  async getList(url) {\r\n    log.debug(\"getList\", url);\r\n    const request = axios.create({baseURL: url, timeout: 5000});\r\n    const res = await request.get(url);\r\n    return res.data;\r\n  }\r\n}\r\n\r\nlet service;\r\nconst createQuoteService = () => {\r\n  if (service) {\r\n    return service;\r\n  }\r\n  service = new QuoteService();\r\n  return service;\r\n};\r\n\r\nexport { createQuoteService };","import { ListItem } from \"@react-native-material/core\";\r\nimport axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { ScrollView, StyleSheet, View } from \"react-native\";\r\nimport { constants } from \"../models/contants\";\r\n\r\nconst QuotesScreen = ({ navigation }) => {\r\n  const [quotes, setQuotes] = useState([]);\r\n\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n\r\n  const init = async () => {\r\n    const url =\r\n      constants.BASE_URL + \"/api/quote-action/data/hard times/heartbroken/0/data.json\";\r\n    const request = axios.create({ baseURL: url, timeout: 5000 });\r\n    const res = await request.get(url);\r\n    setQuotes(res.data.contents.map((c) => ({ title: c })));\r\n  };\r\n\r\n  const onPressHandler = (quote) => {\r\n    navigation.navigate(\"QuoteDetail\", { quote });\r\n  };\r\n\r\n  return (\r\n    <ScrollView>\r\n      <View style={{ backgroundColor: \"white\", flex: 1 }}>\r\n        {quotes &&\r\n          quotes.map((q, index) => (\r\n            <ListItem\r\n              key={index}\r\n              title={q.title}\r\n              onPress={() => onPressHandler(q)}\r\n            />\r\n          ))}\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    width: 150,\r\n    height: \"40%\",\r\n    margin: 10,\r\n    backgroundColor: \"grey\",\r\n  },\r\n});\r\nexport default QuotesScreen;\r\n","import BoxLabel from \"components/home/box-label\";\r\nimport React, { useEffect } from \"react\";\r\nimport { ImageBackground, StyleSheet, View } from \"react-native\";\r\nimport { constants, layoutConstants } from \"../models/contants\";\r\nimport { HeaderBackButton } from \"@react-navigation/elements\";\r\nimport { useState } from \"react\";\r\nimport Swiper from \"react-native-swiper/src\";\r\nimport { log } from \"../components/utils/log\";\r\nimport { createQuoteService } from \"../services/quote-service\";\r\n\r\nconst QuoteDetailScreen = ({ navigation, route }) => {\r\n  const { url } = route?.params;\r\n  const [quotes, setQuotes] = useState(null);\r\n\r\n  const quoteService = createQuoteService();\r\n  useEffect(() => {\r\n    init(url);\r\n  }, [url]);\r\n\r\n  useEffect(() => {\r\n    navigation.setOptions({\r\n      headerLeft: (props) => (\r\n        <HeaderBackButton\r\n          {...props}\r\n          onPress={() => {\r\n            navigation.goBack();\r\n          }}\r\n          labelVisible={true}\r\n          tintColor={layoutConstants.colorPrimary}\r\n        />\r\n      ),\r\n    });\r\n  }, []);\r\n\r\n  const init = async (url) => {\r\n    const data = await quoteService.getList(\r\n      constants.BASE_URL + \"/api/quote-action\" + url\r\n    );\r\n    setQuotes(data.contents);\r\n    log.debug(\"QuoteDetailScreen\", data);\r\n  };\r\n\r\n  return (\r\n    <View style={{ display: \"flex\", height: \"100%\" }}>\r\n      <ImageBackground\r\n        source={{ uri: constants.BASE_URL + \"/files/motivation/quote_bg.png\" }}\r\n        resizeMode=\"cover\"\r\n        style={{ flex: 1 }}\r\n      >\r\n        {quotes && (\r\n          <Swiper horizontal={false}>\r\n            {quotes.map((q, index) => {\r\n              return (\r\n                <View key={index} style={{ flex: 1 }}>\r\n                  <BoxLabel\r\n                    style={styles.item}\r\n                    label={q.item}\r\n                    textStyle={styles.textStyle}\r\n                  ></BoxLabel>\r\n                  <BoxLabel\r\n                    label={q.owner}\r\n                    style={styles.owner}\r\n                    textStyle={styles.textStyle}\r\n                  ></BoxLabel>\r\n                </View>\r\n              );\r\n            })}\r\n          </Swiper>\r\n        )}\r\n      </ImageBackground>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  textStyle: {\r\n    fontSize: 30,\r\n    padding: 20,\r\n    color: \"white\",\r\n  },\r\n  item: {\r\n    width: \"100%\",\r\n    justifyContent: \"center\",\r\n    flex: 3,\r\n  },\r\n  owner: {\r\n    width: \"100%\",\r\n    alignItems: \"flex-end\",\r\n    flex: 1,\r\n  },\r\n  viewPager: {\r\n    flex: 1,\r\n  },\r\n  page: {\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n});\r\nexport default QuoteDetailScreen;\r\n","export default class DateTimeModel {\r\n  date;\r\n  constructor(date) {\r\n    if(!date) {\r\n      this.date = new Date();\r\n      this.date.setHours(9, 0, 0, 0);\r\n    } else {\r\n      this.date = date;\r\n    }\r\n  }\r\n\r\n  getDate() {\r\n    return this.date;\r\n  }\r\n\r\n  getDateByRepeat() {\r\n    return this.date;\r\n  } \r\n\r\n  getTimeByRepeat() {\r\n    return this.date;\r\n  } \r\n  \r\n  getHoursMinutes() {\r\n    return (\"0\" + this.date.getHours()).slice(-2) + \":\" + (\"0\" + this.date.getMinutes()).slice(-2);\r\n  }\r\n\r\n  getDateString() {\r\n    return this.date.toLocaleDateString(\"en-US\");\r\n  }\r\n}\r\n","\r\nexport default class DayRepeatModel {\r\n  days = [\r\n    { title: \"No Repeat\", value: \"no_repeat\", checked: false },\r\n    { title: \"Daily\", value: \"daily\", checked: false },\r\n    { title: \"Monthly\", value: \"monthly\", checked: false },\r\n    { title: \"Mon\", value: \"mon\", checked: false },\r\n    { title: \"Tue\", value: \"tue\", checked: false },\r\n    { title: \"Wed\", value: \"wed\", checked: false },\r\n    { title: \"Thu\", value: \"thu\", checked: false },\r\n    { title: \"Fri\", value: \"fri\", checked: false },\r\n    { title: \"Sat\", value: \"sat\", checked: false },\r\n    { title: \"Sun\", value: \"sun\", checked: false },\r\n  ];\r\n  selected = [];\r\n\r\n  constructor(selectedDays) {\r\n    if(!selectedDays) {\r\n      selectedDays = [\"no_repeat\"]\r\n    }\r\n    this.days = this.days.map(day => {\r\n      if(selectedDays.includes(day.value)) {\r\n        day.checked = true;\r\n      }\r\n      return day;\r\n    });\r\n    this.setSelected();\r\n  }\r\n\r\n  setSelected() {\r\n    this.selected = this.days.filter((day) => day.checked);\r\n  }\r\n\r\n  getSelectedValue() {\r\n    return this.selected.reduce((acc, curr) => {\r\n      acc.push(curr.value);\r\n      return acc;\r\n    }, [])\r\n  }\r\n\r\n  getLabel() {\r\n    const selected = this.selected;\r\n    if (this.isNoRepeat()) {\r\n      return \"No Repeat\";\r\n    }\r\n    if (selected.length === 1) {\r\n      return \"Repeat \" + selected[0].title;\r\n    } else {\r\n      if (this.isDaily()) {\r\n        return \"Repeat Daily\";\r\n      } else {\r\n        return \"Repeat \" + selected.length + \" days\";\r\n      }\r\n    }\r\n  }\r\n\r\n  getHideDate() {\r\n    if(this.isNoRepeat()) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  getHideTime() {\r\n    if(this.isMonthly()) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getShowRepeat() {\r\n    return this.selected.length > 0;\r\n  }\r\n\r\n  isNoRepeat() {\r\n    if(this.selected.length === 0) {\r\n        return true;\r\n    } else {\r\n        return (this.selected.length === 1 && this.selected[0].value === 'no_repeat') ? true : false;\r\n    }\r\n  }\r\n\r\n  isDaily() {\r\n    return this.selected.some(day => day.value === 'daily');\r\n  }\r\n\r\n  isMonthly() {\r\n    return (this.selected.length === 1 && this.selected[0].value === 'monthly') ? true : false;\r\n  }\r\n\r\n  isNormalRepeat() {\r\n    if(this.selected.length === 1) {\r\n        return this.selected[0].value !== 'monthly' && this.selected[0].value !== 'no_repeat';\r\n    }\r\n    if(this.selected.length > 1 && this.selected.length < 8) {\r\n        return true\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","import DateTimeModel from \"../date-time/date-time-model\";\r\nimport DayRepeatModel from \"../day-repeat-model\";\r\n\r\nclass TaskRepeatMediator {\r\n  dayRepeat;\r\n  dateModel;\r\n  timeModel;\r\n  displayChip;\r\n  date;\r\n  time;\r\n  selectedDaysRepeat;\r\n\r\n  constructor(dayRepeat, dateModel, timeModel) {\r\n    this.dayRepeat = dayRepeat;\r\n    this.dateModel = dateModel;\r\n    this.timeModel = timeModel;\r\n  }\r\n\r\n  process() {\r\n    // todo do we need try catch?\r\n    if(!this.dayRepeat) {\r\n      return;\r\n    }\r\n    if (this.dayRepeat.isDaily() && this.timeModel) {\r\n      this.displayChip = this.timeModel.getHoursMinutes() + \" Daily\";\r\n      this.time = this.timeModel.getDate();\r\n    }\r\n    if (this.dayRepeat.isMonthly()) {\r\n      this.displayChip = \"Monthly\";\r\n    }\r\n    if (this.dayRepeat.isNormalRepeat() && this.timeModel) {\r\n      this.displayChip =\r\n        this.timeModel.getHoursMinutes() +\r\n        ` ${this.dayRepeat.selected.length} days`;\r\n      this.time = this.timeModel.getDate();\r\n    }\r\n    if (this.dayRepeat.isNoRepeat() && this.timeModel && this.dateModel) {\r\n      this.displayChip =\r\n        this.timeModel.getHoursMinutes() +\r\n        ` ${this.dateModel.getDateString()}`;\r\n      this.date = this.dateModel.getDate();\r\n      this.time = this.timeModel.getDate();\r\n    }\r\n    this.selectedDaysRepeat = this.dayRepeat.getSelectedValue();\r\n  }\r\n}\r\n\r\nclass TaskRepeatRawDataMediator extends TaskRepeatMediator {\r\n  constructor(repeat, date, time) {\r\n    super(\r\n      repeat? new DayRepeatModel(repeat) : null,\r\n      date? new DateTimeModel(date): null,\r\n      time? new DateTimeModel(time): null\r\n    );\r\n  }\r\n}\r\n\r\nexport { TaskRepeatMediator, TaskRepeatRawDataMediator };\r\n","import { IconButton, Button } from \"@react-native-material/core\";\r\nimport Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\n\r\nconst Chip = (props) => {\r\n  const { title, onButtonPress, onIconPress, titleStyle, ...others } = props;\r\n\r\n  return (\r\n    <Button\r\n      variant=\"outlined\"\r\n      title={title}\r\n      titleStyle={titleStyle}\r\n      onPress={onButtonPress}\r\n      trailing={(props) => (\r\n        <IconButton\r\n          key=\"add-category\"\r\n          onPress={onIconPress}\r\n          icon={(props) => <Icon name=\"close\" size={15} />}\r\n        />\r\n      )}\r\n      {...others}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Chip;\r\n","import * as React from \"react\";\r\nimport { Text } from \"@react-native-material/core\";\r\nimport { View } from \"react-native\";\r\nimport DateTimePicker from \"@react-native-community/datetimepicker\";\r\n\r\nexport default function TaskDateTimePicker(props) {\r\n  const { onDateChange, onTimeChange, date, time, hideDate, hideTime } = props;\r\n\r\n  const onDateChangeHandler = (event, selectedDate) => {\r\n    onDateChange(event, selectedDate);\r\n  }\r\n\r\n  const onTimeChangeHandler = (event, selectedTime) => {\r\n    onTimeChange(event, selectedTime);\r\n  }\r\n\r\n  return (\r\n    <View>\r\n      {!hideDate && (\r\n        <View\r\n          key=\"date-picker\"\r\n          style={{\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            marginVertical: 10,\r\n          }}\r\n        >\r\n          <View style={{ width: \"40%\", margin: 7 }}>\r\n            <Text>Date:</Text>\r\n          </View>\r\n          <View style={{ width: \"40%\" }}>\r\n            <DateTimePicker\r\n              testID=\"dateTimePicker\"\r\n              value={date}\r\n              mode={\"date\"}\r\n              is24Hour={true}\r\n              onChange={onDateChangeHandler}\r\n            />\r\n          </View>\r\n          <View style={{ width: \"20%\" }}></View>\r\n        </View>\r\n      )}\r\n      {!hideTime && (\r\n        <View\r\n          key=\"time-picker\"\r\n          style={{ display: \"flex\", flexDirection: \"row\" }}\r\n        >\r\n          <View style={{ width: \"40%\", margin: 7 }}>\r\n            <Text>Time:</Text>\r\n          </View>\r\n          <View style={{ width: \"30%\" }}>\r\n            <DateTimePicker\r\n              testID=\"dateTimePicker\"\r\n              value={time}\r\n              mode={\"time\"}\r\n              is24Hour={true}\r\n              onChange={onTimeChangeHandler}\r\n              style={{ width: \"100%\" }}\r\n            />\r\n          </View>\r\n          <View style={{ width: \"30%\" }}></View>\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport { Button, Pressable, Text } from \"@react-native-material/core\";\r\nimport * as React from \"react\";\r\nimport { StyleSheet, View } from \"react-native\";\r\nimport DayRepeatModel from \"models/day-repeat-model\";\r\nimport ExpoCheckbox from \"../utils/expo-checkbox\";\r\n\r\nexport default function TimeRepeatComponent(props) {\r\n  const { repeat, onChange } = props;\r\n  const [dayRepeat, setDayRepeat] = React.useState(new DayRepeatModel(repeat));\r\n  const [repeatValue, setRepeatValue] = React.useState(dayRepeat.getLabel());\r\n  const [show, setShow] = React.useState(dayRepeat.getShowRepeat());\r\n\r\n  const repeatButtonClick = () => {\r\n    setShow(!show);\r\n  };\r\n\r\n  const selectRepeatLabel = () => {\r\n    setRepeatValue(dayRepeat.getLabel());\r\n  };\r\n\r\n  const onCheck = (checked, value) => {\r\n    if ([\"no_repeat\", \"monthly\"].includes(value)) {\r\n      dayRepeat.days.map((day) => {\r\n        if (day.value === value) {\r\n          day.checked = checked;\r\n        } else {\r\n          day.checked = false;\r\n        }\r\n        return day;\r\n      });\r\n    } else {\r\n      dayRepeat.days[0].checked = false;\r\n      dayRepeat.days[2].checked = false;\r\n      let values = [value];\r\n      if (value === \"daily\") {\r\n        values = [\"daily\", \"mon\", \"tue\", \"wed\", \"thu\", \"fri\", \"sat\", \"sun\"];\r\n      }\r\n      dayRepeat.days.map((day) => {\r\n        if (values.includes(day.value)) {\r\n          day.checked = checked;\r\n        }\r\n        return day;\r\n      });\r\n      // check daily if all days checked\r\n      dayRepeat.days[1].checked = dayRepeat.days\r\n        .slice(3)\r\n        .every((day) => day.checked);\r\n    }\r\n    dayRepeat.setSelected();\r\n    const newRepeat = dayRepeat.getSelectedValue();\r\n    const newDayRepeat = new DayRepeatModel(newRepeat);\r\n    setDayRepeat(newDayRepeat);\r\n    selectRepeatLabel();\r\n    onChange(newDayRepeat);\r\n  };\r\n\r\n  return (\r\n    <View style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n      <Button\r\n        title={repeatValue}\r\n        onPress={repeatButtonClick}\r\n        leading={(props) => <Icon name=\"repeat\" {...props} />}\r\n        style={{ margin: 10 }}\r\n      />\r\n      {show && (\r\n        <View\r\n          style={{ display: \"flex\", flexDirection: \"row\", flexWrap: \"wrap\" }}\r\n        >\r\n          {dayRepeat &&\r\n            dayRepeat.days.map((day) => {\r\n              return (\r\n                <View\r\n                  key={day.value}\r\n                  style={{ width: \"50%\", alignItems: \"flex-start\" }}\r\n                >\r\n                  <Pressable\r\n                    onPress={() => {\r\n                      onCheck(!day.checked, day.value);\r\n                    }}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"row\",\r\n                      margin: 10,\r\n                    }}\r\n                  >\r\n                    <ExpoCheckbox\r\n                      style={styles.checkbox}\r\n                      value={day.checked}\r\n                      keyword={day.value}\r\n                      onValueChange={onCheck}\r\n                    />\r\n                    <Text>{day.title}</Text>\r\n                  </Pressable>\r\n                </View>\r\n              );\r\n            })}\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  checkbox: {\r\n    marginHorizontal: 10,\r\n  },\r\n});\r\n","import Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\r\nimport {\r\n  Button,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogHeader,\r\n  IconButton\r\n} from \"@react-native-material/core\";\r\nimport * as React from \"react\";\r\nimport { View } from \"react-native\";\r\nimport DateTimeModel from \"models/date-time/date-time-model\";\r\nimport DayRepeatModel from \"models/day-repeat-model\";\r\nimport Dialog from \"../utils/dialog\";\r\nimport HideKeyboard from \"../utils/hide-keyboard\";\r\nimport TaskDateTimePicker from \"./task-date-time-picker\";\r\nimport TimeRepeatComponent from \"./time-repeat-component\";\r\nlet newDayRepeat;\r\nlet newDate;\r\nlet newTime;\r\n// data model: repeat, date, time\r\n// view props: visible\r\n// action: onClose, onDone\r\nexport default function TaskTimeDialog(props) {\r\n  // on init create form, task date, task time, task repeat are default\r\n  // on init update form, task date, task time, task repeat are updated base on data model\r\n  // on action done form, task date, task time, task repeat are submited\r\n  // on action close form, close form\r\n  // visible, date, time, repeat, onClose, onDone\r\n  const dateTimeModel = new DateTimeModel();\r\n  const { visible, repeat, date, time, onClose, onDone } = props;\r\n  const [hideDate, setHideDate] = React.useState(false);\r\n  const [hideTime, setHideTime] = React.useState(false);\r\n  React.useEffect(() => {\r\n    if (visible === true) {\r\n      newDayRepeat = new DayRepeatModel(repeat);\r\n      newDate = date;\r\n      newTime = time;\r\n      hideDateTime(newDayRepeat);\r\n    }\r\n  }, [props.visible]);\r\n\r\n  // on init task time\r\n  // on action chip click\r\n  // on action add time\r\n  const hideDateTime = (dayRepeat) => {\r\n    setHideDate(dayRepeat.getHideDate());\r\n    setHideTime(dayRepeat.getHideTime());\r\n  };\r\n\r\n  // TimeRepeatComponent\r\n  const onTimeRepeatChangeHandler = (dayRepeat) => {\r\n    // setNewDayRepeat(dayRepeat);\r\n    newDayRepeat = dayRepeat;\r\n    hideDateTime(newDayRepeat);\r\n  };\r\n  // End TimeRepeatComponent\r\n\r\n  // TaskDateTimePicker\r\n  const onDateChangeHandler = (event, selectedDate) => {\r\n    newDate = selectedDate;\r\n  };\r\n\r\n  const onTimeChangeHandler = (event, selectedTime) => {\r\n    newTime = selectedTime;\r\n  };\r\n  // End TaskDateTimePicker\r\n\r\n  const onDoneHandler = () => {\r\n    onDone(\r\n      newDayRepeat,\r\n      new DateTimeModel(newDate),\r\n      new DateTimeModel(newTime)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dialog visible={visible}>\r\n      <HideKeyboard>\r\n        <View>\r\n          <View style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n            <View style={{ flex: 1 }}>\r\n              <DialogHeader title=\"Time\" />\r\n            </View>\r\n            <IconButton\r\n              onPress={onClose}\r\n              icon={(props) => <Icon name=\"close\" {...props} />}\r\n              {...props}\r\n            />\r\n          </View>\r\n          <DialogContent>\r\n            <TimeRepeatComponent\r\n              repeat={repeat}\r\n              onChange={onTimeRepeatChangeHandler}\r\n            ></TimeRepeatComponent>\r\n            <TaskDateTimePicker\r\n              date={date || dateTimeModel.getDate()}\r\n              time={time || dateTimeModel.getDate()}\r\n              hideDate={hideDate}\r\n              hideTime={hideTime}\r\n              onDateChange={onDateChangeHandler}\r\n              onTimeChange={onTimeChangeHandler}\r\n            ></TaskDateTimePicker>\r\n          </DialogContent>\r\n\r\n          <DialogActions>\r\n            <Button title=\"Done\" onPress={onDoneHandler} />\r\n          </DialogActions>\r\n        </View>\r\n      </HideKeyboard>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { Button, TextInput } from \"@react-native-material/core\";\r\nimport { HeaderBackButton } from \"@react-navigation/elements\";\r\nimport TaskModel from \"models/task/task-model\";\r\nimport {\r\n  TaskRepeatMediator,\r\n  TaskRepeatRawDataMediator\r\n} from \"models/task/task-repeat-mediator\";\r\nimport { TaskValidator } from \"models/task/task-validator\";\r\nimport * as React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { StyleSheet, View } from \"react-native\";\r\nimport { Dropdown } from \"react-native-element-dropdown\";\r\nimport { connect, useDispatch } from \"react-redux\";\r\nimport Chip from \"utils/chip\";\r\nimport HideKeyboard from \"utils/hide-keyboard\";\r\nimport { log } from \"utils/log\";\r\nimport TaskTimeDialog from \"../components/task/task-time-dialog\";\r\nimport { constants, layoutConstants } from \"../models/contants\";\r\nimport { createTaskCategoryService } from \"../services/task-category-service\";\r\nimport { createTaskService } from \"../services/task-service\";\r\n\r\n\r\n// data model: task\r\n// view props: visible\r\n// action: onClose, onSave, onDelete, onCancel\r\nfunction TaskDetailScreen({ navigation, route, displayCategories }) {\r\n  const { params } = route;\r\n  // on init create form, task date, task time, task repeat are null\r\n  // on init update form, task date, task time, task repeat are updated base on task\r\n  // on action create/update form, task date, task time, task repeat (null/exist value) are submited\r\n  const task = params?.task ? JSON.parse(params?.task) : null;\r\n  const categoryId = params?.categoryId || constants.MY_ACTIONS;\r\n  const [title, setTitle] = React.useState(task?.title || \"\");\r\n  const [description, setDescription] = React.useState(task?.description || \"\");\r\n  const [displayDateTime, setDisplayDateTime] = React.useState(null);\r\n  const [categoryUpdate, setCategoryUpdate] = React.useState(null);\r\n  const [isFocus, setIsFocus] = React.useState(false);\r\n  // TaskTimeDialog\r\n  const [taskTimeDialogVisible, setTaskTimeDialogVisible] =\r\n    React.useState(false);\r\n  // on action add time click, task date, task time, task repeat are updated base on default\r\n  // on action add time click + chip, task date, task time, task repeat are updated base on chip data saved\r\n  // on action update chip click, task date, task time, task repeat are updated base on chip data saved\r\n  // on action close chip click, task date, task time, task repeat are updated to null\r\n  const [taskTimeDialogDate, setTaskTimeDialogDate] = React.useState(\r\n    task?.date ? new Date(task.date) : null\r\n  );\r\n  const [taskTimeDialogTime, setTaskTimeDialogTime] = React.useState(\r\n    task?.time ? new Date(task.time) : null\r\n  );\r\n  const [taskTimeDialogRepeat, setTaskTimeDialogRepeat] = React.useState(\r\n    task?.selectedDaysRepeat || null\r\n  );\r\n  const stateRef = React.useRef();\r\n  stateRef.current = {\r\n    title,\r\n    description,\r\n    categoryUpdate,\r\n    taskTimeDialogDate,\r\n    taskTimeDialogTime,\r\n    taskTimeDialogRepeat,\r\n  };\r\n  const dispatch = useDispatch();\r\n\r\n  const isUpdate = !!task;\r\n  const taskService = createTaskService();\r\n  const taskCategoryService = createTaskCategoryService();\r\n\r\n  useEffect(() => {\r\n    navigation.setOptions({\r\n      headerLeft: (props) => (\r\n        <HeaderBackButton\r\n          {...props}\r\n          onPress={saveAndBack}\r\n          label={\"Actions\"}\r\n          labelVisible={true}\r\n          tintColor={layoutConstants.colorPrimary}\r\n        />\r\n      ),\r\n    });\r\n    initTaskDetail();\r\n  }, []);\r\n\r\n  const saveAndBack = async () => {\r\n    await handelSave();\r\n    const category = stateRef.current.categoryUpdate;\r\n    navigation.navigate(\"Actions\", {\r\n      action: \"reload\",\r\n      category: category\r\n        ? { id: category?.value, title: category?.label }\r\n        : null,\r\n    });\r\n  };\r\n\r\n  const initTaskDetail = async () => {\r\n    const categories = await taskCategoryService.getCategoriesWithDefault();\r\n    taskCategoryService.setCategories(categories);\r\n  };\r\n\r\n  const taskTimeDialogOnClose = () => {\r\n    setTaskTimeDialogVisible(false);\r\n  };\r\n\r\n  const taskTimeDialogOnOpen = () => {\r\n    setTaskTimeDialogVisible(true);\r\n  };\r\n  // On Done\r\n  // dayRepeat DayRepeatModel, datePicked DateTimeModel, timePicked: DateTimeModel\r\n  const taskTimeDialogOnDone = (dayRepeat, datePicked, timePicked) => {\r\n    // put logic into mediator\r\n    const mediator = new TaskRepeatMediator(dayRepeat, datePicked, timePicked);\r\n    mediator.process();\r\n    setDisplayDateTime(mediator.displayChip);\r\n    setTaskTimeDialogRepeat(mediator.selectedDaysRepeat);\r\n    setTaskTimeDialogDate(mediator.date);\r\n    setTaskTimeDialogTime(mediator.time);\r\n    taskTimeDialogOnClose();\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (task) {\r\n      // on init existing task\r\n      const mediator = new TaskRepeatRawDataMediator(\r\n        taskTimeDialogRepeat,\r\n        taskTimeDialogDate,\r\n        taskTimeDialogTime\r\n      );\r\n      mediator.process();\r\n      setDisplayDateTime(mediator.displayChip);\r\n    } else {\r\n      // on init new task\r\n    }\r\n  }, [task]);\r\n\r\n  const handelSave = async () => {\r\n    const id = task ? task.id : null;\r\n    const {\r\n      title,\r\n      description,\r\n      categoryUpdate,\r\n      taskTimeDialogDate,\r\n      taskTimeDialogTime,\r\n      taskTimeDialogRepeat,\r\n    } = stateRef?.current;\r\n    let taskObj = new TaskModel({\r\n      id,\r\n      title: title,\r\n      categoryId, // old category\r\n      description: description,\r\n      date: taskTimeDialogDate,\r\n      time: taskTimeDialogTime,\r\n      selectedDaysRepeat: taskTimeDialogRepeat,\r\n    });\r\n    TaskValidator.validate(taskObj);\r\n    await taskService.saveTaskByCategory({\r\n      categoryId: categoryUpdate?.value || categoryId,\r\n      item: taskObj,\r\n      isUpdate,\r\n      dispatch,\r\n    });\r\n  };\r\n\r\n  const onCloseChip = () => {\r\n    log.debug(\"onCloseChip\");\r\n    // setDayRepeat(new DayRepeatModel());\r\n    resetTime();\r\n  };\r\n\r\n  const resetTime = () => {\r\n    setTaskTimeDialogDate(null);\r\n    setTaskTimeDialogTime(null);\r\n    setTaskTimeDialogRepeat(null);\r\n    setDisplayDateTime(null);\r\n  };\r\n\r\n  const onDelete = async () => {\r\n    navigation.navigate(\"Actions\", { action: \"delete\", item: task });\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container} id=\"task-form\">\r\n      <HideKeyboard>\r\n        <View style={{ flex: 1 }}>\r\n          <TextInput\r\n            variant=\"standard\"\r\n            value={title}\r\n            onChangeText={setTitle}\r\n            placeholder=\"Action Title\"\r\n          />\r\n          <TextInput\r\n            variant=\"standard\"\r\n            value={description}\r\n            onChangeText={setDescription}\r\n            placeholder=\"Action Description\"\r\n          />\r\n          <View style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n            <Dropdown\r\n              style={[styles.dropdown, isFocus && { borderColor: \"blue\" }]}\r\n              placeholderStyle={styles.placeholderStyle}\r\n              selectedTextStyle={styles.selectedTextStyle}\r\n              inputSearchStyle={styles.inputSearchStyle}\r\n              iconStyle={styles.iconStyle}\r\n              data={displayCategories}\r\n              search\r\n              maxHeight={300}\r\n              labelField=\"label\"\r\n              valueField=\"value\"\r\n              placeholder={!isFocus ? \"Categories\" : \"...\"}\r\n              searchPlaceholder=\"Search...\"\r\n              value={categoryUpdate?.value || categoryId}\r\n              onFocus={() => setIsFocus(true)}\r\n              onBlur={() => setIsFocus(false)}\r\n              onChange={(item) => {\r\n                setCategoryUpdate(item);\r\n                setIsFocus(false);\r\n              }}\r\n            />\r\n            {/* <View\r\n              style={{\r\n                alignItems: \"flex-end\",\r\n                justifyContent: \"flex-end\",\r\n              }}\r\n            >\r\n              <Button\r\n                variant=\"outlined\"\r\n                onPress={taskTimeDialogOnOpen}\r\n                leading={(props) => <Icon name=\"plus\" {...props} />}\r\n                title=\"Time\"\r\n                style={{ width: 100 }}\r\n              />\r\n            </View> */}\r\n          </View>\r\n          {displayDateTime && (\r\n            <Chip\r\n              title={displayDateTime}\r\n              onButtonPress={taskTimeDialogOnOpen}\r\n              onIconPress={onCloseChip}\r\n              titleStyle={{ flex: 1 }}\r\n              style={{ marginTop: 10, borderRadius: 20 }}\r\n            ></Chip>\r\n          )}\r\n          {taskTimeDialogVisible && (\r\n            <TaskTimeDialog\r\n              repeat={taskTimeDialogRepeat}\r\n              visible={taskTimeDialogVisible}\r\n              date={taskTimeDialogDate}\r\n              time={taskTimeDialogTime}\r\n              onClose={taskTimeDialogOnClose}\r\n              onDone={taskTimeDialogOnDone}\r\n            ></TaskTimeDialog>\r\n          )}\r\n        </View>\r\n      </HideKeyboard>\r\n      <View>\r\n        {isUpdate && (\r\n          <Button\r\n            color=\"red\"\r\n            title={\"Delete\"}\r\n            tintColor={\"white\"}\r\n            onPress={onDelete}\r\n            style={{ width: \"100%\", marginBottom: 20 }}\r\n          />\r\n        )}\r\n        <Button\r\n          disabled={!title}\r\n          title={isUpdate ? \"Update\" : \"Create\"}\r\n          onPress={saveAndBack}\r\n          color={layoutConstants.colorPrimary}\r\n          tintColor={\"white\"}\r\n          style={{ width: \"100%\", marginBottom: 20 }}\r\n        />\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"white\",\r\n    padding: 15,\r\n    flex: 1,\r\n  },\r\n  dropdown: {\r\n    height: 50,\r\n    borderColor: \"gray\",\r\n    borderBottomWidth: 1,\r\n    paddingHorizontal: 8,\r\n    marginRight: 20,\r\n    flex: 1,\r\n  },\r\n  placeholderStyle: {\r\n    fontSize: 16,\r\n  },\r\n  selectedTextStyle: {\r\n    fontSize: 16,\r\n  },\r\n  iconStyle: {\r\n    width: 20,\r\n    height: 20,\r\n  },\r\n  inputSearchStyle: {\r\n    height: 40,\r\n    fontSize: 16,\r\n  },\r\n});\r\nconst mapState = (state) => {\r\n  const categories = state.category.value;\r\n  const displayCategories = categories?.map((c) => ({\r\n    value: c.id,\r\n    label: c.title,\r\n  }));\r\n  return {\r\n    categories,\r\n    displayCategories,\r\n  };\r\n};\r\nexport default connect(mapState)(TaskDetailScreen);\r\n","import { Provider } from \"@react-native-material/core\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport * as React from \"react\";\r\nimport { Provider as ReduxProvider } from \"react-redux\";\r\nimport store from \"./app/store\";\r\nimport TaskScreen from \"screens/task-screen\";\r\nimport HomeScreen from \"screens/home-screen\";\r\nimport QuotesScreen from \"screens/quotes-screen\";\r\nimport QuoteDetailScreen from \"screens/quote-detail-screen\";\r\nimport TaskDetailScreen from \"./app/screens/task-detail-screen\";\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function App() {\r\n  return (\r\n    <ReduxProvider store={store}>\r\n      <Provider>\r\n        <NavigationContainer>\r\n          <Stack.Navigator>\r\n            <Stack.Screen\r\n              name=\"Home\"\r\n              component={HomeScreen}\r\n              options={{ title: \"Home\" }}\r\n            />\r\n            <Stack.Screen\r\n              name=\"Actions\"\r\n              component={TaskScreen}\r\n              options={{ title: \"Actions\" }}\r\n            />\r\n            <Stack.Screen\r\n              name=\"ActionDetail\"\r\n              component={TaskDetailScreen}\r\n              options={{ title: \"Action Detail\" }}\r\n            />\r\n            <Stack.Screen\r\n              name=\"Recognize\"\r\n              component={TaskScreen}\r\n              options={{ title: \"Actions\" }}\r\n            />\r\n            <Stack.Screen\r\n              name=\"Quotes\"\r\n              component={QuotesScreen}\r\n              options={{ title: \"Quotes\" }}\r\n            />\r\n            <Stack.Screen\r\n              name=\"QuoteDetail\"\r\n              component={QuoteDetailScreen}\r\n              options={{ title: \"Quote\" }}\r\n            />\r\n          </Stack.Navigator>\r\n        </NavigationContainer>\r\n      </Provider>\r\n    </ReduxProvider>\r\n  );\r\n}\r\n"],"sourceRoot":""}